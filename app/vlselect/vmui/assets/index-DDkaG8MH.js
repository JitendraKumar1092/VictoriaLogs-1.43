const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FileSystemFileHandle-R744i65p.js","./config-BJNG_Aa3.js","./downloader-B69BFsAs.js"])))=>i.map(i=>d[i]);
import{d as F,t as Yi,a as Gi,u as Qi,r as Wi,q as Ki,Q as Xe,h as pt,T as E,b as t,x as ye,c as M,A as D,y as T,e as O,f as N,k as V,N as As,g as X,i as At,$ as Ue,M as et,j as je,l as Tt,D as Lt,L as Zi,m as Ji,n as ho,o as Xi,p as Ts,_ as er,s as Ls,F as Es,I as tr,O as or,v as sr,H as ir,R as rr,w as _t,z as ar}from"./vendor-DVElVWUl.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();F.extend(Yi);F.extend(Gi);F.extend(Qi);F.extend(Wi);const cr="modulepreload",nr=function(e,o){return new URL(e,o).href},jo={},Yo=function(o,s,i){let r=Promise.resolve();if(s&&s.length>0){let m=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const c=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),l=n?.nonce||n?.getAttribute("nonce");r=m(s.map(d=>{if(d=nr(d,i),d in jo)return;jo[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(i)for(let g=c.length-1;g>=0;g--){const f=c[g];if(f.href===d&&(!u||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":cr,u||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,f)=>{p.addEventListener("load",g),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=c,window.dispatchEvent(n),!n.defaultPrevented)throw c}return r.then(c=>{for(const n of c||[])n.status==="rejected"&&a(n.reason);return o().catch(a)})},lr=()=>window.location.href.replace(/(\/(select\/)?vmui\/.*|\/#\/.*)/,""),dr="VLUI:",mr=["AUTOCOMPLETE","TIMEZONE","DISABLED_DEFAULT_TIMEZONE","THEME","LOGS_LIMIT","LOGS_MARKDOWN","LOGS_ANSI","LOGS_DISABLED_HOVERS","LOGS_QUERY_HISTORY","SERVER_URL","RAW_JSON_LIVE_VIEW","LOGS_OVERRIDE_TIME"],go=e=>`${dr}${e}`,le=(e,o,s=!0)=>{try{const i=s?go(e):e;o?window.localStorage.setItem(i,JSON.stringify({value:o})):window.localStorage.removeItem(i),window.dispatchEvent(new Event("storage"))}catch(i){console.error(i)}},he=(e,o=!0)=>{const s=o?go(e):e,i=window.localStorage.getItem(s);if(i!==null)try{return JSON.parse(i)?.value}catch{return i}},Go=(e,o=!0)=>{(o?e.map(go):e).forEach(i=>window.localStorage.removeItem(i))},pr=()=>{const e={migrated:[],removed:[],skipped:[]};for(const o of mr){const s=o,i=he(s,!1),r=he(s,!0);if(i===void 0){e.skipped.push(s);continue}if(r!==void 0){Go([s],!1),e.removed.push(s);continue}le(s,i,!0),Go([s],!1),e.migrated.push(s)}return e};var fe=(e=>(e.yhat="yhat",e.yhatUpper="yhat_upper",e.yhatLower="yhat_lower",e.anomaly="vmui_anomalies_points",e.training="vmui_training_data",e.actual="actual",e.anomalyScore="anomaly_score",e))(fe||{}),to=(e=>(e.table="table",e.chart="chart",e.code="code",e))(to||{}),Is=(e=>(e.emptyServer="Please enter Server URL",e.validServer="Please provide a valid Server URL",e.validQuery="Please enter a valid Query and execute it",e.traceNotFound="Not found the tracing information",e.emptyTitle="Please enter title",e.positiveNumber="Please enter positive number",e.validStep="Please enter a valid step",e.unknownType="Unknown server response format: must have 'errorType'",e))(Is||{}),pe=(e=>(e.system="system",e.light="light",e.dark="dark",e))(pe||{});const qe=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Ye=(e,o)=>{document.documentElement.style.setProperty(`--${e}`,o)},kt=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,ur=e=>e===pe.system&&kt()||e===pe.dark,Ms=e=>e.replace(/\/$/,""),hr={serverUrl:Ms(lr()),theme:he("THEME")||pe.system,isDarkTheme:null,flags:{},appConfig:{}};function gr(e,o){switch(o.type){case"SET_SERVER":return{...e,serverUrl:Ms(o.payload)};case"SET_THEME":return le("THEME",o.payload),{...e,theme:o.payload};case"SET_DARK_THEME":return{...e,isDarkTheme:ur(e.theme)};case"SET_FLAGS":return{...e,flags:o.payload};case"SET_APP_CONFIG":return{...e,appConfig:o.payload};default:throw new Error}}const Qo="YYYY-MM-DD",Le="YYYY-MM-DD HH:mm:ss",fo="YYYY-MM-DD[T]HH:mm:ss",fr=50,vr=1e3,at=1e4,$t="vmui.logs.limit.warn.dismissed",Fs=100,nt=5,oo="Ungrouped",_e="_stream",Ke="_msg",Qe=`${Le}.SSS`,ee={LIMIT:"limit",GROUP_BY:"groupBy",DISPLAY_FIELDS:"displayFields",NO_WRAP_LINES:"noWrapLines",COMPACT_GROUP_HEADER:"compactGroupHeader",DATE_FORMAT:"dateFormat",ROWS_PER_PAGE:"rows_per_page"},so=1,Ps=25,Be=(e,o)=>{const s=window.location.hash.split("?")[1];return Ki.parse(s,{ignoreQueryPrefix:!0})?.[e]??o??""},_r=()=>{const o=(window.location.hash.split("?")[1]||"").match(/g\d+\.expr/g)?.length||1;return new Array(o>so?so:o).fill(1).map((s,i)=>Be(`g${i}.expr`,""))},Wo=(e,o,s)=>{const i=new URLSearchParams(e);if(s==="append")o.forEach((r,a)=>i.append(a,r));else for(const[r,a]of o)i.set(r,a);return i},vo=Xe({}),se=()=>ye(vo).state,Os=()=>ye(vo).dispatch,yr=Object.entries(hr).reduce((e,[o,s])=>({...e,[o]:Be(o)||s}),{}),br=({children:e})=>{const[o,s]=pt(gr,yr),i=E(()=>({state:o,dispatch:s}),[o,s]);return t(vo.Provider,{value:i,children:e})},wr=["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Louisville","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Katmandu","Asia/Khandyga","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis"],kr=window.innerWidth/4,Ko={min:1,max:1578e8},Zo=Intl.supportedValuesOf,qr=Zo?Zo("timeZone"):wr,Ds=[{long:"years",short:"y",possible:"year"},{long:"weeks",short:"w",possible:"week"},{long:"days",short:"d",possible:"day"},{long:"hours",short:"h",possible:"hour"},{long:"minutes",short:"m",possible:"min"},{long:"seconds",short:"s",possible:"sec"},{long:"milliseconds",short:"ms",possible:"millisecond"}],xr=Ds.map(e=>e.short),Sr=e=>Math.round(e*1e3)/1e3,Nr=e=>_o(F.duration(e,"seconds").asMilliseconds()),Cr=e=>{let o=Sr(e);const s=Math.round(e);return e>=100&&(o=s-s%10),e<100&&e>=10&&(o=s-s%5),e<10&&e>=1&&(o=s),e<1&&e>.01&&(o=Math.round(e*40)/40),Nr(o||.001).replace(/\s/g,"")},Ar=e=>{const o=e.match(/\d+/g),s=e.match(/[a-zA-Z]+/g);if(s&&o&&xr.includes(s[0]))return{[s[0]]:o[0]}},Tr=e=>{const o=Ds.map(a=>a.short).join("|"),s=new RegExp(`\\d+(\\.\\d+)?[${o}]+`,"g"),r=(e.match(s)||[]).reduce((a,c)=>{const n=Ar(c);return n?{...a,...n}:{...a}},{});return F.duration(r).asSeconds()};to.table,to.code;const Lr=(e,o,s)=>Cr(e/kr),Fe=(e,o)=>{const s=(o||F().toDate()).valueOf()/1e3,i=Tr(e);return{start:s-i,end:s,step:Lr(i),date:Rs(o||F().toDate())}},Er=e=>F(e).utcOffset(0,!0).toDate(),Rs=e=>F.tz(e).utc().format(fo),yt=e=>F.tz(e).format(fo),Ir=()=>F().utc().format(fo),_o=e=>{if(e===0)return"0ms";const o=Math.floor(e%1e3),s=Math.floor(e/1e3%60),i=Math.floor(e/1e3/60%60),r=Math.floor(e/1e3/3600%24),a=Math.floor(e/(1e3*60*60*24)),c=["d","h","m","s","ms"];return[a,r,i,s,o].map((l,m)=>l?`${l}${c[m]}`:"").filter(l=>l).join("")},zs=e=>{const o=e.to.valueOf()-e.from.valueOf();return _o(o)},Ce=e=>{const o=F(e*1e3);return o.isValid()?o.toDate():new Date},Mr=()=>F().tz().subtract(1,"day").endOf("day").toDate(),Fr=()=>F().tz().endOf("day").toDate(),qt=[{title:"Last 5 minutes",duration:"5m",isDefault:!0},{title:"Last 15 minutes",duration:"15m"},{title:"Last 30 minutes",duration:"30m"},{title:"Last 1 hour",duration:"1h"},{title:"Last 3 hours",duration:"3h"},{title:"Last 6 hours",duration:"6h"},{title:"Last 12 hours",duration:"12h"},{title:"Last 24 hours",duration:"24h"},{title:"Last 2 days",duration:"2d"},{title:"Last 7 days",duration:"7d"},{title:"Last 30 days",duration:"30d"},{title:"Last 90 days",duration:"90d"},{title:"Last 180 days",duration:"180d"},{title:"Last 1 year",duration:"1y"},{title:"Yesterday",duration:"1d",until:Mr},{title:"Today",duration:"1d",until:Fr}].map(e=>({id:e.title.replace(/\s/g,"_").toLocaleLowerCase(),until:e.until?e.until:()=>F().tz().toDate(),...e})),yo=({relativeTimeId:e,defaultDuration:o,defaultEndInput:s})=>{const i=qt.find(c=>c.isDefault)?.id,r=e||Be("g0.relative_time",i),a=qt.find(c=>c.id===r);return{relativeTimeId:a?r:"none",duration:a?a.duration:o,endInput:a?a.until():s}},lt=e=>`UTC${F().tz(e).format("Z")}`,Jo=(e="")=>{const o=new RegExp(e,"i");return qr.reduce((s,i)=>{const r=(i.match(/^(.*?)\//)||[])[1]||"unknown",a=lt(i),c=a.replace(/UTC|0/,""),n=i.replace(/[/_]/g," "),l={region:i,utc:a,search:`${i} ${a} ${n} ${c}`},m=!e||e&&o.test(l.search);return m&&s[r]?s[r].push(l):m&&(s[r]=[l]),s},{})},Hs=e=>{F.tz.setDefault(e)},Pr=e=>{try{return F().tz(e),!0}catch{return!1}},Vs=()=>{const e=F.tz.guess(),o=Pr(e);return{isValid:o,title:o?`Browser Time (${e})`:"Browser timezone (UTC)",region:o?e:"UTC"}},Xo=e=>{if(!e)return 0n;const o=F(e).valueOf();if(!e.includes("."))return BigInt(o)*1000000n;const s=e.match(/\.(\d+)Z/);if(!s)return BigInt(o)*1000000n;let i=s[1];i=i.padEnd(9,"0");const r=parseInt(i.slice(3),10);return BigInt(o)*1000000n+BigInt(r)},Bs=e=>{const o=e.match(/^(.+T\d{2}:\d{2}:\d{2})(\.(\d+))?Z$/);if(!o)throw new Error("Invalid time format");const s=o[1],r=((o[3]||"")+"000000000").slice(0,9);return`${s}.${r}Z`},Or=(e,o)=>{if(!e)return"";if(!/\.SSS/.test(o))return F(e).tz().format(o);let i;try{i=Bs(e).match(/\.(\d{9})Z$/)?.[1]||"000000000"}catch{i=(e.match(/\.(\d+)(?:Z|[+-]\d{2}:?\d{2})?$/)?.[1]||"").padEnd(9,"0").slice(0,9)}const r=o.replace(/\.SSS/g,"");return`${F(e).tz().format(r)}.${i}`},es=e=>F(e).valueOf()/1e3,$s=he("TIMEZONE")||Vs().region;Hs($s);const Dr=()=>{const e=Be("g0.range_input"),{duration:o,endInput:s,relativeTimeId:i}=yo({defaultDuration:e||"1h",defaultEndInput:Er(Be("g0.end_input",Ir())),relativeTimeId:e?Be("g0.relative_time","none"):void 0});return{duration:o,period:Fe(o,s),relativeTime:i}},Rr={...Dr(),timezone:$s};function zr(e,o){switch(o.type){case"SET_TIME_STATE":return{...e,...o.payload};case"SET_DURATION":return{...e,duration:o.payload,period:Fe(o.payload,Ce(e.period.end)),relativeTime:"none"};case"SET_RELATIVE_TIME":return{...e,duration:o.payload.duration,period:Fe(o.payload.duration,o.payload.until),relativeTime:o.payload.id};case"SET_PERIOD":const s=zs(o.payload);return{...e,duration:s,period:Fe(s,o.payload.to),relativeTime:"none"};case"RUN_QUERY":const{duration:i,endInput:r}=yo({relativeTimeId:e.relativeTime,defaultDuration:e.duration,defaultEndInput:Ce(e.period.end)});return{...e,period:Fe(i,r)};case"RUN_QUERY_TO_NOW":return{...e,period:Fe(e.duration)};case"SET_TIMEZONE":return Hs(o.payload),le("TIMEZONE",o.payload),e.defaultTimezone&&le("DISABLED_DEFAULT_TIMEZONE",o.payload!==e.defaultTimezone),{...e,timezone:o.payload};case"SET_DEFAULT_TIMEZONE":return{...e,defaultTimezone:o.payload};default:throw new Error}}const bo=Xe({}),Oe=()=>ye(bo).state,tt=()=>ye(bo).dispatch,Hr=({children:e})=>{const[o,s]=pt(zr,Rr),i=E(()=>({state:o,dispatch:s}),[o,s]);return t(bo.Provider,{value:i,children:e})},Et=e=>{const o=he(e);return o?JSON.parse(o):{}},Vr=(e,o,s)=>{const i=Et(e);le(e,JSON.stringify({...i,[o]:s}))},it=(e,o)=>Et(e)[o]||[],Br=(e,o)=>{const s=o.map(l=>l.values[l.index]),i=Et(e),r=i.QUERY_HISTORY||[];r[0]||(r[0]=[]);const a=r[0],c=Ps*so;s.forEach(l=>{!a.includes(l)&&l&&a.unshift(l),a.length>c&&a.pop()});const n={...i,QUERY_HISTORY:[a]};le(e,JSON.stringify(n))},$r=(e,o)=>{Vr(e,"QUERY_FAVORITES",o)},Ur=(e,o)=>{const s=Et(e);le(e,JSON.stringify({...s,[o]:[]}))},jr=(e,o)=>{const s=o||{values:[]},i=e===s.values[s.values.length-1],r=!i&&e?[...s.values,e]:s.values;return r.length>Ps&&r.shift(),{index:s.values.length-Number(i),values:r}},dt={displayResults:50,queryLimit:1e3,cacheLimit:1e3};class Yr{maxSize;map;constructor(){this.maxSize=dt.cacheLimit,this.map=new Map}get(o){for(const[s,i]of this.map){const r=JSON.parse(s),a=r.start===o.start&&r.end===o.end,c=r.type===o.type,n=o.value&&r.value&&o.value.includes(r.value),l=r.match===o.match||n,m=i.length<dt.queryLimit;if(l&&a&&c&&m)return i}return this.map.get(JSON.stringify(o))}put(o,s){if(this.map.size>=this.maxSize){const i=this.map.keys().next().value;i&&this.map.delete(i)}this.map.set(JSON.stringify(o),s)}}const ue=({value:e=!1,disabled:o=!1,label:s,color:i="secondary",fullWidth:r,onChange:a})=>{const c=()=>{o||a(!e)},n=M({"vm-switch":!0,"vm-switch_full-width":r,"vm-switch_disabled":o,"vm-switch_active":e,[`vm-switch_${i}_active`]:e,[`vm-switch_${i}`]:i});return t("div",{className:n,onClick:c,children:[t("div",{className:"vm-switch-track",children:t("div",{className:"vm-switch-track__thumb"})}),s&&t("span",{className:"vm-switch__label",children:s})]})};function te(e,o,s,i){const r=D(o);T(()=>{r.current=o},[o]),T(()=>{const a=s?.current??window;if(!(a&&a.addEventListener))return;const c=n=>r.current(n);return a.addEventListener(e,c,i),()=>{a.removeEventListener(e,c,i)}},[e,s,i])}const ut=(e,o)=>{const s=O(n=>o?o(n):!!he(n),[e,o]),[i,r]=N(s(e)),a=O(()=>{const n=s(e);n!==i&&r(n)},[e,i,s]),c=O(n=>{le(e,n)},[e]);return te("storage",a),E(()=>[i,c],[i,c])},io="LOGS_OVERRIDE_TIME",Gr=!0,wo=()=>{const e=he(io);return e?e==="true":Gr},Qr=()=>{const[e,o]=ut(io,wo);return t("div",{children:[t("div",{className:"vm-server-configurator__title",children:"Query time override"}),t(ue,{label:"Override time picker with query _time filter",value:e,onChange:i=>{o(i),le(io,String(i))}})]})},ts=_r(),Wr={query:ts,queryHistory:ts.map(e=>({index:0,values:[e]})),autocomplete:he("AUTOCOMPLETE")||!1,autocompleteQuick:!1,autocompleteCache:new Yr,metricsQLFunctions:[],queryHasTimeFilter:!1};function Kr(e,o){switch(o.type){case"SET_QUERY":return{...e,query:o.payload.map(s=>s)};case"SET_QUERY_HISTORY":return Br(o.payload.key,o.payload.history),{...e,queryHistory:o.payload.history};case"SET_QUERY_HISTORY_BY_INDEX":return e.queryHistory.splice(o.payload.queryNumber,1,o.payload.value),{...e,queryHistory:e.queryHistory};case"TOGGLE_AUTOCOMPLETE":return le("AUTOCOMPLETE",!e.autocomplete),{...e,autocomplete:!e.autocomplete};case"SET_AUTOCOMPLETE_QUICK":return{...e,autocompleteQuick:o.payload};case"SET_AUTOCOMPLETE_CACHE":return e.autocompleteCache.put(o.payload.key,o.payload.value),{...e};case"SET_QUERY_HAS_TIME_FILTER":return{...e,queryHasTimeFilter:wo()?o.payload:!1};default:throw new Error}}const ko=Xe({}),ht=()=>ye(ko).state,qo=()=>ye(ko).dispatch,Zr=({children:e})=>{const[o,s]=pt(Kr,Wr),i=E(()=>({state:o,dispatch:s}),[o,s]);return t(ko.Provider,{value:i,children:e})},Jr={markdownParsing:he("LOGS_MARKDOWN")==="true",ansiParsing:he("LOGS_ANSI")==="true",autocompleteCache:new Map};function Xr(e,o){switch(o.type){case"SET_MARKDOWN_PARSING":return le("LOGS_MARKDOWN",`${o.payload}`),{...e,markdownParsing:o.payload};case"SET_ANSI_PARSING":return le("LOGS_ANSI",`${o.payload}`),{...e,ansiParsing:o.payload};case"SET_AUTOCOMPLETE_CACHE":{if(e.autocompleteCache.size>=dt.cacheLimit){const s=e.autocompleteCache.keys().next().value;s&&e.autocompleteCache.delete(s)}return e.autocompleteCache.set(o.payload.key,o.payload.value),{...e,autocompleteCache:e.autocompleteCache}}default:throw new Error}}const xo=Xe({}),So=()=>ye(xo).state,Us=()=>ye(xo).dispatch,ea=({children:e})=>{const[o,s]=pt(Xr,Jr),i=E(()=>({state:o,dispatch:s}),[o,s]);return t(xo.Provider,{value:i,children:e})},ta={totalLogs:0,fieldNames:[],fieldNamesParamsKey:null,streamsFieldNames:[],streamsFieldNamesParamsKey:null};function oa(e,o){switch(o.type){case"SET_TOTAL_LOGS":return{...e,totalLogs:o.payload};case"SET_FIELD_NAMES":return{...e,fieldNames:o.payload.rows,fieldNamesParamsKey:o.payload.key};case"SET_STREAM_FIELD_NAMES":return{...e,streamsFieldNames:o.payload.rows,streamsFieldNamesParamsKey:o.payload.key};default:throw new Error("Unknown action")}}const No=Xe({}),sa=()=>ye(No).state,ia=()=>ye(No).dispatch,ra=Object.entries(ta).reduce((e,[o,s])=>({...e,[o]:Be(o)||s}),{}),aa=({children:e})=>{const[o,s]=pt(oa,ra),i=E(()=>({state:o,dispatch:s}),[o,s]);return t(No.Provider,{value:i,children:e})},js=()=>t("svg",{viewBox:"0 0 85 38",fill:"currentColor",children:[t("path",{d:"M11.12 10.48c.36.28.8.43 1.26.43h.05c.48 0 .96-.19 1.25-.44 1.5-1.28 5.88-5.29 5.88-5.29 1.17-1.09-2.1-2.17-7.13-2.18h-.06c-5.04 0-8.3 1.1-7.13 2.18 0 0 4.37 4 5.88 5.3Zm2.56 2.16c-.36.28-.8.44-1.26.45h-.04c-.46 0-.9-.17-1.26-.45-1.04-.88-4.74-4.22-6.12-5.5v1.94c0 .21.08.5.22.63l.07.06c1.05.96 4.55 4.16 5.83 5.25.36.28.8.43 1.26.44h.04c.49-.02.96-.2 1.26-.44 1.3-1.11 4.94-4.45 5.88-5.31.15-.14.23-.42.23-.63V7.15a455.13 455.13 0 0 1-6.11 5.5Zm-1.26 4.99c.46 0 .9-.16 1.26-.44 2.05-1.82 4.09-3.65 6.1-5.5v1.94c0 .2-.07.48-.22.62-.94.87-4.57 4.2-5.88 5.3-.3.26-.77.44-1.26.45h-.04c-.46 0-.9-.16-1.26-.44-1.2-1.02-4.38-3.92-5.62-5.06l-.28-.25c-.14-.14-.22-.42-.22-.62v-1.94c1.38 1.26 5.08 4.6 6.12 5.5.36.28.8.43 1.26.44h.04ZM40 5l-5.84 14.46h-2.43L25.89 5h2.16a.9.9 0 0 1 .9.61l3.41 8.82a18.8 18.8 0 0 1 .62 2.02 19.44 19.44 0 0 1 .57-2.02l3.39-8.82c.05-.15.16-.3.31-.42a.9.9 0 0 1 .58-.19H40Zm17.18 0v14.46H54.8v-9.34c0-.37.02-.78.06-1.21l-4.37 8.21c-.21.4-.53.59-.95.59h-.38c-.43 0-.75-.2-.95-.59L43.8 8.88a22.96 22.96 0 0 1 .07 1.24v9.34H41.5V5h2.03l.3.01c.1 0 .17.02.24.05.07.03.13.07.19.13a1 1 0 0 1 .17.24l4.33 8.03a16.97 16.97 0 0 1 .6 1.36 14.34 14.34 0 0 1 .6-1.38l4.28-8.01c.05-.1.1-.18.17-.24.06-.06.12-.1.19-.13a.9.9 0 0 1 .24-.05l.3-.01h2.04Zm8.88 13.73a4.5 4.5 0 0 0 1.82-.35 3.96 3.96 0 0 0 2.22-2.47c.2-.57.3-1.19.3-1.85V5.31h1.02v8.75c0 .78-.12 1.51-.37 2.19a4.88 4.88 0 0 1-2.76 2.95c-.66.29-1.4.43-2.23.43-.82 0-1.57-.14-2.24-.43a5.01 5.01 0 0 1-2.75-2.95 6.37 6.37 0 0 1-.37-2.19V5.31h1.03v8.74c0 .66.1 1.28.3 1.85a3.98 3.98 0 0 0 2.21 2.47c.53.24 1.14.36 1.82.36Zm10.38.73h-1.03V5.31h1.03v14.15ZM1.73 36v-5.17l-.67-.07a.6.6 0 0 1-.21-.1.23.23 0 0 1-.08-.18v-.44h.96v-.59c0-.34.05-.65.14-.92a1.79 1.79 0 0 1 1.08-1.11 2.45 2.45 0 0 1 1.62-.02l-.03.53c0 .1-.06.15-.16.16H4c-.18 0-.35.03-.5.08a.95.95 0 0 0-.39.23c-.1.11-.19.25-.25.43-.05.18-.08.4-.08.65v.56h1.75v.78H2.8V36H1.73Zm6.17-6.17c.45 0 .85.07 1.2.22a2.57 2.57 0 0 1 1.5 1.62c.13.38.2.81.2 1.29s-.07.91-.2 1.3a2.57 2.57 0 0 1-1.49 1.61c-.36.14-.76.21-1.2.21-.45 0-.86-.07-1.22-.21a2.57 2.57 0 0 1-1.5-1.62c-.12-.38-.19-.81-.19-1.3 0-.47.07-.9.2-1.28a2.57 2.57 0 0 1 1.5-1.62c.35-.15.76-.22 1.2-.22Zm0 5.42c.6 0 1.05-.2 1.35-.6.3-.4.44-.97.44-1.69s-.15-1.28-.44-1.69c-.3-.4-.75-.6-1.35-.6-.3 0-.57.05-.8.15-.22.1-.4.26-.56.45-.15.2-.26.44-.33.73-.08.28-.11.6-.11.96 0 .72.15 1.29.44 1.69.3.4.76.6 1.36.6Zm5.26-4.11c.2-.42.43-.74.71-.97.28-.24.62-.36 1.03-.36.13 0 .25.02.36.05.12.02.23.07.32.13l-.08.8c-.02.1-.08.15-.18.15l-.24-.04a1.7 1.7 0 0 0-.88.05c-.15.05-.29.14-.4.25-.12.1-.23.24-.32.4-.1.17-.18.35-.26.56V36h-1.07v-6.08h.61c.12 0 .2.02.24.07.05.04.08.12.1.23l.06.92Zm13.73-3.82L23.39 36h-1.46l-3.5-8.68h1.29a.54.54 0 0 1 .54.37l2.04 5.3a11.31 11.31 0 0 1 .37 1.21 11.65 11.65 0 0 1 .35-1.22l2.03-5.29c.03-.1.1-.18.19-.25.1-.08.21-.12.35-.12h1.3Zm2.2 2.52V36H27.6v-6.16h1.49Zm.2-1.79c0 .13-.02.25-.08.36a1 1 0 0 1-.51.5.96.96 0 0 1-.73 0 1.02 1.02 0 0 1-.5-.5.96.96 0 0 1 0-.73.93.93 0 0 1 .86-.58.9.9 0 0 1 .37.08c.12.05.22.11.3.2a.94.94 0 0 1 .3.67Zm5.72 3.1a.68.68 0 0 1-.13.13c-.04.03-.1.05-.18.05a.42.42 0 0 1-.22-.07 3.95 3.95 0 0 0-.62-.31c-.14-.05-.3-.07-.51-.07-.26 0-.5.04-.69.14-.2.1-.36.23-.49.4-.13.18-.22.4-.29.64-.06.25-.1.53-.1.85 0 .33.04.62.1.88.08.25.18.47.32.64.13.18.29.3.48.4.18.09.4.13.63.13a1.6 1.6 0 0 0 .94-.27l.26-.2a.4.4 0 0 1 .25-.09.3.3 0 0 1 .27.14l.43.54a2.76 2.76 0 0 1-1.77.96c-.22.03-.43.05-.65.05a2.57 2.57 0 0 1-1.96-.83c-.25-.28-.45-.6-.6-1-.14-.4-.21-.85-.21-1.35 0-.45.06-.87.2-1.25a2.61 2.61 0 0 1 1.51-1.67c.37-.16.8-.24 1.28-.24.46 0 .86.07 1.2.22.35.15.66.36.94.64l-.4.54Zm3.43 4.95c-.54 0-.95-.15-1.24-.45-.28-.3-.42-.73-.42-1.26v-3.44h-.63a.29.29 0 0 1-.2-.07c-.06-.06-.09-.13-.09-.24v-.59l.99-.16.31-1.68a.33.33 0 0 1 .12-.18.34.34 0 0 1 .21-.07h.77v1.94h1.64v1.05h-1.64v3.34c0 .2.05.34.14.45.1.1.22.16.39.16a.73.73 0 0 0 .39-.1l.12-.07a.2.2 0 0 1 .11-.03c.05 0 .08.01.11.03l.09.1.44.72c-.21.18-.46.32-.74.4-.28.1-.57.15-.87.15Zm5.09-6.35c.46 0 .87.07 1.24.22a2.7 2.7 0 0 1 1.58 1.63c.14.39.22.83.22 1.31 0 .49-.08.93-.22 1.32-.14.4-.35.73-.62 1-.26.28-.58.49-.96.64-.37.15-.78.22-1.24.22a3.4 3.4 0 0 1-1.25-.22 2.71 2.71 0 0 1-1.59-1.64 3.8 3.8 0 0 1-.21-1.32c0-.48.07-.92.21-1.31a2.75 2.75 0 0 1 1.58-1.63c.38-.15.8-.22 1.26-.22Zm0 5.2c.51 0 .89-.17 1.13-.52.25-.34.38-.84.38-1.5a2.6 2.6 0 0 0-.38-1.53c-.24-.34-.62-.52-1.13-.52-.52 0-.9.18-1.16.53-.25.35-.37.85-.37 1.51s.12 1.17.37 1.51c.25.35.64.52 1.16.52Zm5.56-4.04c.2-.37.42-.65.69-.86.26-.21.57-.32.94-.32.28 0 .5.06.68.19l-.1 1.1a.3.3 0 0 1-.09.16.24.24 0 0 1-.15.04 1.8 1.8 0 0 1-.27-.03 2.01 2.01 0 0 0-.34-.03c-.16 0-.3.03-.44.08a1.1 1.1 0 0 0-.34.2c-.1.1-.2.2-.27.33-.08.13-.15.27-.22.44V36H47.7v-6.16h.87c.15 0 .26.03.31.09.06.05.1.15.13.29l.09.7Zm4.62-1.07V36h-1.49v-6.16h1.49Zm.2-1.79c0 .13-.02.25-.07.36a1 1 0 0 1-.51.5.96.96 0 0 1-.74 0 1.02 1.02 0 0 1-.5-.5.96.96 0 0 1 0-.73.93.93 0 0 1 .86-.58.9.9 0 0 1 .38.08c.11.05.21.11.3.2a.94.94 0 0 1 .28.67Zm4.56 5.32a7.8 7.8 0 0 0-1.08.12c-.29.05-.52.12-.7.2a.92.92 0 0 0-.38.3.64.64 0 0 0-.11.36c0 .26.07.45.23.56.15.11.35.17.6.17.3 0 .57-.06.79-.17.22-.1.44-.28.65-.5v-1.04Zm-3.4-2.67c.71-.65 1.57-.97 2.56-.97.36 0 .68.06.97.18a1.99 1.99 0 0 1 1.16 1.24c.1.3.16.61.16.96V36h-.67a.7.7 0 0 1-.33-.06c-.07-.04-.13-.13-.18-.26l-.13-.44c-.16.14-.3.26-.46.37a2.8 2.8 0 0 1-.97.43 2.77 2.77 0 0 1-1.32-.05 1.62 1.62 0 0 1-.57-.31 1.41 1.41 0 0 1-.38-.53 1.85 1.85 0 0 1-.05-1.18c.05-.16.14-.3.25-.45.12-.14.28-.27.46-.4a3 3 0 0 1 .7-.32 9.19 9.19 0 0 1 2.2-.33v-.36c0-.41-.09-.71-.26-.91-.18-.2-.43-.3-.76-.3a1.84 1.84 0 0 0-1.02.28l-.33.18c-.1.06-.2.09-.32.09-.1 0-.2-.03-.27-.08a.72.72 0 0 1-.17-.2l-.26-.47Zm11.49 4.32V36h-4.88v-8.6h1.16v7.62h3.72Zm3.16-5.2c.44 0 .84.08 1.2.23a2.57 2.57 0 0 1 1.49 1.62c.13.38.2.81.2 1.29s-.07.91-.2 1.3a2.57 2.57 0 0 1-1.49 1.61c-.36.14-.76.21-1.2.21-.45 0-.85-.07-1.21-.21a2.57 2.57 0 0 1-1.5-1.62c-.13-.38-.2-.81-.2-1.3 0-.47.07-.9.2-1.28.14-.39.33-.72.59-1 .25-.26.55-.47.9-.62.37-.15.77-.22 1.22-.22Zm0 5.43c.6 0 1.05-.2 1.34-.6.3-.4.45-.97.45-1.69s-.15-1.28-.45-1.69c-.3-.4-.74-.6-1.34-.6-.3 0-.57.05-.8.15-.22.1-.4.26-.56.45-.15.2-.26.44-.34.73-.07.28-.1.6-.1.96 0 .72.14 1.29.44 1.69.3.4.75.6 1.36.6Zm6.33-2.22c.22 0 .4-.03.57-.09.16-.06.3-.14.41-.25.12-.11.2-.24.26-.39.05-.15.08-.31.08-.5 0-.37-.11-.66-.34-.88-.23-.22-.55-.33-.98-.33-.43 0-.76.1-.99.33-.22.22-.34.51-.34.89 0 .18.03.34.09.5a1.1 1.1 0 0 0 .67.63c.16.06.35.09.57.09Zm1.93 3.3a.51.51 0 0 0-.13-.36.84.84 0 0 0-.34-.22 8.57 8.57 0 0 0-1.73-.2 7.5 7.5 0 0 1-.62-.05c-.23.1-.41.23-.56.4a.8.8 0 0 0-.1.92c.07.12.18.22.32.3.14.1.32.16.54.21a3.5 3.5 0 0 0 1.55 0c.23-.05.42-.12.57-.22.16-.1.29-.21.37-.34a.8.8 0 0 0 .13-.44Zm1.08-6.17v.4c0 .13-.08.21-.25.25l-.69.09c.14.26.2.56.2.88a1.86 1.86 0 0 1-1.36 1.82 3.07 3.07 0 0 1-1.72.04c-.12.08-.22.16-.29.25a.44.44 0 0 0-.1.27c0 .15.06.26.17.33.12.08.28.13.47.16a5 5 0 0 0 .66.06 16.56 16.56 0 0 1 1.5.13c.26.05.48.12.67.22.19.1.34.24.46.41.12.18.18.4.18.69 0 .26-.07.5-.2.75s-.31.46-.56.65c-.24.2-.54.34-.9.46a4.57 4.57 0 0 1-2.36.04c-.33-.09-.6-.2-.82-.36a1.56 1.56 0 0 1-.5-.51c-.1-.2-.16-.4-.16-.6 0-.3.1-.56.28-.77.19-.2.45-.37.77-.5a1.15 1.15 0 0 1-.43-.32.88.88 0 0 1-.15-.54c0-.09.01-.18.04-.27.04-.1.08-.2.15-.28a1.55 1.55 0 0 1 .58-.5c-.3-.16-.53-.39-.7-.66-.17-.28-.25-.6-.25-.97 0-.3.05-.57.16-.8.12-.25.28-.46.48-.63.2-.17.45-.3.73-.4a3 3 0 0 1 2.3.21h1.64Zm4.65.76a.24.24 0 0 1-.23.14.42.42 0 0 1-.2-.07 3.59 3.59 0 0 0-.67-.3 1.8 1.8 0 0 0-1.03 0c-.14.05-.27.11-.37.2a.87.87 0 0 0-.23.27.75.75 0 0 0-.08.35c0 .15.04.28.13.39.1.1.21.19.36.27.15.07.32.14.5.2a13.63 13.63 0 0 1 1.16.4c.2.08.36.18.5.3a1.33 1.33 0 0 1 .5 1.07 2 2 0 0 1-.15.78c-.1.24-.25.44-.45.62-.2.17-.43.3-.72.4a3.1 3.1 0 0 1-2.14-.05 2.97 2.97 0 0 1-.87-.53l.25-.41c.04-.05.07-.1.12-.12a.3.3 0 0 1 .17-.04.4.4 0 0 1 .22.08l.3.19a1.91 1.91 0 0 0 1.03.27c.2 0 .38-.03.54-.08.16-.06.29-.13.4-.22a.96.96 0 0 0 .3-.7c0-.17-.05-.31-.14-.42-.09-.11-.2-.2-.36-.28a2.6 2.6 0 0 0-.5-.2l-.59-.19c-.2-.06-.39-.14-.58-.22a2.14 2.14 0 0 1-.5-.3 1.45 1.45 0 0 1-.36-.46c-.1-.19-.14-.41-.14-.67a1.6 1.6 0 0 1 .57-1.23c.18-.16.4-.3.68-.39.26-.1.57-.14.91-.14a2.84 2.84 0 0 1 1.9.7l-.23.4Z"}),t("defs",{children:t("path",{d:"M0 0h85v38H0z"})})]}),Ys=()=>t("svg",{viewBox:"0 0 15 17",fill:"currentColor",children:t("path",{d:"M6.11767 7.47586C6.47736 7.75563 6.91931 7.90898 7.37503 7.91213H7.42681C7.90756 7.90474 8.38832 7.71987 8.67677 7.46846C10.1856 6.18921 14.5568 2.18138 14.5568 2.18138C15.7254 1.09438 12.4637 0.00739 7.42681 0H7.36764C2.3308 0.00739 -0.930935 1.09438 0.237669 2.18138C0.237669 2.18138 4.60884 6.18921 6.11767 7.47586ZM8.67677 9.64243C8.31803 9.92483 7.87599 10.0808 7.41941 10.0861H7.37503C6.91845 10.0808 6.47641 9.92483 6.11767 9.64243C5.0822 8.75513 1.38409 5.42018 0.000989555 4.14832V6.07829C0.000989555 6.29273 0.0823481 6.57372 0.222877 6.70682L0.293316 6.7712L0.293344 6.77122C1.33784 7.72579 4.83903 10.9255 6.11767 12.0161C6.47641 12.2985 6.91845 12.4545 7.37503 12.4597H7.41941C7.90756 12.4449 8.38092 12.2601 8.67677 12.0161C9.9859 10.9069 13.6249 7.57198 14.5642 6.70682C14.7121 6.57372 14.7861 6.29273 14.7861 6.07829V4.14832C12.7662 5.99804 10.7297 7.82949 8.67677 9.64243ZM7.41941 14.6263C7.87513 14.6232 8.31708 14.4698 8.67677 14.19C10.7298 12.3746 12.7663 10.5407 14.7861 8.68853V10.6259C14.7861 10.8329 14.7121 11.1139 14.5642 11.247C13.6249 12.1196 9.9859 15.4471 8.67677 16.5563C8.38092 16.8077 7.90756 16.9926 7.41941 17H7.37503C6.91931 16.9968 6.47736 16.8435 6.11767 16.5637C4.91427 15.5373 1.74219 12.6364 0.502294 11.5025C0.393358 11.4029 0.299337 11.3169 0.222877 11.247C0.0823481 11.1139 0.000989555 10.8329 0.000989555 10.6259V8.68853C1.38409 9.95303 5.0822 13.2953 6.11767 14.1827C6.47641 14.4651 6.91845 14.6211 7.37503 14.6263H7.41941Z"})}),Ze=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),ot=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),ct=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"})}),Co=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),It=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),Gs=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),Qs=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ao=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})}),de=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})}),ca=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"})}),De=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m7 10 5 5 5-5z"})}),xt=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[t("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),t("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),Ws=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"})}),Ks=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m22 5.72-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39 6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})}),Zs=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"})}),To=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M8 5v14l11-7z"})}),Lo=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),na=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"})}),Js=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"})}),Eo=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})}),Io=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),Mt=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M8.9999 14.7854L18.8928 4.8925C19.0803 4.70497 19.3347 4.59961 19.5999 4.59961C19.8651 4.59961 20.1195 4.70497 20.307 4.8925L21.707 6.2925C22.0975 6.68303 22.0975 7.31619 21.707 7.70672L9.70701 19.7067C9.31648 20.0972 8.68332 20.0972 8.2928 19.7067L2.6928 14.1067C2.50526 13.9192 2.3999 13.6648 2.3999 13.3996C2.3999 13.1344 2.50526 12.88 2.6928 12.6925L4.0928 11.2925C4.48332 10.902 5.11648 10.902 5.50701 11.2925L8.9999 14.7854Z"})}),Je=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),Ft=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})}),Re=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),la=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"})}),Mo=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 5C19.89 4.65 18.67 4.5 17.5 4.5C15.55 4.5 13.45 4.9 12 6C10.55 4.9 8.45 4.5 6.5 4.5C5.33 4.5 4.11 4.65 3 5C2.25 5.25 1.6 5.55 1 6V20.6C1 20.85 1.25 21.1 1.5 21.1C1.6 21.1 1.65 21.1 1.75 21.05C3.15 20.3 4.85 20 6.5 20C8.2 20 10.65 20.65 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5ZM21 18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5C10.65 18.65 8.2 18 6.5 18C5.3 18 4.1 18.15 3 18.5V7C4.1 6.65 5.3 6.5 6.5 6.5C8.2 6.5 10.65 7.15 12 8C13.35 7.15 15.8 6.5 17.5 6.5C18.7 6.5 19.9 6.65 21 7V18.5Z"}),t("path",{d:"M17.5 10.5C18.38 10.5 19.23 10.59 20 10.76V9.24C19.21 9.09 18.36 9 17.5 9C15.8 9 14.26 9.29 13 9.83V11.49C14.13 10.85 15.7 10.5 17.5 10.5ZM13 12.49V14.15C14.13 13.51 15.7 13.16 17.5 13.16C18.38 13.16 19.23 13.25 20 13.42V11.9C19.21 11.75 18.36 11.66 17.5 11.66C15.8 11.66 14.26 11.96 13 12.49ZM17.5 14.33C15.8 14.33 14.26 14.62 13 15.16V16.82C14.13 16.18 15.7 15.83 17.5 15.83C18.38 15.83 19.23 15.92 20 16.09V14.57C19.21 14.41 18.36 14.33 17.5 14.33Z"}),t("path",{d:"M6.5 10.5C5.62 10.5 4.77 10.59 4 10.76V9.24C4.79 9.09 5.64 9 6.5 9C8.2 9 9.74 9.29 11 9.83V11.49C9.87 10.85 8.3 10.5 6.5 10.5ZM11 12.49V14.15C9.87 13.51 8.3 13.16 6.5 13.16C5.62 13.16 4.77 13.25 4 13.42V11.9C4.79 11.75 5.64 11.66 6.5 11.66C8.2 11.66 9.74 11.96 11 12.49ZM6.5 14.33C8.2 14.33 9.74 14.62 11 15.16V16.82C9.87 16.18 8.3 15.83 6.5 15.83C5.62 15.83 4.77 15.92 4 16.09V14.57C4.79 14.41 5.64 14.33 6.5 14.33Z"})]}),Xs=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"})}),da=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 6C9.79 6 8 7.79 8 10H10C10 8.9 10.9 8 12 8C13.1 8 14 8.9 14 10C14 10.8792 13.4202 11.3236 12.7704 11.8217C11.9421 12.4566 11 13.1787 11 15H13C13 13.9046 13.711 13.2833 14.4408 12.6455C15.21 11.9733 16 11.2829 16 10C16 7.79 14.21 6 12 6ZM13 16V18H11V16H13Z"})}),St=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M4 20h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2zm0-3h2v2H4v-2zM2 6c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2zm4 1H4V5h2v2zm-2 7h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2zm0-3h2v2H4v-2z"})}),ei=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),ma=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"})}),ti=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M7 20h4c0 1.1-.9 2-2 2s-2-.9-2-2zm-2-1h8v-2H5v2zm11.5-9.5c0 3.82-2.66 5.86-3.77 6.5H5.27c-1.11-.64-3.77-2.68-3.77-6.5C1.5 5.36 4.86 2 9 2s7.5 3.36 7.5 7.5zm4.87-2.13L20 8l1.37.63L22 10l.63-1.37L24 8l-1.37-.63L22 6l-.63 1.37zM19 6l.94-2.06L22 3l-2.06-.94L19 0l-.94 2.06L16 3l2.06.94L19 6z"})}),oi=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"})}),si=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})}),ii=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),ro=()=>t("svg",{viewBox:"0 0 16 16",fill:qe("color-error"),children:t("path",{d:"M13.5095 4L8.50952 1H7.50952L2.50952 4L2.01953 4.85999V10.86L2.50952 11.71L7.50952 14.71H8.50952L13.5095 11.71L13.9995 10.86V4.85999L13.5095 4ZM7.50952 13.5601L3.00952 10.86V5.69995L7.50952 8.15002V13.5601ZM3.26953 4.69995L8.00952 1.85999L12.7495 4.69995L8.00952 7.29004L3.26953 4.69995ZM13.0095 10.86L8.50952 13.5601V8.15002L13.0095 5.69995V10.86Z"})}),Nt=()=>t("svg",{viewBox:"0 0 16 16",fill:qe("color-primary"),children:t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z"})}),ri=()=>t("svg",{viewBox:"0 0 16 16",fill:qe("color-warning"),children:t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z"})}),ao=()=>t("svg",{viewBox:"0 0 16 16",fill:qe("color-primary"),children:t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z"})}),Fo=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),ai=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15z"})}),ci=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10z"})}),ni=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})}),Pt=()=>t("svg",{viewBox:"0 0 24 24",children:t("path",{fill:"currentColor",d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z",children:t("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})})}),Po=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"})}),Oo=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41z"})}),li=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),di=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M8 12l4-4 4 4m-4-4v12",strokeWidth:"2",stroke:"currentColor",fill:"none"})}),mi=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})}),pi=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})}),ui=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M3 18h13v-2H3zm0-5h10v-2H3zm0-7v2h13V6zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5z"})}),hi=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})}),pa=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),ua=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})}),ha=()=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t("path",{d:"m12.126 8.125 1.937-1.937 3.747 3.747-1.937 1.938zM20.71 5.63l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75L20.71 7a1 1 0 0 0 0-1.37M2 5l6.63 6.63L3 17.25V21h3.75l5.63-5.62L18 21l2-2L4 3z"})}),ga=Object.freeze(Object.defineProperty({__proto__:null,AlarmIcon:Ks,ArrowDownIcon:de,ArrowDropDownIcon:De,ArrowLeftIcon:ca,CalendarIcon:Ws,ChartIcon:na,ClockIcon:xt,CloseIcon:ot,CodeIcon:Eo,CollapseIcon:ci,ContextIcon:ui,CopyIcon:Re,DeleteIcon:Io,DoneIcon:Mt,DownloadIcon:Fo,DragIcon:la,EditIcon:ua,EditOffIcon:ha,ErrorIcon:Gs,ExpandIcon:ai,FilterIcon:Po,FilterOffIcon:Oo,FocusIcon:mi,FunctionIcon:Nt,InfoIcon:Co,IssueIcon:Xs,KeyboardIcon:Zs,LabelIcon:ri,ListIcon:oi,LogoLogsIcon:js,LogoShortIcon:Ys,MetricIcon:ro,MoreIcon:ei,OpenNewIcon:hi,PauseIcon:li,PlayCircleOutlineIcon:Lo,PlayIcon:To,PlusIcon:pa,QuestionIcon:da,RefreshIcon:Ao,RestartIcon:ct,ScrollToTopIcon:di,SearchIcon:ni,SettingsIcon:Ze,SpinnerIcon:Pt,StarBorderIcon:si,StarIcon:ii,StorageIcon:St,SuccessIcon:Qs,TableIcon:Js,TipIcon:ti,TuneIcon:ma,UnfocusIcon:pi,ValueIcon:ao,VisibilityIcon:Je,VisibilityOffIcon:Ft,WarningIcon:It,WikiIcon:Mo},Symbol.toStringTag,{value:"Module"})),gi={windows:"Windows",mac:"Mac OS",linux:"Linux"},fa=()=>Object.values(gi).find(e=>navigator.userAgent.indexOf(e)>=0)||"unknown",Ot=()=>fa()===gi.mac,va=()=>["Android","webOS","iPhone","iPad","iPod","BlackBerry","Windows Phone"].map(s=>navigator.userAgent.match(new RegExp(s,"i"))).some(s=>s),gt=()=>{const[e,o]=N({width:0,height:0}),s=()=>{o({width:window.innerWidth,height:window.innerHeight})};return te("resize",s),T(s,[]),e};function U(){const e=gt(),o=()=>{const r=va(),a=window.innerWidth<500;return r||a},[s,i]=N(o());return T(()=>{i(o())},[e]),{isMobile:s}}const _a={success:t(Qs,{}),error:t(Gs,{}),warning:t(It,{}),info:t(Co,{})},Ee=({variant:e,children:o})=>{const{isDarkTheme:s}=se(),{isMobile:i}=U();return t("div",{className:M({"vm-alert":!0,[`vm-alert_${e}`]:e,"vm-alert_dark":s,"vm-alert_mobile":i}),children:[t("div",{className:"vm-alert__icon",children:_a[e||"info"]}),t("div",{className:"vm-alert__content",children:o})]})},fi=Xe({showInfoMessage:()=>{}}),vi=()=>ye(fi),ya=({children:e})=>{const{isMobile:o}=U(),[s,i]=N({text:"",type:"info"}),[r,a]=N(!1),[c,n]=N(null);T(()=>{if(!c)return;i({...c,key:Date.now()}),a(!0);const m=setTimeout(l,c.timeout||4e3);return()=>clearTimeout(m)},[c]);const l=()=>{n(null),a(!1)};return t(fi.Provider,{value:{showInfoMessage:n},children:[r&&t("div",{className:M({"vm-snackbar":!0,"vm-snackbar_mobile":o}),children:t(Ee,{variant:s.type,children:t("div",{className:"vm-snackbar-content",children:[t("span",{children:s.text}),t("div",{className:"vm-snackbar-content__close",onClick:l,children:t(ot,{})})]})})}),e]})},ba=(...e)=>e.reduce((o,s)=>({children:i})=>t(o,{children:t(s,{children:i})}),({children:o})=>t(V,{children:o})),wa=[br,Hr,Zr,ya,ea,aa],ka=ba(...wa),_i=e=>{if(e.length!=7)return"0, 0, 0";const o=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`${o}, ${s}, ${i}`},qa={[fe.yhatUpper]:"#7126a1",[fe.yhatLower]:"#7126a1",[fe.yhat]:"#da42a6",[fe.anomaly]:"#da4242",[fe.anomalyScore]:"#7126a1",[fe.actual]:"#203ea9",[fe.training]:`rgba(${_i("#203ea9")}, 0.2)`},xa=e=>{let i=1,r=0,a=1;if(e.length>0)for(let n=0;n<e.length;n++)e[n].charCodeAt(0)>r&&(r=e[n].charCodeAt(0)),a=parseInt(String(16777215/r)),i=(i+e[n].charCodeAt(0)*a*49979693)%16777215;let c=(i*e.length%16777215).toString(16);return c=c.padEnd(6,c),`#${c}`},Sa=e=>{let o=e.replace("#","").trim();if(o.length===3&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),o.length!==6)throw new Error("Invalid HEX color.");const s=parseInt(o.slice(0,2),16),i=parseInt(o.slice(2,4),16),r=parseInt(o.slice(4,6),16);return(s*299+i*587+r*114)/1e3>=128?"#000000":"#FFFFFF"},Do=()=>{const e=document.getElementById("root")?.dataset.params||"{}";try{return JSON.parse(e)}catch(o){return console.error(o),{}}},ze=()=>!!Object.keys(Do()).length,Ut={"color-primary":"#589DF6","color-secondary":"#316eca","color-error":"#e5534b","color-warning":"#c69026","color-info":"#539bf5","color-success":"#57ab5a","color-background-body":"#22272e","color-background-block":"#2d333b","color-background-tooltip":"rgba(22, 22, 22, 0.8)","color-text":"#cdd9e5","color-text-secondary":"#768390","color-text-disabled":"#636e7b","box-shadow":"rgba(0, 0, 0, 0.16) 1px 2px 6px","box-shadow-popper":"rgba(0, 0, 0, 0.2) 0px 2px 8px 0px","border-divider":"1px solid rgba(99, 110, 123, 0.5)","color-hover-black":"rgba(0, 0, 0, 0.2)","color-log-hits-bar-0":"rgba(255, 255, 255, 0.18)","color-log-hits-bar-1":"#FFB74D","color-log-hits-bar-2":"#81C784","color-log-hits-bar-3":"#64B5F6","color-log-hits-bar-4":"#E57373","color-log-hits-bar-5":"#8a62f0"},jt={"color-primary":"#3F51B5","color-secondary":"#E91E63","color-error":"#FD080E","color-warning":"#FF8308","color-info":"#03A9F4","color-success":"#4CAF50","color-background-body":"#FEFEFF","color-background-block":"#FFFFFF","color-background-tooltip":"rgba(80,80,80,0.9)","color-text":"#110f0f","color-text-secondary":"#706F6F","color-text-disabled":"#A09F9F","box-shadow":"rgba(0, 0, 0, 0.08) 1px 2px 6px","box-shadow-popper":"rgba(0, 0, 0, 0.1) 0px 2px 8px 0px","border-divider":"1px solid rgba(0, 0, 0, 0.15)","color-hover-black":"rgba(0, 0, 0, 0.06)","color-log-hits-bar-0":"rgba(0, 0, 0, 0.18)","color-log-hits-bar-1":"#FFB74D","color-log-hits-bar-2":"#81C784","color-log-hits-bar-3":"#64B5F6","color-log-hits-bar-4":"#E57373","color-log-hits-bar-5":"#8a62f0"},Na=()=>{const[e,o]=N(kt()),s=(i=>{o(i.matches)});return T(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)");return i.addEventListener("change",s),()=>i.removeEventListener("change",s)},[]),e},Yt=["primary","secondary","error","warning","info","success"],Ca=({onLoaded:e})=>{const o=ze(),{palette:s={}}=Do(),{theme:i}=se(),r=Na(),a=Os(),c=gt(),[n,l]=N({[pe.dark]:Ut,[pe.light]:jt,[pe.system]:kt()?Ut:jt}),m=()=>{const{innerWidth:g,innerHeight:f}=window,{clientWidth:v,clientHeight:_}=document.documentElement;Ye("scrollbar-width",`${g-v}px`),Ye("scrollbar-height",`${f-_}px`),Ye("vh",`${f*.01}px`)},d=()=>{Yt.forEach((g,f)=>{const v=qe(`color-${g}`),_=Sa(v);Ye(`${g}-text`,_),f===Yt.length-1&&(a({type:"SET_DARK_THEME"}),e(!0))})},u=()=>{Yt.forEach(g=>{const f=s[g];f&&Ye(`color-${g}`,f)}),d()},h=()=>{const g=he("THEME")||pe.system,f=n[g];Object.entries(f).forEach(([v,_])=>{Ye(v,_)}),d(),o&&u()},p=()=>{const g=kt()?Ut:jt;if(n[pe.system]===g){h();return}l(f=>({...f,[pe.system]:g}))};return T(()=>{m(),h()},[n]),T(m,[c]),T(p,[i,r]),T(()=>{o&&a({type:"SET_THEME",payload:pe.light})},[]),null},Aa=({to:e,isNavLink:o,children:s,...i})=>o?t(As,{to:e,...i,children:s}):t("div",{...i,children:s}),Ta=({activeItem:e,item:o,color:s=qe("color-primary"),activeNavRef:i,onChange:r,isNavLink:a})=>{const c=n=>()=>{r&&r(n)};return t(Aa,{className:M({"vm-tabs-item":!0,"vm-tabs-item_active":e===o.value,[o.className||""]:o.className}),isNavLink:a,to:o.value,style:{color:s},onClick:c(o.value),ref:e===o.value?i:void 0,children:[o.icon&&t("div",{className:M({"vm-tabs-item__icon":!0,"vm-tabs-item__icon_single":!o.label}),children:o.icon}),o.label]})},yi=({activeItem:e,items:o,color:s=qe("color-primary"),onChange:i,indicatorPlacement:r="bottom",isNavLink:a})=>{const c=gt(),n=D(null),[l,m]=N({left:0,width:0,bottom:0});return T(()=>{if(n.current?.base instanceof HTMLElement){const{offsetLeft:d,offsetWidth:u,offsetHeight:h}=n.current.base;m({left:d,width:u,bottom:r==="top"?h-2:0})}},[c,e,n,o]),t("div",{className:"vm-tabs",children:[o.map(d=>t(Ta,{activeItem:e,item:d,onChange:i,color:s,activeNavRef:n,isNavLink:a},d.value)),t("div",{className:"vm-tabs__indicator",style:{...l,borderColor:s}})]})},ne=(e,o)=>{const[s]=X(),i=s.get(o)?s.get(o):e,[r,a]=N(i);return T(()=>{i!==r&&a(i)},[i]),[r,a]},Dt=()=>{const e=At(),[o,s]=X();return{setSearchParamsFromKeys:O(r=>{const a=!!Array.from(o.values()).length;let c=!1;Object.entries(r).forEach(([n,l])=>{o.get(n)!==`${l}`&&(o.set(n,`${l}`),c=!0)}),c&&(a?s(o):e(`?${o.toString()}`,{replace:!0}))},[o,e])}},Ro=()=>t("div",{className:"vm-line-loader",children:[t("div",{className:"vm-line-loader__background"}),t("div",{className:"vm-line-loader__line"})]}),bi=({defaultExpanded:e=!1,onChange:o,title:s,children:i})=>{const[r,a]=N(e),c=()=>{const n=window.getSelection();n&&n.toString()||a(l=>{const m=!l;return o&&o(m),m})};return T(()=>{a(e)},[e]),t(V,{children:[t("header",{className:`vm-accordion-header ${r&&"vm-accordion-header_open"}`,onClick:c,children:[s,t("div",{className:`vm-accordion-header__arrow ${r&&"vm-accordion-header__arrow_open"}`,children:t(de,{})})]}),r&&t("section",{className:"vm-accordion-section",children:i},"content")]})},wi=(e,o)=>e.length===o.length&&e.every((s,i)=>s===o[i]);function ki(e,o){const s=e.reduce((i,r)=>{const a=o.map(c=>`${String(c)}: ${r[c]||"-"}`).join("|");return(i[a]=i[a]||[]).push(r),i},{});return Object.entries(s).map(([i,r])=>({keys:i.split("|"),values:r}))}const La=e=>e.length<2?!1:e.every((o,s)=>s===0||o<e[s-1]),j=({children:e,title:o,open:s,placement:i="bottom-center",offset:r={top:6,left:0}})=>{const{isMobile:a}=U(),[c,n]=N(!1),[l,m]=N({width:0,height:0}),d=D(null),u=D(null),h=()=>n(!1);T(()=>{if(!(!u.current||!c))return m({width:u.current.clientWidth,height:u.current.clientHeight}),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[c,o]);const p=E(()=>{const v=d?.current?.base;if(!v||!c)return{};const _=v.getBoundingClientRect(),b={top:0,left:0},y=i==="bottom-right"||i==="top-right",w=i==="bottom-left"||i==="top-left",k=i?.includes("top"),S=r?.top||0,q=r?.left||0;b.left=_.left-(l.width-_.width)/2+q,b.top=_.height+_.top+S,y&&(b.left=_.right-l.width),w&&(b.left=_.left+q),k&&(b.top=_.top-l.height-S);const{innerWidth:x,innerHeight:C}=window,A=20,L=b.top+l.height+A>C,I=b.top-A<0,z=b.left+l.width+A>x,B=b.left-A<0;return L&&(b.top=_.top-l.height-S),I&&(b.top=_.height+_.top+S),z&&(b.left=_.right-l.width-q),B&&(b.left=_.left+q),b.top<0&&(b.top=20),b.left<0&&(b.left=20),b},[d,i,c,l]),g=()=>{typeof s!="boolean"&&n(!0)},f=()=>{n(!1)};return T(()=>{typeof s=="boolean"&&n(s)},[s]),T(()=>{const v=d?.current?.base;if(v)return v.addEventListener("mouseenter",g),v.addEventListener("mouseleave",f),()=>{v.removeEventListener("mouseenter",g),v.removeEventListener("mouseleave",f)}},[d]),t(V,{children:[t(V,{ref:d,children:e}),!a&&c&&Ue(t("div",{className:"vm-tooltip",ref:u,style:p,children:o}),document.body)]})},Z=e=>{const[o,s]=N(!1),i=O(()=>s(!0),[]),r=O(()=>s(!1),[]),a=O(()=>s(c=>!c),[]);return{value:o,setValue:s,setTrue:i,setFalse:r,toggle:a}},Ea=()=>{const e={0:"#000000",1:"#AA0000",2:"#00AA00",3:"#AA5500",4:"#0000AA",5:"#AA00AA",6:"#00AAAA",7:"#AAAAAA",8:"#555555",9:"#FF5555",10:"#55FF55",11:"#FFFF55",12:"#5555FF",13:"#FF55FF",14:"#55FFFF",15:"#FFFFFF"};for(let o=0;o<6;o++)for(let s=0;s<6;s++)for(let i=0;i<6;i++){const r=16+o*36+s*6+i,a=o>0?o*40+55:0,c=s>0?s*40+55:0,n=i>0?i*40+55:0;e[r]=`rgb(${a},${c},${n})`}for(let o=0;o<24;o++){const s=232+o,i=8+o*10;e[s]=`rgb(${i},${i},${i})`}return e},Ia=Ea(),rt=e=>Ia[e]||null,Ma="(?:\\u0007|\\u001B\\u005C|\\u009C)",Fa=[`[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?${Ma})`,"(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),os=new RegExp(Fa,"g"),Pa=(e,o,s)=>{switch(o){case 0:return{color:null,fontWeight:null,fontStyle:null,textDecoration:null,backgroundColor:null};case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:return{...e,color:rt(o-30)};case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:return{...e,color:rt(8+(o-90))};case 38:return s.length>2&&s[1]===5?{...e,color:rt(s[2])}:e;case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:return{...e,backgroundColor:rt(o-40)};case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:return{...e,backgroundColor:rt(8+(o-100))};case 1:return{...e,fontWeight:"bold"};case 3:return{...e,fontStyle:"italic"};case 4:return{...e,textDecoration:"underline"};case 7:case 27:return{...e,color:e.backgroundColor,backgroundColor:e.color};case 22:return{...e,fontWeight:null};case 23:return{...e,fontStyle:null};case 24:return{...e,textDecoration:null};default:return e}},Oa=e=>{let o=0;const s=[];let i={color:null,fontWeight:null,fontStyle:null,textDecoration:null,backgroundColor:null},r;for(;(r=os.exec(e))!==null;){const a=e.slice(o,r.index);a&&s.push(t("span",{style:{color:i.color||"inherit",fontWeight:i.fontWeight||"inherit",fontStyle:i.fontStyle||"inherit",textDecoration:i.textDecoration||"inherit",backgroundColor:i.backgroundColor||"inherit"},children:a},o));const c=r[0].match(/\d+/g)?.map(Number)||[];c.forEach(n=>{i=Pa(i,n,c)}),o=os.lastIndex}return o<e.length&&s.push(t("span",{style:{color:i.color||"inherit",fontWeight:i.fontWeight||"inherit",fontStyle:i.fontStyle||"inherit",textDecoration:i.textDecoration||"inherit",backgroundColor:i.backgroundColor||"inherit"},children:e.slice(o)},o)),s},R=({variant:e="contained",color:o="primary",size:s="medium",ariaLabel:i,children:r,endIcon:a,startIcon:c,fullWidth:n=!1,className:l,disabled:m,onClick:d,onMouseDown:u,"data-id":h})=>{const p=M({"vm-button":!0,[`vm-button_${e}_${o}`]:!0,[`vm-button_${s}`]:s,"vm-button_icon_only":(c||a)&&!r,"vm-button_full-width":n,"vm-button_with-icons":c||a,[l||""]:l});return t("button",{className:p,disabled:m,"aria-label":i,onClick:d,onMouseDown:u,"data-id":h,children:[c,r,a]})},Ie=()=>{const{showInfoMessage:e}=vi();return async(o,s)=>{if(!navigator?.clipboard)return e({text:t(Da,{}),type:"error",timeout:2e4}),!1;try{return await navigator.clipboard.writeText(o),s&&e({text:s,type:"success"}),!0}catch(i){return i instanceof Error&&e({text:`${i.name}: ${i.message}`,type:"error"}),console.warn("Copy failed",i),!1}}},Da=()=>t("div",{className:"vm-snackbar-details",children:[t("p",{className:"vm-snackbar-details__title",children:"Clipboard not supported"}),window.isSecureContext?t("p",{className:"vm-snackbar-details__msg",children:[t("p",{children:"Common reasons:"}),t("ul",{children:[t("li",{children:"Browser restrictions"}),t("li",{children:"Insecure connection (HTTP)"}),t("li",{children:"Permissions not granted"})]}),t("p",{children:["For detailed information, visit the ",t("a",{className:"vm-link vm-link_underlined vm-link_colored",href:"https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API#security_considerations",target:"_blank",rel:"noopener noreferrer",children:"Clipboard API documentation"})]})]}):t("p",{className:"vm-snackbar-details__msg",children:[t("p",{children:"This page is not running in a secure context (HTTPS)."}),t("p",{children:"Clipboard operations require a secure context."}),t("a",{className:"vm-link vm-link_underlined vm-link_colored",href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener noreferrer",children:"Learn more about secure contexts"})]})]}),Ra=({field:e,value:o,hideGroupButton:s})=>{const{isMobile:i}=U(),r=Ie(),[a,c]=X(),[n,l]=N(!1),m=a.get(ee.GROUP_BY)||_e,d=a.get(ee.DISPLAY_FIELDS)||"",u=d?d.split(","):[],h=u.includes(e),p=m===e,g=O(async()=>{if(!n)try{await r(`${e}: ${JSON.stringify(o)}`),l(!0)}catch(_){console.error(_)}},[n,r]),f=()=>{const _=u,b=_.includes(e)?_.filter(y=>y!==e):[..._,e];a.set(ee.DISPLAY_FIELDS,b.join(",")),c(a)},v=()=>{p?a.delete(ee.GROUP_BY):a.set(ee.GROUP_BY,e),c(a)};return T(()=>{if(n===null)return;const _=setTimeout(()=>l(!1),2e3);return()=>clearTimeout(_)},[n]),t("tr",{className:M({"vm-group-logs-row-fields-item":!0,"vm-group-logs-row-fields-item_mobile":i}),children:[t("td",{className:"vm-group-logs-row-fields-item-controls",children:t("div",{className:"vm-group-logs-row-fields-item-controls__wrapper",children:[t(j,{title:n?"Copied":"Copy to clipboard",children:t(R,{className:"vm-group-logs-row-fields-item-controls__button",variant:"text",color:"gray",size:"small",startIcon:t(Re,{}),onClick:g,ariaLabel:"copy to clipboard"})}),t(j,{title:h?"Hide this field":"Show this field instead of the message",children:t(R,{className:"vm-group-logs-row-fields-item-controls__button",variant:"text",color:h?"secondary":"gray",size:"small",startIcon:h?t(Je,{}):t(Je,{}),onClick:f,ariaLabel:h?"Hide this field":"Show this field instead of the message"})}),!s&&t(j,{title:p?"Ungroup this field":"Group by this field",children:t(R,{className:"vm-group-logs-row-fields-item-controls__button",variant:"text",color:p?"secondary":"gray",size:"small",startIcon:t(St,{}),onClick:v,ariaLabel:p?"Ungroup this field":"Group by this field"})})]})}),t("td",{className:"vm-group-logs-row-fields-item__key",children:e}),t("td",{className:"vm-group-logs-row-fields-item__value",children:o})]})},za=et(Ra),Ha=({log:e,hideGroupButton:o})=>{const{isMobile:s}=U(),i=E(()=>Object.entries(e).sort(([a],[c])=>a.localeCompare(c)),[e]),[r]=ut("LOGS_DISABLED_HOVERS");return t("div",{className:M({"vm-group-logs-row-fields":!0,"vm-group-logs-row-fields_mobile":s,"vm-group-logs-row-fields_interactive":!r}),children:t("table",{children:t("tbody",{children:i.map(([a,c])=>t(za,{field:a,value:c,hideGroupButton:o},a))})})})},xe=({title:e,children:o,onClose:s,className:i,isOpen:r=!0})=>{const{isMobile:a}=U(),c=At(),n=je(),l=O(h=>{r&&h.key==="Escape"&&s()},[r]),m=h=>{h.stopPropagation()},d=O(()=>{r&&(c(n,{replace:!0}),s())},[r,n,s]);return T(()=>{if(r)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}},[r]),te("popstate",d),te("keyup",l),Ue(t("div",{className:M({"vm-modal":!0,"vm-modal_mobile":a,[`${i}`]:i}),onMouseDown:s,children:t("div",{className:"vm-modal-content",onMouseDown:m,children:[t("div",{className:"vm-modal-content-header",children:[e&&t("div",{className:"vm-modal-content-header__title",children:e}),t("div",{className:"vm-modal-content-header__close",children:t(R,{variant:"text",size:"small",onClick:s,ariaLabel:"close",children:t(ot,{})})})]}),t("div",{className:"vm-modal-content-body",tabIndex:0,children:o})]})}),document.body)},Va=e=>`${e}/select/logsql/query`,Ba=e=>`${e}/select/logsql/hits`,$a=e=>`${e}/select/logsql/stats_query_range`,st=()=>{const[e]=X(),o=e.get("accountID")||"0",s=e.get("projectID")||"0";return E(()=>({AccountID:o,ProjectID:s}),[o,s])};let Ae="",zo=!1;const ss=e=>{Ae=e,zo=!0},Ho=(e,o)=>{const{serverUrl:s}=se(),i=st(),[r,a]=X(),[c,n]=N([]),[l,m]=N({}),[d,u]=N(),[h,p]=N({}),[g,f]=N(),v=D(new AbortController),_=E(()=>r.get("hide_logs"),[r]),b=E(()=>Va(s),[s]),y=({period:q,query:x,limit:C})=>{if(!x)throw new Error("query is required to /select/logsql/query.");const A=x.trim();let L=A;Ae&&Ae!=="__all__"&&(L=`{stream="${Ae}"} | ${A}`);const I=new URLSearchParams({query:L});return C&&I.set("limit",String(C)),q&&(I.set("start",F(q.start*1e3).tz().toISOString()),I.set("end",F(q.end*1e3).tz().toISOString())),I},w=({signal:q})=>({signal:q,method:"POST",headers:{...i,Accept:"application/stream+json"}}),k=({accountId:q,projectId:x})=>{q&&r.set("accountID",q),x&&r.set("projectID",x),a(r)},S=O(async({query:q=e,limit:x=o,period:C,extraParams:A,beforeFetch:L,isDownload:I=!1})=>{if(v.current=new AbortController,zo&&!Ae)return f("Select a stream"),!1;const{signal:z}=v.current,B=w({signal:z});let $=y({query:q,limit:x,period:C});const K={...Object.fromEntries($),...B.headers};if(m(K),L){const P=await L(new URLSearchParams($));if(P.action==="abort")return!1;P.action==="modify"&&($=Wo($,P.body,"overwrite"))}const Q=A?Wo($,A,"append"):$,J={...Object.fromEntries(Q),...B.headers},G=Date.now();p(P=>({...P,[G]:!0})),f(void 0);try{const P=await fetch(b,{body:Q,...B});if(I)return P;const H=B.headers?.AccountID,W=P.headers.get("AccountID");W&&W!==H&&k({accountId:W});const be=B.headers?.ProjectID,me=P.headers.get("ProjectID");me&&me!==be&&k({projectId:me});const ie=P.headers.get("vl-request-duration-seconds");u(ie?Number(ie)*1e3:void 0);const He=await P.text();if(!P.ok||!P.body)return f(He),n([]),!1;const Ht=He.split(`
`).map(Ua).filter(Vt=>Vt);return n(Ht),m(J),Ht}catch(P){return P instanceof Error&&P.name!=="AbortError"&&(f(String(P)),console.error(P),n([])),!1}finally{p(P=>{const{[G]:H,...W}=P;return W})}},[b,e,o,i]);return T(()=>()=>v.current.abort(),[]),T(()=>{_&&(n([]),f(void 0))},[_]),{logs:c,queryParams:l,isLoading:Object.values(h).some(q=>q),error:g,fetchLogs:S,durationMs:d,abortController:v.current}},Ua=e=>{try{return e&&JSON.parse(e)}catch(o){return console.error(`Failed to parse "${e}" to JSON
`,o),null}},ja=(e,o,s="")=>{const i=o[0],r=o[o.length-1];return s?o.map(a=>`${is(a,i,r)} ${s}`):o.map(a=>is(a,i,r))},is=(e,o,s)=>{if(e==null)return"";s=s||0,o=o||0;const i=Math.abs(s-o);if(isNaN(i)||i==0)return Math.abs(e)>=1e3?e.toLocaleString("en-US"):e.toString();let r=3+Math.floor(1+Math.log10(Math.max(Math.abs(o),Math.abs(s)))-Math.log10(i));return(isNaN(r)||r>20)&&(r=20),e.toLocaleString("en-US",{minimumSignificantDigits:1,maximumSignificantDigits:r})},Ya=(e,o)=>{const s=document.createElement("span");s.innerText=e,s.style.cssText=`position: absolute; z-index: -1; pointer-events: none; opacity: 0; font: ${o}`,document.body.appendChild(s);const i=s.offsetWidth;return s.remove(),i},Ga=[[3600*24*365,"{YYYY}",null,null,null,null,null,null,1],[3600*24*28,"{MMM}",`
{YYYY}`,null,null,null,null,null,1],[3600*24,"{MM}-{DD}",`
{YYYY}`,null,null,null,null,null,1],[3600,"{HH}:{mm}",`
{YYYY}-{MM}-{DD}`,null,`
{MM}-{DD}`,null,null,null,1],[60,"{HH}:{mm}",`
{YYYY}-{MM}-{DD}`,null,`
{MM}-{DD}`,null,null,null,1],[1,"{HH}:{mm}:{ss}",`
{YYYY}-{MM}-{DD}`,null,`
{MM}-{DD} {HH}:{mm}`,null,null,null,1],[.001,":{ss}.{fff}",`
{YYYY}-{MM}-{DD} {HH}:{mm}`,null,`
{MM}-{DD} {HH}:{mm}`,null,`
{HH}:{mm}`,null,1]],Qa=(e,o)=>Array.from(new Set(e.map(s=>s.scale))).map(s=>{const i="10px Arial",r=qe("color-text"),a={scale:s,show:!0,size:Ka,stroke:r,font:i,values:(c,n)=>ja(c,n,o)};return s?!(Number(s)%2)&&s!=="y"?{...a,side:1}:a:{space:80,values:Ga,stroke:r,font:i}}),Wa=(e,o)=>{if(e==null||o==null)return[-1,1];const i=.02*(Math.abs(o-e)||Math.abs(e)||1);return[e-i,o+i]},Ka=(e,o,s,i)=>{const r=e.axes[s];if(i>1)return r._size||60;let a=6+(r?.ticks?.size||0)+(r.gap||0);const c=(o??[]).reduce((n,l)=>l?.length>n.length?l:n,"");return c!=""&&(a+=Ya(c,"10px Arial")),Math.ceil(a)},Za=e=>{Object.keys(e.hooks).forEach(o=>{e.hooks[o]=[]})},qi=e=>{for(let o=e.series.length-1;o>=0;o--)o&&e.delSeries(o)},Ja=(e,o,s=!1)=>{o.forEach((i,r)=>{i.label&&(i.spanGaps=s),r&&e.addSeries(i)})},Xa=e=>{qi(e),Za(e),e.setData([])},ec=e=>o=>{const s=o.posToVal(o.select.left,"x"),i=o.posToVal(o.select.left+o.select.width,"x");e({min:s,max:i})},tc=(e,o)=>{if(e.delBand(),o.length<2)return;const s=o.map((c,n)=>({...c,index:n})),i=s.filter(c=>c.forecast===fe.yhatUpper),r=s.filter(c=>c.forecast===fe.yhatLower),a=i.map(c=>{const n=r.find(l=>l.forecastGroup===c.forecastGroup);return n?{series:[c.index,n.index],fill:oc(fe.yhatUpper)}:null}).filter(c=>c!==null);a.length&&a.forEach(c=>{e.addBand(c)})};function oc(e){return`rgba(${_i(qa[e])}, 0.05)`}var Te=(e=>(e.BAR="Bars",e.LINE="Lines",e.LINE_STEPPED="Stepped lines",e.POINTS="Points",e))(Te||{}),ce=(e=>(e.hits="hits",e.stats="stats",e))(ce||{});const sc=(e,o,s,i)=>{const r=e.under.clientWidth/Fs-1,a=Tt?.paths?.bars?.({size:[.96,r]});return a?a(e,o,s,i):null},ic=(e,o,s,i)=>{const r=Tt?.paths?.stepped?.({align:1});return r?r(e,o,s,i):null},rc=e=>{switch(e){case Te.BAR:return sc;case Te.LINE_STEPPED:return ic;default:return}},ac=["color-log-hits-bar-1","color-log-hits-bar-2","color-log-hits-bar-3","color-log-hits-bar-4","color-log-hits-bar-5"],cc={[Te.BAR]:1,[Te.LINE_STEPPED]:2,[Te.LINE]:1.2,[Te.POINTS]:0},co="other fields",xi=e=>e?._isOther?co:Object.values(e?.fields||{}).map(s=>s||'""').join(", "),nc=(e,o=0,s=1)=>{const i=e.series.filter(({scale:l})=>l==="y");let r=1/0,a=-1/0;for(const l of i){const m=Number.isFinite(l.min)?l.min:o,d=Number.isFinite(l.max)?l.max:s;m<r&&(r=m),d>a&&(a=d)}let c=Number.isFinite(r)?r:o,n=Number.isFinite(a)?a:s;return c>=0&&(c=0),n<=0&&(n=0),Wa(c,n)},lc=({data:e,logHits:o,xRange:s,bands:i,containerSize:r,onReadyChart:a,setPlotScale:c,graphOptions:n,timezone:l})=>{const{isDarkTheme:m}=se(),[d,u]=N(-1),h=f=>{const v=f.cursor.idx??-1;u(v)},p=E(()=>{let f=0;return e.map((v,_)=>{if(_===0)return{};const b=o?.[_-1],y=xi(b),w=b?._isOther,k=w?"color-log-hits-bar-0":ac[f],S=f>=5?xa(y):qe(k);return w||(f+=1),{label:y,width:cc[n.graphStyle],spanGaps:!0,show:!0,stroke:S,fill:n.fill&&!w?`${S}80`:n.fill?S:"",paths:rc(n.graphStyle)}})},[m,e,n]);return{options:{series:p,bands:i,width:r.width||window.innerWidth/2,height:r.height||200,cursor:{points:{width:(f,v,_)=>_/4,size:(f,v)=>(f.series?.[v]?.points?.size||1)*1.5,stroke:(f,v)=>`${p?.[v]?.stroke||"#ffffff"}`,fill:()=>"#ffffff"}},scales:{x:{time:!0,range:()=>[s.min,s.max]},y:{range:nc}},hooks:{drawSeries:[],ready:[a],setCursor:[h],setSelect:[ec(c)],destroy:[Xa]},legend:{show:!1},axes:Qa([{},{scale:"y"}]),tzDate:f=>Tt.tzDate(new Date(Math.round(f*1e3)),l)},series:p,focusDataIdx:d}},Si=e=>(/^{.+}$/.test(e)?e.slice(1,-1).split(","):[e]).filter(Boolean),Ni=e=>{const o=F(e.start*1e3),s=F(e.end*1e3),i=Math.max(1,s.diff(o,"ms"));let r=Math.min(Fs,i);for(;r>1&&i%r!==0;)r--;const a=Math.max(1,Math.floor(i/r)),c=(o.valueOf()%a+a)%a;return{start:o,end:s,step:a,offset:c}},Ci=(e,o=_e)=>/(.+)?=(".+")/.test(e)?e.replace(/=/,": "):`${o}: ${JSON.stringify(e)}`,dc=e=>e.reduce((o,s)=>o+(s.total||0),0),Ai=e=>(o,s)=>{if(o.label===co)return 1;if(s.label===co)return-1;const i=o[e];return s[e]-i},mc=(e,o)=>e._time!==o._time?!1:[...new Set([...Object.keys(e),...Object.keys(o)])].every(i=>e[i]===o[i]),pc=(e,o)=>e.filter(s=>!mc(s,o)),uc=(e,o,s)=>{const{_stream_id:i,_time:r}=e;if(!i||!r)throw new Error("Log must contain _stream_id and _time fields.");return`_stream_id:${i} _time:${Bs(r)} | stream_context ${o} ${s} | sort by (_time) desc`},hc=(e,o)=>(s,i)=>{const r=e==="after"?pc(s,i):s;o(a=>e==="after"?r.concat(a):a.concat(r))},gc=()=>{const{fetchLogs:e,isLoading:o,error:s,abortController:i}=Ho(),[r,a]=N([]),[c,n]=N([]),[l,m]=N({before:!0,after:!0}),d=async(p,g,f,v)=>{if(!(g<=0))try{const _=await e({query:uc(v,p,g)});Array.isArray(_)&&_.length&&(hc(p,f)(_,v),m(b=>({...b,[p]:_.length>=g})))}catch(_){console.error(`Error fetching ${p} logs:`,_)}};return{logsBefore:r,logsAfter:c,hasMore:l,isLoading:o,error:s,fetchContextLogs:async({log:p,linesBefore:g=0,linesAfter:f=0})=>{await Promise.allSettled([d("before",g,a,p),d("after",f,n,p)])},resetContextLogs:()=>{a([]),n([]),m({before:!0,after:!0})},abortController:i}},ft=(e,o,s)=>{const i=O(r=>{const a=e?.current,c=r.target,n=s?.current&&s.current.contains(c);!a||a.contains(r?.target||null)||n||o(r)},[e,o]);te("mouseup",i),te("touchstart",i)},Se=({children:e,buttonRef:o,placement:s="bottom-left",placementPosition:i,open:r=!1,onClose:a,offset:c={top:6,left:0},clickOutside:n=!0,fullWidth:l,title:m,disabledFullScreen:d,variant:u})=>{const{isMobile:h}=U(),p=At(),g=je(),[f,v]=N({width:0,height:0}),[_,b]=N(!1),y=D(null);T(()=>(b(r),!r&&a&&a(),r&&h&&!d&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[r]),T(()=>{v({width:y?.current?.clientWidth||0,height:y?.current?.clientHeight||0}),b(!1)},[y]);const w=E(()=>{const C=o.current;if(!C||!_)return{};const A=C.getBoundingClientRect(),L={top:0,left:0,width:"auto"},I=s==="bottom-right"||s==="top-right",z=s?.includes("top"),B=c?.top||0,$=c?.left||0;if(L.left=L.left=A.left+$,L.top=A.height+A.top+B,I&&(L.left=A.right-f.width),z&&(L.top=A.top-f.height-B),s==="fixed"&&i)return L.top=Math.max(i.top+c.top,0),L.left=Math.max(i.left+c.left,0),L;const{innerWidth:K,innerHeight:Q}=window,J=L.top+f.height>Q,G=L.top<0,P=L.left+f.width>K,H=L.left<0;return J&&(L.top=A.top-f.height-B),G&&(L.top=A.height+A.top+B),P&&(L.left=A.right-f.width-$),H&&(L.left=A.left+$),l&&(L.width=`${A.width}px`),L.top<0&&(L.top=0),L.left<0&&(L.left=0),L},[o,s,_,e,l]),k=C=>{C.stopPropagation(),a()},S=()=>{b(!1),a()},q=()=>{n&&S()};T(()=>{if(!y.current||!_||h&&!d)return;const{right:C,width:A}=y.current.getBoundingClientRect();if(C>window.innerWidth){const L=window.innerWidth-A;y.current.style.left=`${L}px`}},[_,y,i]);const x=O(()=>{_&&h&&!d&&(p(g,{replace:!0}),a())},[_,h,d,g,a]);return te("scroll",S),te("popstate",x),ft(y,q,o),t(V,{children:(_||!f.width)&&Ue(t("div",{className:M({"vm-popper":!0,[`vm-popper_${u}`]:u,"vm-popper_mobile":h&&!d,"vm-popper_open":(h||Object.keys(w).length)&&_}),ref:y,style:h&&!d?{}:w,children:[(m||h&&!d)&&t("div",{className:"vm-popper-header",children:[t("p",{className:"vm-popper-header__title",children:m}),t(R,{variant:"text",color:u==="dark"?"white":"primary",size:"small",onClick:k,ariaLabel:"close",children:t(ot,{})})]}),e]}),document.body)})},fc=({error:e,warning:o,info:s})=>{const i=D(null),[r,a]=N(!1),[c,n]=N(!1),m=`${E(()=>e?"ERROR: ":o?"WARNING: ":"",[e,o])}${e||o||s}`,d=()=>{const h=i.current;if(h){const{offsetWidth:p,scrollWidth:g,offsetHeight:f,scrollHeight:v}=h,_=p+1<g||f+1<v;a(_)}else a(!1)},u=()=>{r&&(n(!0),a(!1))};return T(()=>{n(!1),d()},[i,m]),te("resize",d),!e&&!o&&!s?null:t("span",{className:M({"vm-text-field__error":!0,"vm-text-field__warning":o&&!e,"vm-text-field__helper-text":!o&&!e,"vm-text-field__error_overflowed":r,"vm-text-field__error_full":c}),"data-show":!!m,ref:i,onClick:u,children:m})},ke=Lt(({label:e,value:o,type:s="text",error:i="",warning:r="",helperText:a="",placeholder:c,endIcon:n,startIcon:l,disabled:m=!1,autofocus:d=!1,inputmode:u="text",caretPosition:h,onChange:p,onEnter:g,onKeyDown:f,onFocus:v,onBlur:_,onChangeCaret:b},y)=>{const{isDarkTheme:w}=se(),{isMobile:k}=U(),S=D(null),q=D(null),x=E(()=>s==="textarea"?q:S,[s]),C=M({"vm-text-field__input":!0,"vm-text-field__input_error":i,"vm-text-field__input_warning":!i&&r,"vm-text-field__input_icon-start":l,"vm-text-field__input_disabled":m,"vm-text-field__input_textarea":s==="textarea"}),A=H=>{if(!b)return;const{selectionStart:W,selectionEnd:ae}=H;b&&b([W||0,ae||0])},L=H=>{A(H.currentTarget)},I=H=>{f&&f(H);const{key:W,ctrlKey:ae,metaKey:be}=H,me=W==="Enter";(s!=="textarea"?me:me&&(be||ae))&&g&&(H.preventDefault(),g())},z=H=>{A(H.currentTarget)},B=H=>{m||(p&&p(H.currentTarget.value),A(H.currentTarget))},$=()=>{v&&v()},K=()=>{_&&_()},Q=H=>{try{x.current&&x.current.setSelectionRange(H[0],H[1])}catch(W){return W}},J=O(H=>{y&&(typeof y=="function"?y(H):y.current=H)},[]),G=O(H=>{J(H),S.current=H},[]),P=O(H=>{J(H),q.current=H},[]);return T(()=>{!d||k||x?.current?.focus&&x.current.focus()},[x,d]),T(()=>{h&&Q(h)},[h]),t("label",{className:M({"vm-text-field":!0,"vm-text-field_textarea":s==="textarea","vm-text-field_dark":w}),"data-replicated-value":o,children:[l&&t("div",{className:"vm-text-field__icon-start",children:l}),n&&t("div",{className:"vm-text-field__icon-end",children:n}),s==="textarea"?t("textarea",{className:C,disabled:m,ref:P,value:o,rows:1,inputMode:u,placeholder:c,autoCapitalize:"none",onInput:B,onKeyDown:I,onKeyUp:z,onFocus:$,onBlur:K,onMouseUp:L}):t("input",{className:C,disabled:m,ref:G,value:o,type:s,placeholder:c,inputMode:u,autoCapitalize:"none",onInput:B,onKeyDown:I,onKeyUp:z,onFocus:$,onBlur:K,onMouseUp:L}),e&&t("span",{className:"vm-text-field__label",children:e}),t(fc,{error:i,warning:r,info:a})]})}),vc=[10,25,50,100,250,500,1e3],$e=e=>{const{limit:o,label:s,options:i,allowUnlimited:r,isLoading:a,error:c,searchable:n,textNoOptions:l,onChange:m,onOpenSelect:d,renderOptionLabel:u}=e,[h,p]=N(""),{isMobile:g}=U(),f=D(null),v=E(()=>{const q=i||vc;return r?[...q,0]:q},[r,i]),_=E(()=>{if(!n||!h.trim())return v;const q=h.toLowerCase();return v.filter(x=>String(x).toLowerCase().includes(q))},[v,h,n]),{value:b,toggle:y,setFalse:w}=Z(),k=()=>{y(),b||d?.()},S=q=>()=>{m(q),w()};return t(V,{children:[t("div",{className:"vm-select-limits-button",onClick:k,ref:f,children:[t("div",{children:[s||(g?"Rows":"Rows per page"),": ",t("b",{children:u?u(o,!0):o||"All"})]}),t(De,{})]}),t(Se,{open:b,onClose:w,placement:"bottom-right",buttonRef:f,children:t("div",{className:"vm-select-limits",children:[a&&t(R,{disabled:!0,color:"gray",variant:"text",startIcon:t(Pt,{}),children:"loading..."}),c&&t("div",{className:"vm-select-limits__error",children:[t(It,{}),c]}),!a&&!c&&v.length===0&&t("div",{className:"vm-select-limits__empty",children:l||"No options available"}),n&&!a&&!c&&!!v.length&&t("div",{className:"vm-select-limits__search",children:t(ke,{autofocus:!0,label:"Search",value:h,onChange:p})}),t("div",{className:"vm-select-limits-list",children:!a&&!c&&_.map(q=>t("div",{className:M({"vm-list-item":!0,"vm-select-limits__item":!0,"vm-list-item_mobile":g,"vm-list-item_active":q===o}),onClick:S(q),children:u?u(q,!1):q||"All"},q))})]})})]})},Pe={home:"/",streamContext:"/stream-context/:_stream_id/:_time",icons:"/icons"},Rt={[Pe.home]:{title:"Query",header:{tenant:!0,timeSelector:!0,executionControls:!0}},[Pe.icons]:{title:"Icons",header:{}},[Pe.streamContext]:{title:"Stream context",header:{}}},Ti=({log:e,displayFields:o,isModal:s})=>{const[i,r]=X(),a=i.get(ee.NO_WRAP_LINES)==="true",[c,n]=N(10),{logsBefore:l,logsAfter:m,hasMore:d,isLoading:u,error:h,fetchContextLogs:p,resetContextLogs:g,abortController:f}=gc(),v=()=>{const w=m[0];p({log:w,linesAfter:c})},_=()=>{const w=l[l.length-1];p({log:w,linesBefore:c})},b=w=>{n(w)},y=()=>{i.set(ee.NO_WRAP_LINES,String(!a)),r(i)};return T(()=>(p({log:e,linesBefore:10,linesAfter:10}),()=>{g(),f?.abort()}),[]),t("div",{className:M({"vm-steam-context":!0,"vm-steam-context_modal":s}),children:[u&&t(Ro,{}),h&&t(Ee,{variant:"error",children:h}),t("div",{className:"vm-steam-context-header",children:[!s&&t("div",{className:"vm-steam-context-header-title",children:[t("h1",{className:"vm-modal-content-header__title",children:"Log context"}),t("p",{className:"vm-steam-context-header-title__info",children:[t("span",{children:["_stream_id: ",e._stream_id]}),t("span",{children:["_time: ",e._time]})]})]}),s&&t("div",{className:"vm-steam-context-header__link",children:t(Zi,{target:"_blank",to:Ji(Pe.streamContext,{_stream_id:e._stream_id,_time:e._time}),rel:"noreferrer",children:t(R,{startIcon:t(hi,{}),variant:"text",size:"small",children:"Open in new page"})})}),t(ue,{label:"Wrap lines",value:!a,onChange:y}),t($e,{limit:c,label:"Logs per load",options:[5,10,20,50,100],onChange:b})]}),t("div",{className:"vm-steam-context__load-more vm-steam-context__load-more_after",children:t(R,{onClick:v,disabled:u||!d.after,variant:d.after?"contained":"text",children:d.after?"Load newer logs":"no more logs after"})}),t("div",{className:"vm-group-logs-section-rows",children:[m.map((w,k)=>t(Ct,{isContextView:!0,hideGroupButton:!0,log:w,displayFields:o},`${k}_${w._time}`)),l.map((w,k)=>t(Ct,{isContextView:!0,hideGroupButton:!0,log:w,displayFields:o,className:k===0?"vm-steam-context__target-row":""},`${k}_${w._time}`))]}),t("div",{className:"vm-steam-context__load-more vm-steam-context__load-more_before",children:t(R,{onClick:_,disabled:u||!d.before,variant:d.before?"contained":"text",children:d.before?"Load older logs":"no more logs before"})})]})},_c=({log:e,displayFields:o})=>{const s=["_stream_id","_time"],i=E(()=>s.every(m=>e[m]),[e]),{value:r,setTrue:a,setFalse:c}=Z(),n=m=>{m.stopPropagation(),a()},l=()=>{c()};return i?t(V,{children:[t(j,{title:"Show context",children:t(R,{variant:"text",color:"gray",startIcon:t(ui,{}),onClick:n,ariaLabel:"show context"})}),r&&t(xe,{title:"Log context",isOpen:r,onClose:l,children:t(Ti,{isModal:!0,log:e,displayFields:o})})]}):null},yc=({log:e,displayFields:o=[],isContextView:s,hideGroupButton:i,className:r,onItemClick:a})=>{const{isDarkTheme:c}=se(),{isMobile:n}=U(),{value:l,toggle:m}=Z(),[d,u]=N(!1),h=Ie(),[p]=X(),{markdownParsing:g,ansiParsing:f}=So(),{timezone:v}=Oe(),_=p.get(ee.NO_WRAP_LINES)==="true",b=p.get(ee.DATE_FORMAT)||Qe,y=E(()=>e._time?Or(e._time,b):"",[e._time,v,b]),w=E(()=>!g||!e._msg||!o.includes("_msg")?"":ho(e._msg.replace(/```/g,"\n```\n")),[e._msg,g,o]),k=Object.keys(e).length>0,S=E(()=>{const A=[];return k||A.push("-"),o.some(L=>e[L])?o.filter(L=>e[L]).forEach(L=>{let I=e[L];const z=L==="_msg";z&&f&&(I=Oa(e[L])),z&&g&&(I=""),I&&A.push(I)}):Object.entries(e).forEach(([L,I])=>{A.push(`${L}: ${I}`)}),A},[e,k,o,f,g]),[q]=ut("LOGS_DISABLED_HOVERS"),x=()=>{m(),a?.(e)},C=O(async A=>{if(A.stopPropagation(),!d)try{await h(JSON.stringify(e,null,2)),u(!0)}catch(L){console.error(L)}},[d,h]);return T(()=>{if(d===null)return;const A=setTimeout(()=>u(!1),2e3);return()=>clearTimeout(A)},[d]),t("div",{className:M("vm-group-logs-row",r),children:[t("div",{className:M({"vm-group-logs-row-content":!0,"vm-group-logs-row-content_mobile":n,"vm-group-logs-row-content_dark":c,"vm-group-logs-row-content_active":l,"vm-group-logs-row-content_interactive":!q}),onClick:x,children:[k&&t("div",{className:M({"vm-group-logs-row-content__arrow":!0,"vm-group-logs-row-content__arrow_open":l}),children:t(de,{})}),t("div",{className:M({"vm-group-logs-row-content__time":!0,"vm-group-logs-row-content__time_missing":!y}),children:y||"timestamp missing"}),t("div",{className:M({"vm-group-logs-row-content__msg":!0,"vm-group-logs-row-content__msg_empty-msg":!e._msg,"vm-group-logs-row-content__msg_missing":!S,"vm-group-logs-row-content__msg_single-line":_}),children:[w&&t("span",{dangerouslySetInnerHTML:{__html:w}}),S.map((A,L)=>t("span",{className:"vm-group-logs-row-content__sub-msg",children:A},`${A}_${L}`))]}),t("div",{className:M({"vm-group-logs-row-content__actions":!0,"vm-group-logs-row-content__actions_active":l}),children:[!s&&t(_c,{log:e,displayFields:o}),t(j,{title:d?"Copied":"Copy to clipboard",children:t(R,{variant:"text",color:"gray",startIcon:t(Re,{}),onClick:C,ariaLabel:"copy to clipboard"})})]})]}),k&&l&&t(Ha,{hideGroupButton:i,log:e})]})},Ct=et(yc),Li=({value:e,options:o,anchor:s,disabled:i,minLength:r=2,fullWidth:a,selected:c,noOptionsText:n,label:l,disabledFullScreen:m,offset:d,maxDisplayResults:u,loading:h,onSelect:p,onOpenAutocomplete:g,onFoundOptions:f,onChangeWrapperRef:v})=>{const{isMobile:_}=U(),b=D(null),[y,w]=N({index:-1}),[k,S]=N(""),[q,x]=N(0),{value:C,setValue:A,setFalse:L}=Z(),I=E(()=>{if(!C)return[];try{const P=new RegExp(String(e.trim()),"i"),W=o.filter(ae=>P.test(ae.value)).sort((ae,be)=>ae.value.toLowerCase()===e.trim().toLowerCase()?-1:be.value.toLowerCase()===e.trim().toLowerCase()?1:(ae.value.match(P)?.index||0)-(be.value.match(P)?.index||0));return x(W.length),S(W.length>Number(u?.limit)&&u?.message||""),u?.limit?W.slice(0,u.limit):W}catch{return[]}},[C,o,e]),z=E(()=>I.length===1&&I[0]?.value===e,[I]),B=E(()=>n&&!I.length,[n,I]),$=P=>()=>{i||(p(P.value,P),c||L())},K=P=>()=>{w({index:P,type:0})},Q=()=>{w({index:-1})},J=()=>{if(!b.current||y.type===0)return;const P=b.current.childNodes[y.index];P?.scrollIntoView&&P.scrollIntoView({block:"center"})},G=O(P=>{const{key:H,ctrlKey:W,metaKey:ae,shiftKey:be}=P,me=W||ae||be,Me=I.length&&!z;if(H==="ArrowUp"&&!me&&Me&&(P.preventDefault(),w(({index:ie})=>({index:ie<=0?0:ie-1,type:1}))),H==="ArrowDown"&&!me&&Me){P.preventDefault();const ie=I.length-1;w(({index:He})=>({index:He>=ie?ie:He+1,type:1}))}if(H==="Enter"){const ie=I[y.index];ie&&p(ie.value,ie),c||L()}H==="Escape"&&L()},[y,I,z,L,p,c]);return T(()=>{A(e.length>=r)},[e,o]),te("keydown",G),T(J,[y,I]),T(()=>{w({index:-1})},[I]),T(()=>{g&&g(C)},[C]),T(()=>{f&&f(z?[]:I)},[I,z]),T(()=>{v&&v(b)},[b]),t(Se,{open:C,buttonRef:s,placement:"bottom-left",onClose:L,fullWidth:a,title:_?l:void 0,disabledFullScreen:m,offset:d,children:[t("div",{className:M({"vm-autocomplete":!0,"vm-autocomplete_mobile":_&&!m}),ref:b,children:[h&&t("div",{className:"vm-autocomplete__loader",children:[t(Ao,{}),t("span",{children:"Loading..."})]}),B&&t("div",{className:"vm-autocomplete__no-options",children:n}),!z&&I.map((P,H)=>t("div",{className:M({"vm-list-item":!0,"vm-list-item_mobile":_,"vm-list-item_active":H===y.index,"vm-list-item_multiselect":c,"vm-list-item_multiselect_selected":c?.includes(P.value),"vm-list-item_with-icon":P.icon}),id:`$autocomplete$${P.value}`,onClick:$(P),onMouseEnter:K(H),onMouseLeave:Q,children:[c?.includes(P.value)&&t(Mt,{}),t(V,{children:P.icon}),t("span",{children:P.value})]},`${H}${P.value}`))]}),k&&t("div",{className:"vm-autocomplete-message",children:["Shown ",u?.limit," results out of ",q,". ",k]}),I[y.index]?.description&&t("div",{className:"vm-autocomplete-info",children:[t("div",{className:"vm-autocomplete-info__type",children:I[y.index].type}),t("div",{className:"vm-autocomplete-info__description",dangerouslySetInnerHTML:{__html:I[y.index].description||""}})]})]})},bc=({values:e,onRemoveItem:o})=>{const{isMobile:s}=U(),i=r=>a=>{o(r),a.stopPropagation()};return s?t("span",{className:"vm-select-input-content__counter",children:["selected ",e.length]}):t(V,{children:e.map(r=>t("div",{className:"vm-select-input-content__selected",children:[t("span",{children:r}),t("div",{onClick:i(r),children:t(ot,{})})]},r))})},rs=({value:e,list:o,label:s,placeholder:i,noOptionsText:r,clearable:a=!1,searchable:c=!1,autofocus:n,disabled:l,onChange:m,onOpen:d})=>{const{isDarkTheme:u}=se(),{isMobile:h}=U(),[p,g]=N(""),f=D(null),[v,_]=N(null),[b,y]=N(!1),w=D(null),k=Array.isArray(e),S=Array.isArray(e)?e:void 0,q=h&&k&&!!S?.length,x=E(()=>b?p:Array.isArray(e)?"":e,[e,p,b,k]),C=E(()=>b?p||"(.+)":"",[p,b]),A=()=>{w.current&&w.current.blur()},L=()=>{y(!1),A()},I=()=>{l||y(!0)},z=()=>{o.includes(p)&&m(p)},B=G=>{G.target instanceof HTMLInputElement||l||y(P=>!P)},$=G=>{g(""),m(G),k||L(),k&&w.current&&w.current.focus()},K=G=>{g(G.target.value)},Q=G=>P=>{$(G),P.stopPropagation()},J=G=>{w.current!==G.target&&y(!1)};return T(()=>{g(""),b&&w.current&&w.current.focus(),b||A()},[b,w]),T(()=>{!n||!w.current||h||w.current.focus()},[n,w]),T(()=>{d&&d(b)},[b]),te("keyup",J),ft(f,L,v),t("div",{className:M({"vm-select":!0,"vm-select_dark":u,"vm-select_disabled":l}),children:[t("div",{className:"vm-select-input",onClick:B,ref:f,children:[t("div",{className:"vm-select-input-content",children:[!!S?.length&&t(bc,{values:S,onRemoveItem:$}),!q&&t("input",{value:x,type:"text",placeholder:i,onInput:K,onFocus:I,onBlur:z,ref:w,readOnly:h||!c})]}),s&&t("span",{className:"vm-text-field__label",children:s}),a&&e&&t("div",{className:"vm-select-input__icon",onClick:Q(""),children:t(ot,{})}),t("div",{className:M({"vm-select-input__icon":!0,"vm-select-input__icon_open":b}),children:t(De,{})})]}),t(Li,{label:s,value:C,options:o.map(G=>({value:G})),anchor:f,selected:S,minLength:1,fullWidth:!0,noOptionsText:r,onSelect:$,onOpenAutocomplete:y,onChangeWrapperRef:_})]})},wc=({text:e,href:o,children:s,colored:i=!0,underlined:r=!1,withIcon:a=!1})=>t("a",{href:o,className:M({"vm-link":!0,"vm-link_colored":i,"vm-link_underlined":r,"vm-link_with-icon":a}),target:"_blank",rel:"noreferrer",children:e||s}),kc=()=>{const{markdownParsing:e,ansiParsing:o}=So(),s=Us();return t(V,{children:[t("div",{className:"vm-group-logs-configurator-item",children:[t(ue,{label:"Enable markdown parsing",value:e,onChange:a=>{s({type:"SET_MARKDOWN_PARSING",payload:a}),o&&s({type:"SET_ANSI_PARSING",payload:!1})}}),t("div",{className:"vm-group-logs-configurator-item__info",children:"Toggle this switch to enable or disable the Markdown formatting for log entries. Enabling this will parse log texts to Markdown."})]}),t("div",{className:"vm-group-logs-configurator-item",children:[t(ue,{label:"Enable ANSI parsing",value:o,onChange:a=>{s({type:"SET_ANSI_PARSING",payload:a}),e&&s({type:"SET_MARKDOWN_PARSING",payload:!1})}}),t("div",{className:"vm-group-logs-configurator-item__info",children:"Toggle this switch to enable or disable ANSI escape sequence parsing for log entries. Enabling this will interpret ANSI codes to render colored log output."})]})]})},{GROUP_BY:as,NO_WRAP_LINES:cs,COMPACT_GROUP_HEADER:ns,DISPLAY_FIELDS:Gt,DATE_FORMAT:Qt}=ee,bt="Group view settings",qc=({logs:e})=>{const[o,s]=X(),i=o.get(as)||_e,r=o.get(cs)==="true",a=o.get(ns)==="true",c=o.get(Gt)||"",n=c?c.split(","):[Ke],[l,m]=N(o.get(Qt)||Qe),[d,u]=N(""),[h,p]=ut("LOGS_DISABLED_HOVERS"),g=i!==_e,f=n.length!==1||n[0]!==Ke,v=l!==Qe,_=[g,f,r,a,v].some(Boolean),b=E(()=>{const B=new Set(e.map($=>Object.keys($)).flat());return Array.from(B).sort(($,K)=>$.localeCompare(K))},[e]),{value:y,toggle:w,setFalse:k}=Z(),S=B=>{o.set(as,B),s(o)},q=B=>{const $=n,K=$.includes(B)?$.filter(Q=>Q!==B):[...$,B];o.set(Gt,K.join(",")),s(o)},x=()=>{o.delete(Gt),s(o)},C=()=>{o.set(cs,String(!r)),s(o)},A=()=>{o.set(ns,String(!a)),s(o)},L=B=>{F(new Date,B,!0).isValid()||u("Invalid date format"),m(B)},I=()=>{l===Qe?o.delete(Qt):o.set(Qt,l),s(o),k()};return t(V,{children:[t("div",{className:"vm-group-logs-configurator-button",children:[t(j,{title:_?t("div",{className:"vm-group-logs-configurator__tooltip",children:[t("p",{children:bt}),t("hr",{}),t("ul",{children:[g&&t("li",{children:["Group by ",t("code",{children:`"${i}"`})]}),f&&t("li",{children:["Display fields: ",n.length||1]}),r&&t("li",{children:"Single-line text is enabled"}),a&&t("li",{children:"Compact group header is enabled"}),v&&t("li",{children:["Date format: ",t("code",{children:l})]})]})]}):bt,children:t(R,{variant:"text",startIcon:t(Ze,{}),onClick:w,ariaLabel:bt})}),_&&t("span",{className:"vm-group-logs-configurator-button__marker"})]}),y&&t(xe,{title:bt,onClose:I,children:t("div",{className:"vm-group-logs-configurator",children:[t("div",{className:"vm-group-logs-configurator-item",children:[t(rs,{value:i,list:[oo,...b],label:"Group by field",placeholder:"Group by field",onChange:S,searchable:!0}),t(j,{title:"Reset grouping",children:t(R,{variant:"text",color:"primary",startIcon:t(ct,{}),onClick:()=>S(_e)})}),t("span",{className:"vm-group-logs-configurator-item__info",children:["Select a field to group logs by (default: ",t("code",{children:_e}),")."]})]}),t("div",{className:"vm-group-logs-configurator-item",children:[t(rs,{value:n,list:b,label:"Display fields",placeholder:"Display fields",onChange:q,searchable:!0}),t(j,{title:"Clear fields",children:t(R,{variant:"text",color:"primary",startIcon:t(ct,{}),onClick:x})}),t("span",{className:"vm-group-logs-configurator-item__info",children:["Select fields to display instead of the message (default: ",t("code",{children:Ke}),")."]})]}),t("div",{className:"vm-group-logs-configurator-item",children:[t(ke,{autofocus:!0,label:"Date format",value:l,onChange:L,error:d}),t(j,{title:"Reset format",children:t(R,{variant:"text",color:"primary",startIcon:t(ct,{}),onClick:()=>m(Qe)})}),t("span",{className:"vm-group-logs-configurator-item__info vm-group-logs-configurator-item__info_input",children:["Set the date format (e.g., ",t("code",{children:"YYYY-MM-DD HH:mm:ss"}),"). Learn more in ",t(wc,{href:"https://day.js.org/docs/en/display/format",children:"this documentation"}),". ",t("br",{}),"Your current date format: ",t("code",{children:F().format(l||Qe)})]})]}),t(kc,{}),t("div",{className:"vm-group-logs-configurator-item",children:[t(ue,{value:r,onChange:C,label:"Single-line message"}),t("span",{className:"vm-group-logs-configurator-item__info",children:"Displays message in a single line and truncates it with an ellipsis if it exceeds the available space."})]}),t("div",{className:"vm-group-logs-configurator-item",children:[t(ue,{value:a,onChange:A,label:"Compact group header"}),t("span",{className:"vm-group-logs-configurator-item__info",children:'Shows group headers in one line with a "+N more" badge for extra fields.'})]}),t("div",{className:"vm-group-logs-configurator-item",children:[t(ue,{value:h,onChange:p,label:"Disable hover effects"}),t("span",{className:"vm-group-logs-configurator-item__info",children:"Disable row highlighting on hover to improve performance with large datasets."})]})]})})]})},ls=({pair:e,isHide:o})=>{const{isDarkTheme:s}=se(),i=Ie(),[r]=X(),[a,c]=N(null),n=r.get(ee.GROUP_BY)||_e,l=m=>async d=>{d.stopPropagation();const u=Ci(m,n);await i(u)&&c(m)};return T(()=>{if(a===null)return;const m=setTimeout(()=>c(null),2e3);return()=>clearTimeout(m)},[a]),t(j,{title:a===e?"Copied":"Copy to clipboard",placement:"top-center",children:t("div",{className:M({"vm-group-logs-section-keys__pair":!0,"vm-group-logs-section-keys__pair_hide":o,"vm-group-logs-section-keys__pair_dark":s}),onClick:l(e),children:e})})},xc=({group:e,index:o})=>{const{isMobile:s}=U(),{isDarkTheme:i}=se(),[r]=X(),a=D(null),c=D(null),{value:n,toggle:l,setFalse:m}=Z(),[d,u]=N(0),h=r.get(ee.GROUP_BY)||_e,p=s||r.get(ee.COMPACT_GROUP_HEADER)==="true",g=e.pairs,f=g.length-d-1,v=b=>{b.stopPropagation(),l()},_=O(()=>{if(!p||!a.current){u(0);return}const b=a.current,y=b.getBoundingClientRect(),k=Array.from(b.querySelectorAll(".vm-group-logs-section-keys__pair:not(.vm-group-logs-section-keys__pair_more)"));let S=0;for(const q of k){const{right:x}=q.getBoundingClientRect();x+220>y.width&&S++}u(S)},[p,a]);return T(_,[e.pairs,p,a]),te("resize",_),t("div",{className:M({"vm-group-logs-section-keys":!0,"vm-group-logs-section-keys_compact":p}),ref:a,children:[t("span",{className:"vm-group-logs-section-keys__title",children:h===oo?oo:t(V,{children:[o+1,". Group by ",t("code",{children:h}),":"]})}),g.map((b,y)=>t(ls,{pair:b,isHide:d?y>f:!1},`${e.keysString}_${b}`)),d>0&&t(V,{children:[t("div",{className:M({"vm-group-logs-section-keys__pair":!0,"vm-group-logs-section-keys__pair_more":!0,"vm-group-logs-section-keys__pair_dark":i}),ref:c,onClick:v,children:["+",d," more"]}),t(Se,{open:n,buttonRef:c,placement:"bottom-left",onClose:m,children:t("div",{className:"vm-group-logs-section-keys vm-group-logs-section-keys_popper",children:g.slice(f+1).map(b=>t(ls,{pair:b},`${e.keysString}_${b}`))})})]}),t("span",{className:"vm-group-logs-section-keys__count",children:[e.total," entries"]})]})},Ei=({currentPage:e,totalItems:o,itemsPerPage:s,onPageChange:i,maxVisiblePages:r=10})=>{const a=Math.ceil(o/s),c=d=>{d<1||d>a||i(d)},n=E(()=>{const d=[];if(a<=r)for(let u=1;u<=a;u++)d.push(u);else{const u=Math.max(1,e-Math.floor(r/2)),h=Math.min(a,u+r-1);u>1&&(d.push(1),u>2&&d.push("..."));for(let p=u;p<=h;p++)d.push(p);h<a&&(h<a-1&&d.push("..."),d.push(a))}return d},[a,e,r]),l=d=>()=>{c(e+d)},m=d=>()=>{typeof d=="number"&&c(d)};return n.length<=1?null:t("div",{className:"vm-pagination",children:[t("button",{className:"vm-pagination__page vm-pagination__arrow vm-pagination__arrow_prev",onClick:l(-1),disabled:e===1,children:t(de,{})}),n.map((d,u)=>t("button",{onClick:m(d),className:M({"vm-pagination__page":!0,"vm-pagination__page_active":e===d,"vm-pagination__page_disabled":d==="..."}),disabled:d==="...",children:d},u)),t("button",{className:"vm-pagination__page vm-pagination__arrow vm-pagination__arrow_next",onClick:l(1),disabled:e===a,children:t(de,{})})]})},Sc=(e,o,s)=>E(()=>{if(!s)return e;const i=(o-1)*s,r=i+s;let a=0;const c=[];for(const n of e){const l=n.values.length,m=a,d=a+l;if(d<=i){a=d;continue}if(m>=r)break;const u=Math.max(0,i-m),h=Math.min(l,r-m),p={...n,values:n.values.slice(u,h)};if(c.push(p),a=d,a>=r)break}return c},[e,o,s]),Nc=({logs:e,settingsRef:o})=>{const{isMobile:s}=U(),[i,r]=X(),[a,c]=N(1),[n,l]=N([]),m=i.get(ee.GROUP_BY)||_e,d=i.get(ee.DISPLAY_FIELDS)||Ke,u=E(()=>d.split(","),[d]),h=i.get(ee.ROWS_PER_PAGE),p=h?Number(h):100,g=isNaN(p)?0:p,f=E(()=>n.every(Boolean),[n]),v=E(()=>ki(e,[m]).map(S=>{const q=S.values[0]?.[m]||"",x=Si(q),C=S.values;return{keys:S.keys,keysString:S.keys.join(""),values:C,pairs:x,total:C.length}}).sort((S,q)=>q.total-S.total),[e,m]),_=Sc(v,a,g),b=O(()=>{l(new Array(v.length).fill(!f))},[f,v.length]),y=O(S=>q=>{l(x=>{const C=[...x];return C[S]=q,C})},[]),w=S=>{S?i.set(ee.ROWS_PER_PAGE,String(S)):i.set(ee.ROWS_PER_PAGE,"all"),r(i)},k=S=>{c(S),window.scrollTo({top:0})};return T(()=>{l(S=>{const q=S.every(x=>!x)&&S.length||s;return new Array(v.length).fill(!q)})},[v]),T(()=>{c(1)},[g,v]),t(V,{children:[t("div",{className:"vm-group-logs",children:[_.map((S,q)=>t("div",{className:"vm-group-logs-section",children:t(bi,{defaultExpanded:n[q],onChange:y(q),title:t(xc,{group:S,index:q}),children:t("div",{className:"vm-group-logs-section-rows",children:S.values.map((x,C)=>t(Ct,{log:x,displayFields:u},`${q}_${C}_${x._time}`))})})},S.keysString)),t(Ei,{currentPage:a,totalItems:e.length,itemsPerPage:g||1/0,onPageChange:k})]}),o.current&&Ue(t("div",{className:"vm-group-logs-header",children:[t("div",{className:"vm-query-page-body-header__log-info",children:[s?"Logs":"Total logs returned",": ",t("b",{children:e.length})]}),t("div",{className:"vm-query-page-body-header__log-info",children:[s?"Groups":"Total groups",": ",t("b",{children:v.length})]}),t($e,{allowUnlimited:!0,limit:g,onChange:w}),t(j,{title:f?"Collapse All":"Expand All",children:t(R,{variant:"text",startIcon:f?t(ci,{}):t(ai,{}),onClick:b,ariaLabel:f?"Collapse All":"Expand All"})}),t(qc,{logs:e})]}),o.current)]})},Vo=()=>t("div",{className:"vm-empty",children:"No logs found"}),Cc=et(Nc),Ac=({data:e,settingsRef:o})=>e.length?t(V,{children:t(Cc,{logs:e,settingsRef:o})}):t(Vo,{}),Tc=["date","timestamp","time"];function ds(e,o,s){const i=e[s],r=o[s];if(i==null&&r==null)return 0;if(i==null)return 1;if(r==null)return-1;const a=String(i),c=String(r);if(Tc.includes(String(s))){const u=Xo(a),h=Xo(c);return h<u?-1:h>u?1:0}const l=Number(a),m=Number(c);return!isNaN(l)&&!isNaN(m)?m-l:c<a?-1:c>a?1:0}function Lc(e,o){return e==="desc"?(s,i)=>ds(s,i,o):(s,i)=>-ds(s,i,o)}function Ec(e,o){const s=e.map((i,r)=>[i,r]);return s.sort((i,r)=>{const a=o(i[0],r[0]);return a!==0?a:i[1]-r[1]}),s.map(i=>i[0])}const Ic=({rows:e,columns:o,defaultOrderBy:s,defaultOrderDir:i,copyToClipboard:r,isActiveRow:a,onClickRow:c,actionsRender:n,paginationOffset:l})=>{const m=Ie(),[d,u]=N(s),[h,p]=N(i||"desc"),[g,f]=N(null),v=E(()=>{const{startIndex:y,endIndex:w}=l;return Ec(e,Lc(h,d)).slice(y,w)},[e,d,h,l]),_=y=>()=>{const{disableSort:w,key:k}=y;w||(p(S=>S==="asc"&&d===k?"desc":"asc"),u(k))},b=(y,w)=>async()=>{if(g!==w)try{await m(String(y)),f(w)}catch(k){console.error(k)}};return T(()=>{if(g===null)return;const y=setTimeout(()=>f(null),2e3);return()=>clearTimeout(y)},[g]),t("table",{className:"vm-table",children:[t("thead",{className:"vm-table-header",children:t("tr",{className:"vm-table__row vm-table__row_header",children:[o.map(y=>t("th",{className:M("vm-table-cell vm-table-cell_header",{"vm-table-cell_sort":!y.disableSort,"vm-table-cell_number":y.isNum}),onClick:_(y),children:t("div",{className:"vm-table-cell__content",children:[t("div",{children:String(y.title||y.key)}),t("div",{className:M({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":d===y.key,"vm-table__sort-icon_desc":h==="desc"&&d===y.key}),children:!y.disableSort&&t(De,{})})]})},String(y.key))),n&&t("th",{className:"vm-table-cell vm-table-cell_header"}),r&&t("th",{className:"vm-table-cell vm-table-cell_header"})]})}),t("tbody",{className:"vm-table-body",children:v.map((y,w)=>t("tr",{className:M({"vm-table__row":!0,"vm-table__row_active":a&&a(y),"vm-table__row_clickable":!!c}),onClick:k=>c&&c(y,k),children:[o.map(k=>t("td",{className:M({"vm-table-cell":!0,"vm-table-cell_number":k.isNum,[`${k.className}`]:k.className}),children:k.render?k.render(y):y[k.key]||"-"},String(k.key))),n&&t("td",{className:"vm-table-cell vm-table-cell_no-padding",children:n(y)}),r&&t("td",{className:"vm-table-cell vm-table-cell_right",children:y[r]&&t("div",{className:"vm-table-cell__content",children:t(j,{title:g===w?"Copied":"Copy row",children:t(R,{variant:"text",color:g===w?"success":"gray",size:"small",startIcon:g===w?t(Mt,{}):t(Re,{}),onClick:b(y[r],w),ariaLabel:"copy row"})})})})]},w))})]})},Mc=e=>{switch(e){case"_time":return"vm-table-cell_logs-time";default:return"vm-table-cell_logs"}},Fc=[{key:"_vmui_data",title:"Data",className:"vm-table-cell_logs vm-table-cell_pre"}],Pc=({logs:e,displayColumns:o,tableCompact:s,columns:i,rowsPerPage:r})=>{const a=D(null),[c,n]=N(1),l=E(()=>e.map(p=>{const g=JSON.stringify(p,null,2);return{...p,_vmui_data:g}}),[e]),m=E(()=>i.map(p=>({key:p,title:p,className:Mc(p)})),[i]),d=E(()=>s?Fc:o?.length?m.filter(p=>o.includes(p.key)):[],[m,o,s]),u=E(()=>{const p=(c-1)*r,g=p+r;return{startIndex:p,endIndex:g}},[c,r]),h=p=>{if(n(p),a.current){const g=a.current.getBoundingClientRect().top+window.scrollY-50;window.scrollTo({top:g})}};return T(()=>{n(1)},[e,r]),t(V,{children:[t("div",{ref:a,children:t(Ic,{rows:l,columns:d,defaultOrderBy:"_time",defaultOrderDir:"desc",copyToClipboard:"_vmui_data",paginationOffset:u})}),t(Ei,{currentPage:c,totalItems:l.length,itemsPerPage:r,onPageChange:h})]})},no=({checked:e=!1,disabled:o=!1,label:s,color:i="secondary",onChange:r})=>{const a=()=>{o||r(!e)},c=M({"vm-checkbox":!0,"vm-checkbox_disabled":o,"vm-checkbox_active":e,[`vm-checkbox_${i}_active`]:e,[`vm-checkbox_${i}`]:i});return t("div",{className:c,onClick:a,children:[t("div",{className:"vm-checkbox-track",children:t("div",{className:"vm-checkbox-track__thumb",children:t(Mt,{})})}),s&&t("span",{className:"vm-checkbox__label",children:s})]})},Wt="Table settings",Oc=({columns:e,selectedColumns:o=[],tableCompact:s,onChangeColumns:i,toggleTableCompact:r})=>{const[a,c]=X(),n=D(null),{value:l,toggle:m,setFalse:d}=Z(),[u,h]=N(""),[p,g]=N(-1),f=E(()=>o.filter(x=>!e.includes(x)),[e,o]),v=E(()=>{const x=f.concat(e);return(u?x.filter(A=>A.includes(u)):x).sort((A,L)=>A.localeCompare(L))},[e,f,u]),_=E(()=>v.every(x=>o.includes(x)),[o,v]),b=x=>{i(x);const C=new URLSearchParams(a.toString());x.length===e.length?C.delete("columns"):C.set("columns",x.map(encodeURIComponent).join(",")),c(C)},y=x=>{const C=o.includes(x)?o.filter(A=>A!==x):[...o,x];b(C)},w=()=>{b(_?o.filter(x=>!v.includes(x)):v)},k=x=>()=>{y(x)},S=()=>{g(-1)},q=x=>{const C=x.key==="ArrowUp",A=x.key==="ArrowDown",L=x.key==="Enter";(A||C||L)&&x.preventDefault(),A?g(I=>I+1>v.length-1?I:I+1):C?g(I=>I-1<0?I:I-1):L&&y(v[p])};return T(()=>{wi(e,o)||a.has("columns")||i(e)},[e]),T(()=>{if(!a.has("columns"))return;const A=(a.get("columns")||"").split(",").map(decodeURIComponent).filter(Boolean);i(A)},[]),t("div",{className:"vm-table-settings",children:[t(j,{title:Wt,children:t("div",{ref:n,children:t(R,{variant:"text",startIcon:t(Ze,{}),onClick:m,ariaLabel:Wt})})}),l&&t(xe,{title:Wt,className:"vm-table-settings-modal",onClose:d,children:[t("div",{className:"vm-table-settings-modal-section",children:[t("div",{className:"vm-table-settings-modal-section__title",children:"Customize columns"}),t("div",{className:"vm-table-settings-modal-columns",children:[t("div",{className:"vm-table-settings-modal-columns__search",children:t(ke,{placeholder:"Search columns",startIcon:t(ni,{}),value:u,onChange:h,onBlur:S,onKeyDown:q,type:"search"})}),t("div",{className:"vm-table-settings-modal-columns-list",children:[!!v.length&&t("div",{className:"vm-table-settings-modal-columns-list__item vm-table-settings-modal-columns-list__item_all",children:t(no,{checked:_,onChange:w,label:_?"Uncheck all":"Check all",disabled:s})}),!v.length&&t("div",{className:"vm-table-settings-modal-columns-no-found",children:t("p",{className:"vm-table-settings-modal-columns-no-found__info",children:"No columns found."})}),v.map((x,C)=>t("div",{className:M({"vm-table-settings-modal-columns-list__item":!0,"vm-table-settings-modal-columns-list__item_focus":C===p,"vm-table-settings-modal-columns-list__item_custom":f.includes(x)}),children:t(no,{checked:o.includes(x),onChange:k(x),label:x,disabled:s})},x))]})]})]}),r&&s!==void 0&&t("div",{className:"vm-table-settings-modal-section",children:[t("div",{className:"vm-table-settings-modal-section__title",children:"Table view"}),t("div",{className:"vm-table-settings-modal-columns-list__item",children:t(ue,{label:"Compact view",value:s,onChange:r})})]})]})]})},Dc=et(Pc),Rc=({data:e,settingsRef:o})=>{const{setSearchParamsFromKeys:s}=Dt(),[i,r]=N([]),[a,c]=ne(100,"rows_per_page"),n=E(()=>{const d=new Set;for(const u of e)for(const h in u)d.add(h);return Array.from(d).sort((u,h)=>u.localeCompare(h))},[e]),l=d=>{c(d),s({rows_per_page:d})},m=()=>o.current?Ue(t("div",{className:"vm-table-view__settings",children:[t($e,{limit:a,onChange:l}),t("div",{className:"vm-table-view__settings-buttons",children:t(Oc,{columns:n,selectedColumns:i,onChangeColumns:r})})]}),o.current):null;return e.length?t(V,{children:[m(),t(Dc,{logs:e,displayColumns:i,tableCompact:!1,columns:n,rowsPerPage:Number(a)})]}):t(Vo,{})},Ii=({className:e})=>{const[o,s]=N(!1),i=()=>{const a=window.pageYOffset||document.documentElement.scrollTop,c=window.innerHeight;s(a>c)},r=O(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);return T(()=>(window.addEventListener("scroll",i),i(),()=>{window.removeEventListener("scroll",i)}),[]),t("div",{className:M({"vm-scroll-to-top-button":!0,"vm-scroll-to-top-button_visible":o},e),children:t(j,{title:"Scroll to top",children:t(R,{variant:"contained",color:"primary",onClick:r,ariaLabel:"Scroll to top",startIcon:t(di,{})})})})},zc=({title:e,getData:o,successfulCopiedMessage:s})=>{const i=Ie(),r=O(()=>{i(o(),s)},[o,s]);return t(j,{title:e,children:t(R,{variant:"text",startIcon:t(Re,{}),onClick:r,ariaLabel:e})})},Hc=({data:e})=>{const o=E(()=>e.map(s=>{const i=JSON.stringify(s,null,4);return i.length>100?i:JSON.stringify(s)}).join(`
`),[e]);return t("pre",{style:"line-height: 1.2em",children:o})},Vc=et(Hc),Bc=({data:e,settingsRef:o})=>{const s=E(()=>{const c=new Set(e.flatMap(Object.keys));return Array.from(c)},[e]),i=E(()=>{const c=s.toSorted((n,l)=>n.localeCompare(l));return e.map(n=>c.reduce((l,m)=>(n[m]&&(l[m]=n[m]),l),{}))},[s,e]),r=O(()=>JSON.stringify(i,null,2),[i]),a=()=>o.current?Ue(e.length>0&&t("div",{className:"vm-json-view__settings-container",children:t(zc,{title:"Copy JSON",getData:r,successfulCopiedMessage:"Copied JSON to clipboard"})}),o.current):null;return e.length?t("div",{className:"vm-json-view",children:[a(),t(Vc,{data:i}),t(Ii,{})]}):t(Vo,{})};class $c{threshold;windowSize;minHighCount;minNormalCount;window;state;constructor(o=200,s=10,i=6,r=2){this.threshold=o,this.windowSize=s,this.minHighCount=i,this.minNormalCount=r,this.window=[],this.state="normal"}update(o){this.window.push(o),this.window.length>this.windowSize&&this.window.shift();const s=this.window.filter(i=>i>this.threshold).length;return this.state==="normal"?s>=this.minHighCount&&(this.state="high"):this.state==="high"&&s<this.minNormalCount&&(this.state="normal"),this.state}}const lo="live_tailing_offset",ms=200,ps=5e3,us=1e3,Uc=(e,o,s,i)=>async r=>{let a=Date.now();const c=setInterval(()=>{if(Date.now()-a>ps){clearInterval(c),i();return}},ps);try{for(;;){const{done:n,value:l}=await r.read();if(n)break;a=Date.now();const m=new TextDecoder().decode(l),d=(e.current+m).split(`
`);e.current=d.pop()||"",o.current=[...o.current,...d]}}catch(n){n instanceof Error&&n.name!=="AbortError"&&(console.error("Stream processing error:",n),i())}finally{clearInterval(c)}},jc=(e,o)=>e.map(s=>{try{const i=s&&JSON.parse(s);return i._log_id=o.current++,i}catch(i){return console.error(`Failed to parse "${s}" to JSON
`,i),null}}).filter(Boolean),Yc=({lines:e,limit:o,counterRef:s,setIsLimitedLogsPerUpdate:i,setLogs:r,bufferLinesRef:a,logFlowAnalyzerRef:c})=>{const n=c?.current?.update(e.length)==="high",l=n&&e.length>ms?e.slice(-ms):e,m=jc(l,s);i(n),r(d=>{const u=[...d,...m];return u.length>o?u.slice(-o):u}),a.current=[]},Gc=(e,o)=>{const{serverUrl:s}=se(),[i]=ne(5,lo),[r,a]=N([]),{value:c,setTrue:n,setFalse:l}=Z(),m=st(),[d,u]=N(),[h,p]=N(!1),g=D(0n),f=D(new AbortController),v=D(null),_=D(null),b=D(""),y=D([]),w=D(new $c),k=O(()=>{v.current&&(v.current.cancel(),v.current=null),_.current&&clearInterval(_.current),b.current&&(b.current=""),f.current.abort()},[]),S=O(async()=>{k(),f.current=new AbortController;const{signal:x}=f.current;u(void 0);try{const C=await fetch(`${s}/select/logsql/tail`,{signal:x,method:"POST",headers:{...m},body:new URLSearchParams({query:e.trim(),offset:`${i}s`})});if(!C.ok||!C.body){const I=await C.text();return u(I),a([]),!1}const A=C.body.getReader();return v.current=A,Uc(b,y,u,S)(A),!0}catch(C){return C instanceof Error&&C.name!=="AbortError"&&(u(String(C)),console.error(C),a([])),!1}},[e,k,i]);T(()=>{if(c){const C=setInterval(()=>{y.current.length>o&&(y.current=y.current.slice(-o))},us);return()=>{clearInterval(C)}}const x=setInterval(()=>{const C=y.current;Yc({lines:C,limit:o,counterRef:g,setIsLimitedLogsPerUpdate:p,setLogs:a,bufferLinesRef:y,logFlowAnalyzerRef:w})},us);return()=>clearInterval(x)},[o,c,h]);const q=O(()=>{a([])},[]);return{logs:r,isPaused:c,error:d,startLiveTailing:S,stopLiveTailing:k,pauseLiveTailing:n,resumeLiveTailing:l,clearLogs:q,isLimitedLogsPerUpdate:h}},Qc=({settingsRef:e,rowsPerPage:o,handleSetRowsPerPage:s,isPaused:i,handleResumeLiveTailing:r,pauseLiveTailing:a,clearLogs:c,isRawJsonView:n,onRawJsonViewChange:l,offset:m,handleSetOffset:d})=>{const u=D(null),{value:h,setFalse:p,setTrue:g}=Z();return e.current?Ue(t("div",{className:"vm-live-tailing-view__settings",children:[t($e,{limit:o,onChange:s,onOpenSelect:a}),t($e,{label:"Offset",limit:m,options:[5,10,15,30,45,60],onChange:d,onOpenSelect:a,renderOptionLabel:f=>`${f}s`}),t("div",{className:"vm-live-tailing-view__settings-buttons",children:[t(j,{title:`${i?"Resume":"Pause"} live tailing`,children:t(R,{variant:"text",color:"primary",onClick:i?r:a,startIcon:i?t(Lo,{}):t(li,{}),ariaLabel:`${i?"Resume":"Pause"} live tailing`})}),t(j,{title:"Clear logs",children:t(R,{variant:"text",color:"secondary",onClick:c,startIcon:t(Io,{}),ariaLabel:"Clear logs"})}),t(j,{title:"Settings",children:t(R,{ref:u,variant:"text",onClick:g,startIcon:t(Ze,{}),ariaLabel:"Settings"})}),h&&t(xe,{onClose:p,title:"Live tailing settings",children:t("div",{className:"vm-live-tailing-view__settings-modal",children:t("div",{className:"vm-live-tailing-view__settings-modal-item",children:[t(ue,{label:"Raw JSON View",value:n,onChange:l}),t("span",{className:"vm-group-logs-configurator-item__info",children:"When this option is enabled, logs will be displayed in raw JSON format. This improves performance and uses less CPU and memory."})]})})})]})]}),e.current):null},Wc=100,Kc=()=>window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),hs=Xi(Kc,200),Zc=({settingsRef:e})=>{const o=D(null),[s,i]=N(!0),[r]=X(),{setSearchParamsFromKeys:a}=Dt(),[c]=ne(100,"rows_per_page"),[n]=ne(5,lo),[l]=ne("*","query"),[m,d]=ut("RAW_JSON_LIVE_VIEW"),{logs:u,isPaused:h,error:p,startLiveTailing:g,stopLiveTailing:f,pauseLiveTailing:v,resumeLiveTailing:_,clearLogs:b,isLimitedLogsPerUpdate:y}=Gc(l,c),w=r.get(ee.DISPLAY_FIELDS)||Ke,k=E(()=>w.split(","),[w]),S=O(()=>{hs(),_()},[_]),q=O(C=>{a({rows_per_page:C})},[a]),x=O(C=>{a({[lo]:C})},[a]);return T(()=>(g(),()=>f()),[g,f,n]),T(()=>{if(!o.current)return;let A=[];const L=()=>{const{scrollTop:I,scrollHeight:z,clientHeight:B}=document.documentElement,$=Math.abs(z-I-B)<Wc;i($),A.push(I),A=A.slice(-3);const K=La(A);!$&&!h&&K&&v()};return document.addEventListener("scroll",L),()=>document.removeEventListener("scroll",L)},[h,v,_]),T(()=>{s&&!h&&hs()},[u,s]),T(()=>{S()},[c,n]),p?t("div",{className:"vm-live-tailing-view__error",children:p}):t(V,{children:[t(Qc,{settingsRef:e,rowsPerPage:c,handleSetRowsPerPage:q,logs:u,isPaused:h,handleResumeLiveTailing:S,pauseLiveTailing:v,clearLogs:b,isRawJsonView:m,onRawJsonViewChange:d,offset:n,handleSetOffset:x}),t(Ii,{}),t("div",{ref:o,className:"vm-live-tailing-view__container",children:u.length===0?t("div",{className:"vm-live-tailing-view__empty",children:"Waiting for logs..."}):t("div",{className:"vm-live-tailing-view__logs",children:u.map(({_log_id:C,...A},L)=>m?t("pre",{className:"vm-live-tailing-view__log-row",onMouseDown:v,children:JSON.stringify(A)},L):t(Ct,{log:A,onItemClick:v,hideGroupButton:!0,displayFields:k},C))})}),y&&t(Ee,{variant:"warning",children:"Too many logs per second detected. Large volumes of log data are difficult to process and may impact performance. We recommend adding filters to your query for better analysis and system performance."})]})},gs=globalThis.showSaveFilePicker;async function Jc(e={}){if(gs&&!e._preferPolyfill)return gs(e);e._name&&(console.warn("`_name` is deprecated; use `suggestedName` instead."),e.suggestedName=e._name);const o=await Yo(()=>import("./FileSystemFileHandle-R744i65p.js"),__vite__mapDeps([0,1]),import.meta.url),{FileSystemFileHandle:s}=o,i=await Yo(()=>import("./downloader-B69BFsAs.js"),__vite__mapDeps([2,1]),import.meta.url),{FileHandle:r}=i;return new s(new r(e.suggestedName))}const Xc=()=>{const{isLoading:e,error:o,fetchLogs:s}=Ho(),[i,r]=N(null),[a,c]=N(!1),n=e||a,l=o||i,m=O(async({filename:d,queryParams:u})=>{r(null);const{query:h,start:p,end:g}=u||{},f=["query","start","end"].filter(v=>!{query:h,start:p,end:g}[v]);if(f.length)return r(`Download failed: missing required params: ${f.join(", ")}`),!1;c(!0);try{const v={start:F(p).unix(),end:F(g).unix(),date:Rs(F(g).toDate())},_=await s({query:h,period:v,isDownload:!0});if(!_||Array.isArray(_)||!_.body)return r("Download failed: missing response body."),!1;const y=await(await Jc({suggestedName:d})).createWritable();return await _.body.pipeTo(y,{preventCancel:!0}),!0}catch(v){return v instanceof Error&&v.name!=="AbortError"&&(r(String(v)),console.error(v)),!1}finally{c(!1)}},[s]);return{error:l,isLoading:n,downloadLogs:m}},fs="jsonl",Mi=({children:e,queryParams:o})=>{const{value:s,setTrue:i,setFalse:r}=Z(),{downloadLogs:a,error:c,isLoading:n}=Xc(),[l,m]=N("vmui_logs_export"),d=E(()=>{if(!o)return"";const{start:p,end:g}=o,f=p?F(p).format(Le):"",v=g?F(g).format(Le):"",_=F(p).format("Z");return`${f} - ${v} (${_})`},[o?.start,o?.end]),u=E(()=>{if(!o)return"";const{AccountID:p,ProjectID:g}=o;return`${p}:${g}`},[o?.AccountID,o?.ProjectID]),h=O(async()=>{const g=`${l.trim()||"vmui_logs_export"}.${fs}`;await a({filename:g,queryParams:o})},[l,o,a]);return t(V,{children:[t("div",{onClick:i,children:e}),s&&t(xe,{title:"Download logs",onClose:r,children:t("div",{className:"vm-download-logs",children:[t("div",{className:"vm-download-logs-section",children:[t("h3",{className:"vm-download-logs-section__title",children:"File name"}),t("div",{className:"vm-download-logs-filename",children:t(ke,{autofocus:!0,value:l,endIcon:t("span",{className:"vm-download-logs-filename__extension",children:[".",fs]}),onChange:m})}),t("div",{className:"vm-download-logs__description",children:["This will download all logs for ",d," using your current query for tenant ",u,"."]})]}),c&&t(Ee,{variant:"error",children:c}),t("div",{className:"vm-download-logs-footer",children:[t(R,{color:"error",variant:"outlined",onClick:r,children:"Cancel"}),t(R,{color:"primary",variant:"contained",onClick:h,disabled:n,startIcon:n?t(Pt,{}):t(Fo,{}),children:"Download"})]})]})})]})},vs=[{label:"Group",value:"group",icon:t(oi,{}),Component:Ac},{label:"Table",value:"table",icon:t(Js,{}),Component:Rc},{label:"JSON",value:"json",icon:t(Eo,{}),Component:Bc},{label:"Live",value:"liveTailing",icon:t(To,{}),Component:Zc}],en=({data:e,queryParams:o,isLoading:s,isPreview:i})=>{const{isMobile:r}=U(),{setSearchParamsFromKeys:a}=Dt(),[c,n]=ne("group","view"),l=D(null),[m,d]=X(),[u,h]=ne(!1,"hide_logs"),p=()=>{h(v=>{const _=!v;return _?m.set("hide_logs","true"):m.delete("hide_logs"),d(m),_})},g=v=>{n(v),a({view:v})},f=vs.find(v=>v.value===c)?.Component;return t("div",{className:M({"vm-query-page-body":!0,"vm-block":!i,"vm-block_mobile":!i&&r}),children:[s&&t(Ro,{}),t("div",{className:M({"vm-query-page-body-header":!0,"vm-section-header":!0,"vm-query-page-body-header_mobile":r}),children:[t("div",{className:M({"vm-section-header__tabs":!0,"vm-query-page-body-header__tabs_mobile":r}),children:t(yi,{activeItem:String(c),items:vs,onChange:g})}),t("div",{className:M({"vm-query-page-body-header__settings":!0,"vm-query-page-body-header__settings_mobile":r}),children:[t("div",{ref:l}),t(Mi,{queryParams:o,children:t(j,{title:"Download Logs",children:t(R,{variant:"text",startIcon:t(Fo,{}),ariaLabel:"Download Logs"})})}),t(j,{title:u?"Show Logs":"Hide Logs",children:t(R,{variant:"text",color:"primary",startIcon:u?t(Ft,{}):t(Je,{}),onClick:p,ariaLabel:"settings"})})]})]}),t("div",{className:M({"vm-query-page-body__table":!0,"vm-query-page-body__table_hide":u,"vm-query-page-body__table_mobile":r}),children:[u&&t(Ee,{variant:"info",children:"Logs are hidden. Updates paused."}),!u&&f&&t(f,{data:e,settingsRef:l})]})]})},tn=({value:e,onChange:o,onEnter:s,onArrowUp:i,onArrowDown:r,autocomplete:a,autocompleteEl:c,error:n,stats:l,label:m,disabled:d=!1,includeFunctions:u=!0})=>{const{autocompleteQuick:h}=ht(),{isMobile:p}=U(),[g,f]=N(!1),[v,_]=N([0,0]),[b,y]=N([0,0]),w=D(null),[k,S]=N(!1),q=D(Ts(S,500)).current;l?.executionTimeMsec!==void 0&&(m=`${m} (${l.executionTimeMsec||0}ms)`);const x=(I,z)=>{o(I),y([z,z])},C=I=>{const{key:z,ctrlKey:B,metaKey:$,shiftKey:K}=I,J=(I.target.value||"").split(`
`).length>1,G=B||$,P=z==="ArrowUp",H=z==="ArrowDown",W=z==="Enter";P&&G&&(I.preventDefault(),i()),H&&G&&(I.preventDefault(),r()),W&&g&&I.preventDefault(),W&&!K&&(!J||G)&&!g&&(I.preventDefault(),s())},A=I=>{f(!!I.length)},L=I=>{_(z=>z[0]===I[0]&&z[1]===I[1]?z:I)};return T(()=>{f(!!c&&h)},[h]),T(()=>{S(!1),q(v.every(Boolean))},[v]),t("div",{className:"vm-query-editor",ref:w,children:[t(ke,{value:e,label:m,type:"textarea",autofocus:!p,error:n,onKeyDown:C,onChange:o,onChangeCaret:L,disabled:d,inputmode:"search",caretPosition:b}),a&&c&&t(c,{value:e,anchorEl:w,caretPosition:v,hasHelperText:!!n,includeFunctions:u,onSelect:x,onFoundOptions:A,isOpen:k})]})},Fi=({limit:e,onChangeLimit:o,onPressEnter:s,onError:i})=>{const[r,a]=N(""),[c,n]=N(e),l=d=>isNaN(d)||d<=0?(a("Number must be > 0"),{isValid:!1,errorMsg:"Number must be > 0"}):d>at?{isValid:!1,errorMsg:`Max limit is ${at.toLocaleString("en-US")}`}:{isValid:!0,errorMsg:""},m=O(d=>{const u=+d;n(u);const{isValid:h,errorMsg:p}=l(u);h?(a(""),o(u)):a(p)},[o]);return T(()=>{i&&i(!!r)},[r]),T(()=>{const{isValid:d,errorMsg:u}=l(e);a(d?"":u),n(e)},[e]),t(ke,{label:"Log limits",type:"number",value:c,error:r,onChange:m,onEnter:s})};var ve=(e=>(e.Filter="Filter",e.Pipe="Pipe",e.Operator="Operator",e.FilterOrPipe="FilterOrPipe",e))(ve||{}),Y=(e=>(e.FilterName="FilterName",e.FilterUnknown="FilterUnknown",e.FilterValue="FilterValue",e.PipeName="Pipes",e.PipeValue="PipeValue",e.Unknown="Unknown",e.FilterOrPipeName="FilterOrPipeName",e))(Y||{});const on=[{id:"block-stats-pipe",value:"block_stats",title:"block_stats pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | block_stats</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns the following stats for each field in every data block
processed by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>:</p>
<ul>
<li><code>field</code> - <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> name</li>
<li><code>rows</code> - the number of rows at the given <code>field</code></li>
<li><code>type</code> - internal storage type for the given <code>field</code></li>
<li><code>values_bytes</code> - on-disk size of the data for the given <code>field</code></li>
<li><code>bloom_bytes</code> - on-disk size of bloom filter data for the given <code>field</code></li>
<li><code>dict_bytes</code> - on-disk size of the dictionary data for the given <code>field</code></li>
<li><code>dict_items</code> - the number of unique values in the dictionary for the given <code>field</code></li>
<li><code>_stream</code> - the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields">log stream</a> for the given <code>field</code></li>
<li><code>part_path</code> - the path to the data part where the field data is stored</li>
</ul>
<p>The <code>block_stats</code> pipe is needed mostly for debugging purposes.
See, for example, <a href="https://docs.victoriametrics.com/victorialogs/faq/#how-to-determine-which-log-fields-occupy-the-most-of-disk-space">how to detect which log field occupies the most of the disk space</a>,
or <a href="https://docs.victoriametrics.com/victorialogs/faq/#how-to-determine-which-log-streams-occupy-the-most-of-disk-space">how to detect which log stream occupies the most of the disk space</a>.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#query_stats-pipe"><code>query_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#value_type-filter"><code>value_type</code> filter</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#blocks_count-pipe"><code>blocks_count</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#len-pipe"><code>len</code> pipe</a></li>
</ul>
</div>`},{id:"blocks-count-pipe",value:"blocks_count",title:"blocks_count pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | blocks_count</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> counts the number of blocks with logs processed by <code>&lt;q&gt;</code>. This pipe is needed mostly for debugging.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#query_stats-pipe"><code>query_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#block_stats-pipe"><code>block_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#len-pipe"><code>len</code> pipe</a></li>
</ul>
</div>`},{id:"collapse-nums-pipe",value:"collapse_nums",title:"collapse_nums pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | collapse_nums at &lt;field&gt;</code> pipe replaces all the decimal and hexadecimal numbers at the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>&lt;field&gt;</code></a>
returned by the <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> with <code>&lt;N&gt;</code> placeholder.
For example, if the <code>_msg</code> field contains <code>2024-10-20T12:34:56Z request duration 1.34s</code>, then it is replaced with <code>&lt;N&gt;-&lt;N&gt;-&lt;N&gt;T&lt;N&gt;:&lt;N&gt;:&lt;N&gt;Z request duration &lt;N&gt;.&lt;N&gt;s</code> by the following query:</p>
<pre><code class="language-logsql">_time:5m | collapse_nums at _msg
</code></pre>
<p>The <code>at ...</code> suffix can be omitted if <code>collapse_nums</code> is applied to <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code></a> field.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | collapse_nums
</code></pre>
<p>This functionality is useful for locating the most frequently seen log patterns across log messages with various decimal and hexadecimal numbers.
This includes the following entities: timestamps, IP addresses, request durations, response sizes, <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a>, trace IDs, user IDs, etc.
Log messages with such entities become identical after applying <code>collapse_nums</code> pipe to them, so the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a> can be applied to them in order to get the most frequently
seen patterns across log messages. For example, the following query returns top 5 the most frequently seen log patterns across log messages for the last hour:</p>
<pre><code class="language-logsql">_time:1h | collapse_nums | top 5 by (_msg)
</code></pre>
<p><code>collapse_nums</code> can detect certain patterns in the collapsed numbers and replace them with the corresponding placeholders if <code>prettify</code> suffix is added to the <code>collapse_nums</code> pipe:</p>
<ul>
<li><code>&lt;N&gt;-&lt;N&gt;-&lt;N&gt;-&lt;N&gt;-&lt;N&gt;</code> is replaced with <code>&lt;UUID&gt;</code> placeholder.</li>
<li><code>&lt;N&gt;.&lt;N&gt;.&lt;N&gt;.&lt;N&gt;</code> is replaced with <code>&lt;IP4&gt;</code> placeholder.</li>
<li><code>&lt;N&gt;:&lt;N&gt;:&lt;N&gt;</code> is replaced with <code>&lt;TIME&gt;</code> placeholder. Optional fractional seconds after the time are treated as a part of <code>&lt;TIME&gt;</code>.</li>
<li><code>&lt;N&gt;-&lt;N&gt;-&lt;N&gt;</code> and <code>&lt;N&gt;/&lt;N&gt;/&lt;N&gt;</code> is replaced with <code>&lt;DATE&gt;</code> placeholder.</li>
<li><code>&lt;N&gt;-&lt;N&gt;-&lt;N&gt;T&lt;N&gt;:&lt;N&gt;:&lt;N&gt;</code> and <code>&lt;N&gt;-&lt;N&gt;-&lt;N&gt; &lt;N&gt;:&lt;N&gt;:&lt;N&gt;</code> is replaced with <code>&lt;DATETIME&gt;</code> placeholder. Optional timezone after the datetime is treated as a part of <code>&lt;DATETIME&gt;</code>.</li>
</ul>
<p>For example, the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log message</a>
<code>2edfed59-3e98-4073-bbb2-28d321ca71a7 - [2024/12/08 15:21:02] 10.71.20.32 GET /foo 200</code> is replaced with <code>&lt;UUID&gt; - [&lt;DATETIME&gt;] &lt;IP4&gt; GET /foo &lt;N&gt;</code>
when the following query is executed:</p>
<pre><code class="language-logsql">_time:1h | collapse_nums prettify
</code></pre>
<p>The patterns returned by <code>collapse_nums prettify</code> pipe can be used in <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pattern-match-filter">pattern match filter</a>.</p>
<p><code>collapse_nums</code> can miss some numbers or can collapse unexpected numbers. In this case <a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-collapse_nums">conditional <code>collapse_nums</code></a> can be used
for skipping such values and pre-processing them separately with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code></a>.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-collapse_nums">conditional <code>collapse_nums</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#pattern-match-filter">pattern match filter</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace-pipe"><code>replace</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code></a></li>
</ul>
</div>`},{id:"copy-pipe",value:"copy",title:"copy pipe",description:`<div class='vm-markdown'><p>If some <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> must be copied, then <code>| copy src1 as dst1, ..., srcN as dstN</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used.
For example, the following query copies <code>host</code> field to <code>server</code> for logs over the last 5 minutes, so the output contains both <code>host</code> and <code>server</code> fields:</p>
<pre><code class="language-logsql">_time:5m | copy host as server
</code></pre>
<p>Multiple fields can be copied with a single <code>| copy ...</code> pipe. For example, the following query copies
<a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> field</a> to <code>timestamp</code>, while <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
is copied to <code>message</code>:</p>
<pre><code class="language-logsql">_time:5m | copy _time as timestamp, _msg as message
</code></pre>
<p>The <code>as</code> keyword is optional.</p>
<p><code>cp</code> keyword can be used instead of <code>copy</code> for convenience. For example, <code>_time:5m | cp foo bar</code> is equivalent to <code>_time:5m | copy foo as bar</code>.</p>
<p>It is possible to copy multiple fields with identical prefix to fields with another prefix. For example, the following query copies
all the fields with the prefix <code>foo</code> to fields with the prefix <code>bar</code>:</p>
<pre><code class="language-logsql">_time:5m | copy foo* as bar*
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#rename-pipe"><code>rename</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#delete-pipe"><code>delete</code> pipe</a></li>
</ul>
</div>`},{id:"decolorize-pipe",value:"decolorize",title:"decolorize pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | decolorize &lt;field&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> drops <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI color codes</a>
from the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>&lt;field&gt;</code></a> across all the logs returned by <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax"><code>&lt;q&gt;</code> query</a>.</p>
<p>The <code>&lt;field&gt;</code> may be omitted if ANSI color codes must be dropped from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
For example, the following query drops ANSI color codes from all the <code>_msg</code> fields over the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | decolorize
</code></pre>
<p>This query is equivalent to the following query:</p>
<pre><code class="language-logsql">_time:5m | decolorize _msg
</code></pre>
<p>It is recommended to drop ANSI color codes at the data ingestion stage according to <a href="https://docs.victoriametrics.com/victorialogs/data-ingestion/#decolorizing">these docs</a>.
This simplifies further querying of the logs without the need to apply <code>| decolorize</code> pipe to them.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace-pipe"><code>replace</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code> pipe</a></li>
</ul>
</div>`},{id:"delete-pipe",value:"delete",title:"delete pipe",description:`<div class='vm-markdown'><p>If some <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> must be deleted, then <code>| delete field1, ..., fieldN</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used.
For example, the following query deletes <code>host</code> and <code>app</code> fields from the logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | delete host, app
</code></pre>
<p><code>drop</code>, <code>del</code> and <code>rm</code> keywords can be used instead of <code>delete</code> for convenience. For example, <code>_time:5m | drop host</code> is equivalent to <code>_time:5m | delete host</code>.</p>
<p>It is possible to delete fields with common prefix. For example, the following query deletes all the fields with <code>foo</code> prefix:</p>
<pre><code class="language-logsql">_time:5m | delete foo*
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#rename-pipe"><code>rename</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a></li>
</ul>
</div>`},{id:"drop-empty-fields-pipe",value:"drop_empty_fields",title:"drop_empty_fields pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | drop_empty_fields</code> pipe drops <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a> with empty values from results returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
It also skips log entries with zero non-empty fields.</p>
<p>For example, the following query drops possible empty <code>email</code> field generated by <a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a> if the <code>foo</code> field doesn&#39;t contain email:</p>
<pre><code class="language-logsql">_time:5m | extract &#39;email: &lt;email&gt;,&#39; from foo | drop_empty_fields
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#filter-pipe"><code>filter</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
</ul>
</div>`},{id:"extract-pipe",value:"extract",title:"extract pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | extract &quot;pattern&quot; from field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> extracts text into output fields according to the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-for-extract-pipe-pattern"><code>pattern</code></a> from the given
<a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code></a> returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
Existing log fields remain unchanged after the <code>| extract ...</code> pipe.</p>
<p><code>extract</code> pipe can be useful for extracting additional fields needed for further data processing with other pipes such as <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a> or <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a>.</p>
<p>For example, the following query selects logs with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> for the last day,
extracts IP address from <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> into <code>ip</code> field and then calculates top 10 IP addresses
with the biggest number of logs using <a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a>:</p>
<pre><code class="language-logsql">_time:1d error | extract &quot;ip=&lt;ip&gt; &quot; from _msg | top 10 (ip)
</code></pre>
<p>It is expected that <code>_msg</code> field contains <code>ip=...</code> substring ending with space. For example, <code>error ip=1.2.3.4 from user_id=42</code>.
If there is no such substring in the current <code>_msg</code> field, then the <code>ip</code> output field will be empty.</p>
<p>If the <code>extract</code> pipe is applied to <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>, then the <code>from _msg</code> part can be omitted.
For example, the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:1d error | extract &quot;ip=&lt;ip&gt; &quot; | top 10 (ip)
</code></pre>
<p>If the <code>pattern</code> contains double quotes, then either put <code>\\</code> in front of double quotes or put the <code>pattern</code> inside single quotes.
For example, the following query extracts <code>ip</code> from the corresponding JSON field:</p>
<pre><code class="language-logsql">_time:5m | extract &#39;&quot;ip&quot;:&quot;&lt;ip&gt;&quot;&#39;
</code></pre>
<p>Add <code>keep_original_fields</code> to the end of <code>extract ...</code> when the original non-empty values of the fields mentioned in the pattern must be preserved
instead of overwriting them with the extracted values. For example, the following query extracts <code>&lt;ip&gt;</code> only if the original value for <code>ip</code> field is missing or is empty:</p>
<pre><code class="language-logsql">_time:5m | extract &#39;ip=&lt;ip&gt; &#39; keep_original_fields
</code></pre>
<p>By default <code>extract</code> writes empty matching fields to the output, which may overwrite existing values. Add <code>skip_empty_results</code> to the end of <code>extract ...</code>
in order to prevent overwriting the existing values for the corresponding fields with empty values.
For example, the following query preserves the original <code>ip</code> field value if the <code>foo</code> field doesn&#39;t contain the matching IP:</p>
<pre><code class="language-logsql">_time:5m | extract &#39;ip=&lt;ip&gt; &#39; from foo skip_empty_results
</code></pre>
<p>Performance tip: it is recommended using more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries, which are passed to <code>extract</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-for-extract-pipe-pattern">Format for extract pipe pattern</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-extract">Conditional extract</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract_regexp-pipe"><code>extract_regexp</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_logfmt-pipe"><code>unpack_logfmt</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#split-pipe"><code>split</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>math</code> pipe</a></li>
</ul>
</div>`},{id:"extract-regexp-pipe",value:"extract_regexp",title:"extract_regexp pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | extract_regexp &quot;pattern&quot; from field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> extracts substrings from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code> field</a>
returned from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> according to the provided <code>pattern</code>, and stores them into field names according to the named fields inside the <code>pattern</code>.
The <code>pattern</code> must contain <a href="https://github.com/google/re2/wiki/Syntax">RE2 regular expression</a> with named fields (aka capturing groups) in the form <code>(?P&lt;capture_field_name&gt;...)</code>.
Matching substrings are stored to the given <code>capture_field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>.
For example, the following query extracts ipv4 addresses from <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
and puts them into <code>ip</code> field for logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | extract_regexp &quot;(?P&lt;ip&gt;([0-9]+[.]){3}[0-9]+)&quot; from _msg
</code></pre>
<p>The <code>from _msg</code> part can be omitted if the data extraction is performed from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
So the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | extract_regexp &quot;(?P&lt;ip&gt;([0-9]+[.]){3}[0-9]+)&quot;
</code></pre>
<p>Add <code>keep_original_fields</code> to the end of <code>extract_regexp ...</code> when the original non-empty values of the fields mentioned in the pattern must be preserved
instead of overwriting it with the extracted values. For example, the following query extracts <code>&lt;ip&gt;</code> only if the original value for <code>ip</code> field is missing or is empty:</p>
<pre><code class="language-logsql">_time:5m | extract_regexp &#39;ip=(?P&lt;ip&gt;([0-9]+[.]){3}[0-9]+)&#39; keep_original_fields
</code></pre>
<p>By default <code>extract_regexp</code> writes empty matching fields to the output, which may overwrite existing values. Add <code>skip_empty_results</code> to the end of <code>extract_regexp ...</code>
in order to prevent overwriting the existing values for the corresponding fields with empty values.
For example, the following query preserves the original <code>ip</code> field value if the <code>foo</code> field doesn&#39;t contain the matching IP:</p>
<pre><code class="language-logsql">_time:5m | extract_regexp &#39;ip=(?P&lt;ip&gt;([0-9]+[.]){3}[0-9]+)&#39; from foo skip_empty_results
</code></pre>
<p>Performance tip: it is recommended using <a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a> instead of <code>extract_regexp</code> for achieving higher query performance.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-extract_regexp">Conditional <code>extract_regexp</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
</ul>
</div>`},{id:"facets-pipe",value:"facets",title:"facets pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | facets</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns the most frequent values for every seen <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>
returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>. It also returns an estimated number of hits for every returned <code>field=value</code> pair.</p>
<p>For example, the following query returns the most frequent values for every seen log field across logs with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> over the last hour:</p>
<pre><code class="language-logsql">_time:1h error | facets
</code></pre>
<p>It is possible to specify the number of most frequently seen values to return for each log field by using the <code>facets N</code> syntax. For example,
the following query returns up to 3 most frequently seen values for each field across logs with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> over the last hour:</p>
<pre><code class="language-logsql">_time:1h error | facets 3
</code></pre>
<p>By default <code>facets</code> pipe doesn&#39;t return log fields with too many unique values, since this may require a lot of additional memory to track.
The limit can be changed during the query via <code>max_values_per_field M</code> suffix. For example, the following query returns up to 15 most frequently seen
field values across fields with up to 100000 unique values:</p>
<pre><code class="language-logsql">_time:1h error | facets 15 max_values_per_field 100000
</code></pre>
<p>By default <code>facets</code> pipe doesn&#39;t return log fields with too long values. The limit can be changed during query via <code>max_value_len K</code> suffix.
For example, the following query returns the most frequent values for all the log fields containing values no longer than 100 bytes:</p>
<pre><code class="language-logsql">_time:1h error | facets max_value_len 100
</code></pre>
<p>By default <code>facets</code> pipe doesn&#39;t return log fields, which contain a single constant value across all the selected logs, since such facets aren&#39;t interesting in most cases.
Add <code>keep_const_fields</code> suffix to the <code>facets</code> pipe in order to get such fields:</p>
<pre><code class="language-logsql">_time:1h error | facets keep_const_fields
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#field_names-pipe"><code>field_names</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#field_values-pipe"><code>field_values</code></a></li>
</ul>
</div>`},{id:"field-names-pipe",value:"field_names",title:"field_names pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | field_names</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns all the names of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
with an estimated number of logs for each field name returned from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query returns all the field names with the number of matching logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | field_names
</code></pre>
<p>Field names are returned in arbitrary order. Use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a> in order to sort them if needed.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#field_values-pipe"><code>field_values</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#facets-pipe"><code>facets</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq-pipe"><code>uniq</code> pipe</a></li>
</ul>
</div>`},{id:"field-values-pipe",value:"field_values",title:"field_values pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | field_values field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns all the values for the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code> field</a>
with the number of logs for each value returned from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
For example, the following query returns all the values with the number of matching logs for the field <code>level</code> over logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | field_values level
</code></pre>
<p>It is possible to limit the number of returned values by adding <code>limit N</code> to the end of <code>field_values ...</code>. For example, the following query returns
up to 10 values for the field <code>user_id</code> over logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | field_values user_id limit 10
</code></pre>
<p>If the limit is reached, then the set of returned values is random. Also the number of matching logs for each returned value is zeroed for performance reasons.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#field_names-pipe"><code>field_names</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#facets-pipe"><code>facets</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq-pipe"><code>uniq</code> pipe</a></li>
</ul>
</div>`},{id:"fields-pipe",value:"fields",title:"fields pipe",description:`<div class='vm-markdown'><p>By default all the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> are returned in the response.
It is possible to select the given set of log fields with <code>| fields field1, ..., fieldN</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a>. For example, the following query selects only <code>host</code>
and <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code></a> fields from logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | fields host, _msg
</code></pre>
<p><code>keep</code> can be used instead of <code>fields</code> for convenience. For example, the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | keep host, _msg
</code></pre>
<p>It is possible to use wildcard prefixes in the list of fields to keep. For example, the following query keeps all the fields with names starting with <code>foo</code> prefix,
while drops the rest of the fields:</p>
<pre><code class="language-logsql">_time:5m | fields foo*
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#copy-pipe"><code>copy</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#rename-pipe"><code>rename</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#delete-pipe"><code>delete</code> pipe</a></li>
</ul>
</div>`},{id:"filter-pipe",value:"filter",title:"filter pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | filter ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> filters logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> with the given <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">filter</a>.</p>
<p>For example, the following query returns <code>host</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> values
if the number of log messages with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> for them over the last hour exceeds <code>1_000</code>:</p>
<pre><code class="language-logsql">_time:1h error | stats by (host) count() logs_count | filter logs_count:&gt; 1_000
</code></pre>
<p>It is allowed to use <code>where</code> prefix instead of <code>filter</code> prefix for convenience. For example, the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:1h error | stats by (host) count() logs_count | where logs_count:&gt; 1_000
</code></pre>
<p>It is allowed to omit <code>filter</code> prefix if the used filters do not clash with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe names</a>.
So the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:1h error | stats by (host) count() logs_count | logs_count:&gt; 1_000
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"first-pipe",value:"first",title:"first pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | first N by (fields)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns the first <code>N</code> logs from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> after sorting them
by the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>fields</code></a>.</p>
<p>For example, the following query returns the first 10 logs with the smallest value of <code>request_duration</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a>
over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | first 10 by (request_duration)
</code></pre>
<p>It is possible to return up to <code>N</code> logs individually for each group of logs with the same set of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a>,
by enumerating the set of these fields in <code>partition by (...)</code>.
For example, the following query returns up to 3 logs with the smallest <code>request_duration</code> for each host over the last hour:</p>
<pre><code class="language-logsql">_time:1h | first 3 by (request_duration) partition by (host)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#last-pipe"><code>last</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"format-pipe",value:"format",title:"format pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | format &quot;pattern&quot; as result_field</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> combines <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results according to the <code>pattern</code> and stores it into <code>result_field</code>.</p>
<p>For example, the following query stores <code>request from &lt;ip&gt;:&lt;port&gt;</code> text into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>,
by substituting <code>&lt;ip&gt;</code> and <code>&lt;port&gt;</code> with the corresponding <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a> values:</p>
<pre><code class="language-logsql">_time:5m | format &quot;request from &lt;ip&gt;:&lt;port&gt;&quot; as _msg
</code></pre>
<p>If the result of the <code>format</code> pattern is stored into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>,
then <code>as _msg</code> part can be omitted. The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | format &quot;request from &lt;ip&gt;:&lt;port&gt;&quot;
</code></pre>
<p>String fields can be formatted with the following additional formatting rules:</p>
<ul>
<li><p>The number of seconds in the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#duration-values">duration value</a> - add <code>duration_seconds:</code> in front of the corresponding field name.
The formatted number is fractional if the duration value contains non-zero milliseconds, microseconds or nanoseconds.</p>
</li>
<li><p>JSON-compatible quoted string - add <code>q:</code> in front of the corresponding field name.
For example, the following query generates properly encoded JSON object from <code>_msg</code> and <code>stacktrace</code>
<a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> and stores it into <code>my_json</code> output field:</p>
<pre><code class="language-logsql">_time:5m | format &#39;{&quot;_msg&quot;:&lt;q:_msg&gt;,&quot;stacktrace&quot;:&lt;q:stacktrace&gt;}&#39; as my_json
</code></pre>
</li>
<li><p>Uppercase and lowercase strings - add <code>uc:</code> or <code>lc:</code> in front of the corresponding field name.
For example, the following query stores uppercase value of <code>foo</code> field and lowercase value of <code>bar</code> field in the <code>result</code> field:</p>
<pre><code class="language-logsql">_time:5m | format &#39;uppercase foo: &lt;uc:foo&gt;, lowercase bar: &lt;lc:bar&gt;&#39; as result
</code></pre>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Percent-encoding">URL encoding</a> and decoding (aka <code>percent encoding</code>) - add <code>urlencode:</code> or <code>urldecode:</code>
in front of the corresponding field name. For example, the following query properly encodes <code>user</code> field in the url query arg:</p>
<pre><code class="language-logsql">_time:5m | format &#39;url: http://foo.com/?user=&lt;urlencode:user&gt;&#39;
</code></pre>
</li>
<li><p>Hex encoding and decoding - add <code>hexencode:</code> or <code>hexdecode:</code> in front of the corresponding field name.
For example, the following query hex-encodes <code>password</code> field:</p>
<pre><code class="language-logsql">_time:5m | format &#39;hex-encoded password: &lt;hexencode:password&gt;&#39;
</code></pre>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Base64">Base64 encoding</a> and decoding - add <code>base64encode:</code> or <code>base64decode:</code> in front of the corresponding
field name. For example, the following query base64-encodes <code>password</code> field:</p>
<pre><code class="language-logsql">_time:5m | format &#39;base64-encoded password: &lt;base64encode:password&gt;&#39;
</code></pre>
</li>
<li><p>Converting of hexadecimal number to decimal number - add <code>hexnumdecode:</code> in front of the corresponding field name. For example, <code>format &quot;num=&lt;hexnumdecode:some_hex_field&gt;&quot;</code>.</p>
</li>
</ul>
<p>Numeric fields can be transformed into the following string representation at <code>format</code> pipe:</p>
<ul>
<li><p><a href="https://www.rfc-editor.org/rfc/rfc3339">RFC3339 time</a> - by adding <code>time:</code> in front of the corresponding field name
containing <a href="https://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a>.
The numeric timestamp can be in seconds, milliseconds, microseconds, or nanoseconds  the precision is automatically detected based on the value.
Both integer and floating-point values are supported.
For example, <code>format &quot;time=&lt;time:timestamp&gt;&quot;</code>.</p>
</li>
<li><p>Human-readable duration - by adding <code>duration:</code> in front of the corresponding numeric field name containing duration in nanoseconds.
For example, <code>format &quot;duration=&lt;duration:duration_nsecs&gt;&quot;</code>. The duration can be converted into nanoseconds with the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>math</code> pipe</a>.</p>
</li>
<li><p>IPv4 - by adding <code>ipv4:</code> in front of the corresponding field name containing <code>uint32</code> representation of the IPv4 address.
For example, <code>format &quot;ip=&lt;ipv4:ip_num&gt;&quot;</code>.</p>
</li>
<li><p>Zero-padded 64-bit hex number - by adding <code>hexnumencode:</code> in front of the corresponding field name. For example, <code>format &quot;hex_num=&lt;hexnumencode:some_field&gt;&quot;</code>.</p>
</li>
</ul>
<p>Add <code>keep_original_fields</code> to the end of <code>format ... as result_field</code> when the original non-empty value of the <code>result_field</code> must be preserved
instead of overwriting it with the <code>format</code> results. For example, the following query adds formatted result to <code>foo</code> field only if it was missing or empty:</p>
<pre><code class="language-logsql">_time:5m | format &#39;some_text&#39; as foo keep_original_fields
</code></pre>
<p>Add <code>skip_empty_results</code> to the end of <code>format ...</code> if empty results shouldn&#39;t be written to the output. For example, the following query adds formatted result to <code>foo</code> field
when at least <code>field1</code> or <code>field2</code> aren&#39;t empty, while preserving the original <code>foo</code> value:</p>
<pre><code class="language-logsql">_time:5m | format &quot;&lt;field1&gt;&lt;field2&gt;&quot; as foo skip_empty_results
</code></pre>
<p>Performance tip: it is recommended using more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries, which are passed to <code>format</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-format">Conditional format</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace-pipe"><code>replace</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
</ul>
</div>`},{id:"generate-sequence-pipe",value:"generate_sequence",title:"generate_sequence pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | generate_sequence &lt;N&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> skips all the <code>&lt;q&gt;</code> results and generates <code>&lt;N&gt;</code> output logs
with the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> containing integer sequence starting from 0 and ending at <code>N-1</code>.</p>
<p>This pipe is useful for testing and debugging of the LogsQL pipes. For example, the following query generates 1000 random integers in the range <code>[0..9]</code>
and collects the statistics on the number of hits for each random number:</p>
<pre><code class="language-logsql">* | generate_sequence 1000
    | math round(rand()*10) as rand_num
    | stats by (rand_num) count() hits
    | sort by (rand_num)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>rand()</code> function from <code>math</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
</ul>
</div>`},{id:"hash-pipe",value:"hash",title:"hash pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | hash(field) as result_field</code> calculates hash value for the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field</code></a>
and stores it into the <code>result_field</code>, for every log entry returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query calculates the hash value over <code>user_id</code> field and stores it into <code>user_id_hash</code> field, across logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | hash(user_id) as user_id_hash
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>math</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#filter-pipe"><code>filter</code> pipe</a></li>
</ul>
</div>`},{id:"join-pipe",value:"join",title:"join pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q1&gt; | join by (&lt;fields&gt;) (&lt;q2&gt;)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> joins <code>&lt;q1&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results with the <code>&lt;q2&gt;</code> results by the given set of comma-separated <code>&lt;fields&gt;</code>.
This pipe works in the following way:</p>
<ol>
<li>It executes the <code>&lt;q2&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> and remembers its results.</li>
<li>For each input row from <code>&lt;q1&gt;</code> it searches for matching rows in the <code>&lt;q2&gt;</code> results by the given <code>&lt;fields&gt;</code>.</li>
<li>If the <code>&lt;q2&gt;</code> results have no matching rows, then the input row is sent to the output as is.</li>
<li>If the <code>&lt;q2&gt;</code> results have matching rows, then for each matching row the input row is extended
with new fields seen at the matching row, and the result is sent to the output.</li>
</ol>
<p>This logic is similar to <code>LEFT JOIN</code> in SQL. For example, the following query returns the number of per-user logs across two applications  <code>app1</code> and <code>app2</code> (see
<a href="https://docs.victoriametrics.com/victorialogs/logsql/#stream-filter">stream filters</a> for details on the <code>{...}</code> filter):</p>
<pre><code class="language-logsql">_time:1d {app=&quot;app1&quot;} | stats by (user) count() app1_hits
  | join by (user) (
    _time:1d {app=&quot;app2&quot;} | stats by (user) count() app2_hits
  )
</code></pre>
<p>If you need results similar to <code>INNER JOIN</code> in SQL, then add <code>inner</code> suffix after the <code>join</code> pipe.
For example, the following query returns stats only for users, which exist in both applications <code>app1</code> and <code>app2</code>:</p>
<pre><code class="language-logsql">_time:1d {app=&quot;app1&quot;} | stats by (user) count() app1_hits
  | join by (user) (
    _time:1d {app=&quot;app2&quot;} | stats by (user) count() app2_hits
  ) inner
</code></pre>
<p>It is possible to add a prefix to all the field names returned by the <code>&lt;query&gt;</code> by specifying the needed prefix after the <code>&lt;query&gt;</code>.
For example, the following query adds <code>app2.</code> prefix to all <code>&lt;query&gt;</code> log fields:</p>
<pre><code class="language-logsql">_time:1d {app=&quot;app1&quot;} | stats by (user) count() app1_hits
  | join by (user) (
    _time:1d {app=&quot;app2&quot;} | stats by (user) count() app2_hits
  ) prefix &quot;app2.&quot;
</code></pre>
<p><strong>Performance tips</strong>:</p>
<ul>
<li>Make sure that the <code>&lt;query&gt;</code> in the <code>join</code> pipe returns relatively small number of results, since they are kept in RAM during execution of <code>join</code> pipe.</li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-with-additional-filters">Conditional <code>stats</code></a> is usually faster to execute.
They usually require less RAM than the equivalent <code>join</code> pipe.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#subquery-filter">subquery filter</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-with-additional-filters">conditional <code>stats</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#filter-pipe"><code>filter</code> pipe</a></li>
</ul>
</div>`},{id:"json-array-len-pipe",value:"json_array_len",title:"json_array_len pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | json_array_len(field) as result_field</code> calculates the length of JSON array at the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field</code></a>
and stores it into the <code>result_field</code>, for every log entry returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query returns top 5 logs that contain <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log messages</a>
with the biggest number of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">words</a> across all the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unpack_words _msg as words | json_array_len (words) as words_count | first 5 (words_count desc)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#len-pipe"><code>len</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_words-pipe"><code>unpack_words</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#first-pipe"><code>first</code> pipe</a></li>
</ul>
</div>`},{id:"last-pipe",value:"last",title:"last pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | last N by (fields)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns the last <code>N</code> logs from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> after sorting them
by the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>fields</code></a>.</p>
<p>For example, the following query returns the last 10 logs with the biggest value of <code>request_duration</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a>
over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | last 10 by (request_duration)
</code></pre>
<p>It is possible to return up to <code>N</code> logs individually for each group of logs with the same set of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a>,
by enumerating the set of these fields in <code>partition by (...)</code>.
For example, the following query returns up to 3 logs with the biggest <code>request_duration</code> for each host over the last hour:</p>
<pre><code class="language-logsql">_time:1h | last 3 by (request_duration) partition by (host)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#first-pipe"><code>first</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"len-pipe",value:"len",title:"len pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | len(field) as result</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> stores byte length of the given <code>field</code> value into the <code>result</code> field
across all the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query shows top 5 log entries with the maximum byte length of <code>_msg</code> field across
logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | len(_msg) as msg_len | sort by (msg_len desc) | limit 5
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#json_array_len-pipe"><code>json_array_len</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum_len-stats"><code>sum_len</code> stats function</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#limit-pipe"><code>limit</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#block_stats-pipe"><code>block_stats</code> pipe</a></li>
</ul>
</div>`},{id:"limit-pipe",value:"limit",title:"limit pipe",description:`<div class='vm-markdown'><p>If only a subset of selected logs must be processed, then <code>| limit N</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used, where <code>N</code> can contain any <a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">supported integer numeric value</a>.
For example, the following query returns up to 100 logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | limit 100
</code></pre>
<p><code>head</code> keyword can be used instead of <code>limit</code> for convenience. For example, <code>_time:5m | head 100</code> is equivalent to <code>_time:5m | limit 100</code>.</p>
<p>The <code>N</code> in <code>head N</code> can be omitted - in this case up to 10 matching logs are returned:</p>
<pre><code class="language-logsql">error | head
</code></pre>
<p>By default rows are selected in arbitrary order for performance reasons, so the query above can return different sets of logs every time it is executed.
<a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a> can be used for making sure the logs are in the same order before applying <code>limit ...</code> to them.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sample-pipe"><code>sample</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#offset-pipe"><code>offset</code> pipe</a></li>
</ul>
</div>`},{id:"math-pipe",value:"math",title:"math pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | math ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> performs mathematical calculations over <a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">numeric values</a> of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>. It has the following format:</p>
<pre><code>| math
  expr1 as resultName1,
  ...
  exprN as resultNameN
</code></pre>
<p>Where <code>exprX</code> is one of the supported math expressions mentioned below, while <code>resultNameX</code> is the name of the field to store the calculated result to.
The <code>as</code> keyword is optional. The result name can be omitted. In this case the result is stored to a field with the name equal to string representation
of the corresponding math expression.</p>
<p><code>exprX</code> may reference <code>resultNameY</code> calculated before the given <code>exprX</code>.</p>
<p>For example, the following query divides <code>duration_msecs</code> field value by 1000, then rounds it to integer and stores the result in the <code>duration_secs</code> field:</p>
<pre><code class="language-logsql">_time:5m | math round(duration_msecs / 1000) as duration_secs
</code></pre>
<p>The following mathematical operations are supported by <code>math</code> pipe:</p>
<ul>
<li><code>arg1 + arg2</code> - returns the sum of <code>arg1</code> and <code>arg2</code></li>
<li><code>arg1 - arg2</code> - returns the difference between <code>arg1</code> and <code>arg2</code></li>
<li><code>arg1 * arg2</code> - multiplies <code>arg1</code> by <code>arg2</code></li>
<li><code>arg1 / arg2</code> - divides <code>arg1</code> by <code>arg2</code></li>
<li><code>arg1 % arg2</code> - returns the remainder of the division of <code>arg1</code> by <code>arg2</code></li>
<li><code>arg1 ^ arg2</code> - returns the power of <code>arg1</code> by <code>arg2</code></li>
<li><code>arg1 &amp; arg2</code> - returns bitwise <code>and</code> for <code>arg1</code> and <code>arg2</code>. It is expected that <code>arg1</code> and <code>arg2</code> are in the range <code>[0 .. 2^53-1]</code></li>
<li><code>arg1 or arg2</code> - returns bitwise <code>or</code> for <code>arg1</code> and <code>arg2</code>. It is expected that <code>arg1</code> and <code>arg2</code> are in the range <code>[0 .. 2^53-1]</code></li>
<li><code>arg1 xor arg2</code> - returns bitwise <code>xor</code> for <code>arg1</code> and <code>arg2</code>. It is expected that <code>arg1</code> and <code>arg2</code> are in the range <code>[0 .. 2^53-1]</code></li>
<li><code>arg1 default arg2</code> - returns <code>arg2</code> if <code>arg1</code> is non-<a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">numeric</a> or equals <code>NaN</code></li>
<li><code>abs(arg)</code> - returns an absolute value for the given <code>arg</code></li>
<li><code>ceil(arg)</code> - returns the least integer value greater than or equal to <code>arg</code></li>
<li><code>exp(arg)</code> - powers <a href="https://en.wikipedia.org/wiki/E_(mathematical_constant)"><code>e</code></a> by <code>arg</code></li>
<li><code>floor(arg)</code> - returns the greatest integer value less than or equal to <code>arg</code></li>
<li><code>ln(arg)</code> - returns <a href="https://en.wikipedia.org/wiki/Natural_logarithm">natural logarithm</a> for the given <code>arg</code></li>
<li><code>max(arg1, ..., argN)</code> - returns the maximum value among the given <code>arg1</code>, ..., <code>argN</code></li>
<li><code>min(arg1, ..., argN)</code> - returns the minimum value among the given <code>arg1</code>, ..., <code>argN</code></li>
<li><code>now()</code> - returns the current <a href="https://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a> in nanoseconds.</li>
<li><code>rand()</code> - returns pseudo-random number in the range <code>[0...1)</code>.</li>
<li><code>round(arg)</code> - returns rounded to integer value for the given <code>arg</code>. The <code>round()</code> accepts optional <code>nearest</code> arg, which allows rounding the number to the given <code>nearest</code> multiple.
For example, <code>round(temperature, 0.1)</code> rounds <code>temperature</code> field to one decimal digit after the point.</li>
</ul>
<p>Every <code>argX</code> argument in every mathematical operation can contain one of the following values:</p>
<ul>
<li>The name of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>. For example, <code>errors_total / requests_total</code>.
The log field is parsed into numeric value if it contains <a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">supported numeric value</a>. The log field is parsed into <a href="https://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a>
in nanoseconds if it contains <a href="https://www.rfc-editor.org/rfc/rfc3339">rfc3339 time</a>. The log field is parsed into <code>uint32</code> number if it contains IPv4 address.
The log field is parsed into <code>NaN</code> in other cases.</li>
<li>Any <a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">supported numeric value</a>, <a href="https://www.rfc-editor.org/rfc/rfc3339">rfc3339 time</a> or IPv4 address. For example, <code>1MiB</code>, <code>&quot;2024-05-15T10:20:30.934324Z&quot;</code> or <code>&quot;12.34.56.78&quot;</code>.</li>
<li>Another mathematical expression, which can be put inside <code>(...)</code>. For example, <code>(a + b) * c</code>.</li>
</ul>
<p>The parsed time, duration and IPv4 address can be converted back to string representation after math transformations with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-pipe"><code>format</code> pipe</a>. For example,
the following query rounds the <code>request_duration</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> to seconds before converting it back to string representation:</p>
<pre><code class="language-logsql">_time:5m | math round(request_duration, 1e9) as request_duration_nsecs | format &#39;&lt;duration:request_duration_nsecs&gt;&#39; as request_duration
</code></pre>
<p>The <code>eval</code> keyword can be used instead of <code>math</code> for convenience. For example, the following query calculates <code>duration_msecs</code> field
by multiplying <code>duration_secs</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> to <code>1000</code>:</p>
<pre><code class="language-logsql">_time:5m | eval (duration_secs * 1000) as duration_msecs
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-pipe"><code>format</code> pipe</a></li>
</ul>
</div>`},{id:"offset-pipe",value:"offset",title:"offset pipe",description:`<div class='vm-markdown'><p>If some selected logs must be skipped after <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code></a>, then <code>| offset N</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used, where <code>N</code> can contain any <a href="https://docs.victoriametrics.com/victorialogs/logsql/#numeric-values">supported integer numeric value</a>.
For example, the following query skips the first 100 logs over the last 5 minutes after sorting them by <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code></a>:</p>
<pre><code class="language-logsql">_time:5m | sort by (_time) | offset 100
</code></pre>
<p><code>skip</code> keyword can be used instead of <code>offset</code> keyword for convenience. For example, <code>_time:5m | skip 10</code> is equivalent to <code>_time:5m | offset 10</code>.</p>
<p>Note that skipping rows without sorting makes little sense, since they can be returned in arbitrary order for performance reasons.
Rows can be sorted with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a>.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#limit-pipe"><code>limit</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"pack-json-pipe",value:"pack_json",title:"pack_json pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | pack_json as field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> packs all the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a> of every log
entry returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> into JSON object and stores it as a string in the given <code>field_name</code>.</p>
<p>For example, the following query packs all the fields into JSON object and stores it into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
for logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | pack_json as _msg
</code></pre>
<p>The <code>as _msg</code> part can be omitted if packed JSON object is stored into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | pack_json
</code></pre>
<p>If only a subset of fields must be packed into JSON, then it must be listed inside <code>fields (...)</code> after <code>pack_json</code>. For example, the following query builds JSON with <code>foo</code> and <code>bar</code> fields
only and stores the result in <code>baz</code> field:</p>
<pre><code class="language-logsql">_time:5m | pack_json fields (foo, bar) as baz
</code></pre>
<p>It is possible to pass field prefixes into <code>fields (...)</code> in order to pack only the fields, which start with the given prefixes.
For example, the following query builds JSON with all the fields, which start with either <code>foo.</code> or <code>bar.</code>:</p>
<pre><code class="language-logsql">_time:5m | pack_json fields (foo.*, bar.*) as baz
</code></pre>
<p>The <code>pack_json</code> doesn&#39;t modify or delete other fields. If you do not need them, then add <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>| fields ...</code></a> after the <code>pack_json</code> pipe. For example, the following query
leaves only the <code>foo</code> field with the original log fields packed into JSON:</p>
<pre><code class="language-logsql">_time:5m | pack_json as foo | fields foo
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#pack_logfmt-pipe"><code>pack_logfmt</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
</ul>
</div>`},{id:"pack-logfmt-pipe",value:"pack_logfmt",title:"pack_logfmt pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | pack_logfmt as field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> packs all the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a> for every log entry
returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> into <a href="https://brandur.org/logfmt">logfmt</a> message and stores it as a string in the given <code>field_name</code>.</p>
<p>For example, the following query packs all the fields into <a href="https://brandur.org/logfmt">logfmt</a> message and stores it
into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> for logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | pack_logfmt as _msg
</code></pre>
<p>The <code>as _msg</code> part can be omitted if packed message is stored into <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | pack_logfmt
</code></pre>
<p>If only a subset of fields must be packed into <a href="https://brandur.org/logfmt">logfmt</a>, then it must be listed inside <code>fields (...)</code> after <code>pack_logfmt</code>.
For example, the following query builds <a href="https://brandur.org/logfmt">logfmt</a> message with <code>foo</code> and <code>bar</code> fields only and stores the result in <code>baz</code> field:</p>
<pre><code class="language-logsql">_time:5m | pack_logfmt fields (foo, bar) as baz
</code></pre>
<p>It is possible to pass field prefixes into <code>fields (...)</code> in order to pack only the fields, which start with the given prefixes.
For example, the following query builds <code>logfmt</code> message with all the fields, which start with either <code>foo.</code> or <code>bar.</code>:</p>
<pre><code class="language-logsql">_time:5m | pack_logfmt fields (foo.*, bar.*) as baz
</code></pre>
<p>The <code>pack_logfmt</code> doesn&#39;t modify or delete other fields. If you do not need them, then add <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>| fields ...</code></a> after the <code>pack_logfmt</code> pipe. For example, the following query
leaves only the <code>foo</code> field with the original log fields packed into <a href="https://brandur.org/logfmt">logfmt</a>:</p>
<pre><code class="language-logsql">_time:5m | pack_logfmt as foo | fields foo
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#pack_json-pipe"><code>pack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_logfmt-pipe"><code>unpack_logfmt</code> pipe</a></li>
</ul>
</div>`},{id:"query-stats-pipe",value:"query_stats",title:"query_stats pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | query_stats</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns the following execution statistics for the given <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query <code>&lt;q&gt;</code></a>:</p>
<ul>
<li><code>BytesReadColumnsHeaders</code> - the number of bytes read from disk for column headers. Use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a> for reducing the number of bytes read for column headers.</li>
<li><code>BytesReadColumnsHeaderIndexes</code> - the number of bytes read from disk for column header indexes.</li>
<li><code>BytesReadBloomFilters</code> - the number of bytes read from disk for bloom filters.</li>
<li><code>BytesReadValues</code> - the number of bytes read from disk for <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>.
 Use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a> for reducing the number of bytes read for log field values.</li>
<li><code>BytesReadTimestamps</code> - the number of bytes read from disk for <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> field</a>.</li>
<li><code>BytesReadBlockHeaders</code> - the number of bytes read from disk for block headers.</li>
<li><code>BytesReadTotal</code> - the total number of bytes read from disk.</li>
<li><code>BlocksProcessed</code> - the number of data blocks processed during query execution. Use more narrow <a href="https://docs.victoriametrics.com/victorialogs/logsql/#time-filter">time filter</a> and <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stream-filter">log stream filter</a>
for reducing the number of data blocks processed.</li>
<li><code>RowsProcessed</code> - the number of log entries processed during query execution. Use more narrow <a href="https://docs.victoriametrics.com/victorialogs/logsql/#time-filter">time filter</a> and <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stream-filter">log stream filter</a>
for reducing the number of processed log entries.</li>
<li><code>RowsFound</code> - the number of log entries found by the query.</li>
<li><code>ValuesRead</code> - the number of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field values</a> read during query processing.
Use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a> for reducing the number of field values read.</li>
<li><code>TimestampsRead</code> - the number of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> fields</a> read during query processing.</li>
<li><code>BytesProcessedUncompressedValues</code> - the number of uncompressed bytes for <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field values</a>,
which are processed during query execution.</li>
<li><code>QueryDurationNsecs</code> - the duration of the query in nanoseconds. It can be used for calculating various rates over the query stats with the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>math</code> pipe</a>.</li>
</ul>
<p>This pipe is useful for investigation and optimizing slow queries.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#block_stats-pipe"><code>block_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#troubleshooting">query troubleshooting</a></li>
</ul>
</div>`},{id:"rename-pipe",value:"rename",title:"rename pipe",description:`<div class='vm-markdown'><p>If some <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> must be renamed, then <code>| rename src1 as dst1, ..., srcN as dstN</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used.
For example, the following query renames <code>host</code> field to <code>server</code> for logs over the last 5 minutes, so the output contains <code>server</code> field instead of <code>host</code> field:</p>
<pre><code class="language-logsql">_time:5m | rename host as server
</code></pre>
<p>Multiple fields can be renamed with a single <code>| rename ...</code> pipe. For example, the following query renames <code>host</code> to <code>instance</code> and <code>app</code> to <code>job</code>:</p>
<pre><code class="language-logsql">_time:5m | rename host as instance, app as job
</code></pre>
<p>The <code>as</code> keyword is optional.</p>
<p><code>mv</code> keyword can be used instead of <code>rename</code> keyword for convenience. For example, <code>_time:5m | mv foo bar</code> is equivalent to <code>_time:5m | rename foo as bar</code>.</p>
<p>It is possible to rename multiple fields with the given prefix to fields with another prefix. For example, the following query renames all the fields
starting with <code>foo</code> prefix to fields starting with <code>bar</code> prefix:</p>
<pre><code class="language-logsql">_time:5m | rename foo* as bar*
</code></pre>
<p>It is also possible to remove the common prefix from some fields. For example, the following query removes the <code>foo</code> prefix from all the fields that start with <code>foo</code>:</p>
<pre><code class="language-logsql">_time:5m | rename foo* as *
</code></pre>
<p>It is also possible to add a common prefix to all the fields. For example, the following query adds the <code>foo</code> prefix to all the fields:</p>
<pre><code class="language-logsql">_time:5m | rename * as foo*
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#copy-pipe"><code>copy</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#delete-pipe"><code>delete</code> pipe</a></li>
</ul>
</div>`},{id:"replace-pipe",value:"replace",title:"replace pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | replace (&quot;old&quot;, &quot;new&quot;) at field</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> replaces all the occurrences of the <code>old</code> substring with the <code>new</code> substring
in the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field</code></a> over all the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query replaces all the <code>secret-password</code> substrings with <code>***</code> in the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
for logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | replace (&quot;secret-password&quot;, &quot;***&quot;) at _msg
</code></pre>
<p>The <code>at _msg</code> part can be omitted if the replacement occurs in the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | replace (&quot;secret-password&quot;, &quot;***&quot;)
</code></pre>
<p>The number of replacements can be limited with <code>limit N</code> at the end of <code>replace</code>. For example, the following query replaces only the first <code>foo</code> substring with <code>bar</code>
at the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a> <code>baz</code>:</p>
<pre><code class="language-logsql">_time:5m | replace (&#39;foo&#39;, &#39;bar&#39;) at baz limit 1
</code></pre>
<p>Performance tip: it is recommended using more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries, which are passed to <code>replace</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-replace">Conditional replace</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace_regexp-pipe"><code>replace_regexp</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#collapse_nums-pipe"><code>collapse_nums</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-pipe"><code>format</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
</ul>
</div>`},{id:"replace-regexp-pipe",value:"replace_regexp",title:"replace_regexp pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | replace_regexp (&quot;regexp&quot;, &quot;replacement&quot;) at field</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> replaces all the substrings matching the given <code>regexp</code> with the given <code>replacement</code>
in the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field</code></a> over all the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>The <code>regexp</code> must contain regular expression with <a href="https://github.com/google/re2/wiki/Syntax">RE2 syntax</a>.
The <code>replacement</code> may contain <code>$N</code> or <code>\${N}</code> placeholders, which are substituted with the <code>N-th</code> capturing group in the <code>regexp</code>.</p>
<p>For example, the following query replaces all the substrings starting with <code>host-</code> and ending with <code>-foo</code> with the contents between <code>host-</code> and <code>-foo</code> in the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> for logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | replace_regexp (&quot;host-(.+?)-foo&quot;, &quot;$1&quot;) at _msg
</code></pre>
<p>The <code>at _msg</code> part can be omitted if the replacement occurs in the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | replace_regexp (&quot;host-(.+?)-foo&quot;, &quot;$1&quot;)
</code></pre>
<p>The number of replacements can be limited with <code>limit N</code> at the end of <code>replace_regexp</code>. For example, the following query replaces only the first <code>password: ...</code> substring
ending with whitespace with empty substring at the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a> <code>baz</code>:</p>
<pre><code class="language-logsql">_time:5m | replace_regexp (&#39;password: [^ ]+&#39;, &#39;&#39;) at baz limit 1
</code></pre>
<p>Performance tips:</p>
<ul>
<li>It is recommended to use the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace-pipe"><code>replace</code> pipe</a> instead of <code>replace_regexp</code> if possible, since it works faster.</li>
<li>It is recommended to use more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries that are passed to <code>replace_regexp</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-replace_regexp">Conditional replace_regexp</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#replace-pipe"><code>replace</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#collapse_nums-pipe"><code>collapse_nums</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-pipe"><code>format</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#decolorize-pipe"><code>decolorize</code> pipe</a></li>
</ul>
</div>`},{id:"running-stats-pipe",value:"running_stats",title:"running_stats pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | running_stats ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> calculates running stats (such as <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-running_stats">running count</a> or <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-running_stats">running sum</a>)
over the specified <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>
and stores the stats in the specified log fields for each input log entry.</p>
<p>The running stats is calculated over the logs sorted by time, so the <code>&lt;q&gt;</code> must return the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> field</a>
in order to properly calculate the running stats.</p>
<p>The <code>running_stats</code> pipe puts all the logs returned by <code>&lt;q&gt;</code> in memory, so make sure the <code>&lt;q&gt;</code> returns the limited number of logs in order to avoid high memory usage.</p>
<p>For example, the following LogsQL query calculates <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-running_stats">running sum</a> for the <code>hits</code> field over the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | running_stats sum(hits) as running_hits
</code></pre>
<p>The <code>| running_stats ...</code> pipe has the following basic format:</p>
<pre><code class="language-logsql">... | running_stats
  stats_func1(...) as result_name1,
  ...
  stats_funcN(...) as result_nameN
</code></pre>
<p>Where <code>stats_func*</code> is any of the supported <a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-pipe-functions">running stats function</a>, while the <code>result_name*</code> is the name of the log field
to store the result of the corresponding stats function. The <code>as</code> keyword is optional.</p>
<p>For example, the following query calculates the following running stats for logs over the last 5 minutes:</p>
<ul>
<li>the number of logs with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-running_stats"><code>count</code> function</a>;</li>
<li>the sum of <code>hits</code> field with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-running_stats"><code>sum</code> function</a>:</li>
</ul>
<pre><code class="language-logsql">_time:5m
    | running_stats
        count() as running_logs,
        sum(hits) as running_hits
</code></pre>
<p>It is allowed omitting the result name. In this case the result name equals the string representation of the used <a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-pipe-functions">running stats function</a>.
For example, the following query returns the same stats as the previous one, but gives <code>count()</code> and <code>sum(hits)</code> names for the returned fields:</p>
<pre><code class="language-logsql">_time:5m | running_stats count(), sum(hits)
</code></pre>
<p>It is useful to combine <code>running_stats</code> with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-time-buckets">stats by time buckets</a>. For example, the following query returns per-hour number of logs over the last day,
plus running number of logs.</p>
<pre><code class="language-logsql">_time:1d
    | stats by (_time:hour) count() as hits
    | running_stats sum(hits) as running_hits
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-pipe-functions"><code>running_stats</code> pipe functions</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-by-fields"><code>running_stats</code> by fields</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-pipe"><code>total_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"sample-pipe",value:"sample",title:"sample pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | sample N</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns <code>1/N</code>th random sample of logs for the <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
For example, the following query returns ~1% (1/100th random sample) of logs over the last hour with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a>
in the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>:</p>
<pre><code class="language-logsql">_time:1h error | sample 100
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#limit-pipe"><code>limit</code> pipe</a></li>
</ul>
</div>`},{id:"set-stream-fields-pipe",value:"set_stream_fields",title:"set_stream_fields pipe",description:`<div class='vm-markdown'><p>The <code>| set_stream_fields field1, ..., fieldN</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a>
sets the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
as <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields"><code>_stream</code> fields</a>.</p>
<p>For example, if the logs returned by <code>_time:5m</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">filter</a> have <code>host=&quot;foo&quot;</code> and <code>path=&quot;/bar&quot;</code> fields,
then the following query sets <code>_stream</code> field to <code>{host=&quot;foo&quot;, path=&quot;/bar&quot;}</code>:</p>
<pre><code class="language-logsql">_time:5m | set_stream_fields host, path
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-set_stream_fields">conditional <code>set_stream_fields</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#format-pipe"><code>format</code> pipe</a></li>
</ul>
</div>`},{id:"sort-pipe",value:"sort",title:"sort pipe",description:`<div class='vm-markdown'><p>By default logs are selected in arbitrary order for performance reasons. If logs must be sorted, then <code>&lt;q&gt; | sort by (field1, ..., fieldN)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used
for sorting logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> by the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a>
using <a href="https://en.wikipedia.org/wiki/Natural_sort_order">natural sorting</a>.</p>
<p>For example, the following query returns logs for the last 5 minutes sorted by <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields"><code>_stream</code></a>
and then by <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code></a>:</p>
<pre><code class="language-logsql">_time:5m | sort by (_stream, _time)
</code></pre>
<p>Add <code>desc</code> after the given log field in order to sort in reverse order of this field. For example, the following query sorts logs in reverse order of <code>request_duration_seconds</code> field:</p>
<pre><code class="language-logsql">_time:5m | sort by (request_duration_seconds desc)
</code></pre>
<p>The reverse order can be applied globally via <code>desc</code> keyword after <code>by(...)</code> clause:</p>
<pre><code class="language-logsql">_time:5m | sort by (foo, bar) desc
</code></pre>
<p>The <code>by</code> keyword can be skipped in <code>sort ...</code> pipe. For example, the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | sort (foo, bar) desc
</code></pre>
<p>The <code>order</code> alias can be used instead of <code>sort</code>, so the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | order by (foo, bar) desc
</code></pre>
<p>Sorting a large number of logs can consume a lot of CPU time and memory. Sometimes it is enough to return the first <code>N</code> entries with the biggest
or the smallest values. This can be done by adding <code>limit N</code> to the end of <code>sort ...</code> pipe.
Such a query consumes less memory when sorting a large number of logs, since it keeps in memory only <code>N</code> log entries.
For example, the following query returns top 10 log entries with the biggest values
for the <code>request_duration</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> during the last hour:</p>
<pre><code class="language-logsql">_time:1h | sort by (request_duration desc) limit 10
</code></pre>
<p>This query is equivalent to the following one, which uses <a href="https://docs.victoriametrics.com/victorialogs/logsql/#last-pipe"><code>last</code> pipe</a>:</p>
<pre><code class="language-logsql">_time:1h | last 10 by (request_duration)
</code></pre>
<p>If the first <code>N</code> sorted results must be skipped, then <code>offset N</code> can be added to <code>sort</code> pipe. For example,
the following query skips the first 10 logs with the biggest <code>request_duration</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a>,
and then returns the next 20 sorted logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:1h | sort by (request_duration desc) offset 10 limit 20
</code></pre>
<p>It is possible to sort the logs and apply the <code>limit</code> individually for each group of logs with the same set of <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a>,
by enumerating the set of these fields in <code>partition by (...)</code>.
For example, the following query returns up to 3 logs with the biggest <code>request_duration</code> for each host over the last hour:</p>
<pre><code class="language-logsql">_time:1h | sort by (request_duration desc) partition by (host) limit 3
</code></pre>
<p>It is possible to return a rank (sort order number) for every sorted log by adding <code>rank as &lt;fieldName&gt;</code> to the end of the <code>| sort ...</code> pipe.
For example, the following query stores rank for sorted by <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code></a> logs
into <code>position</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a>:</p>
<pre><code class="language-logsql">_time:5m | sort by (_time) rank as position
</code></pre>
<p>Note that sorting a large number of logs can be slow and can consume a lot of additional memory.
It is recommended to limit the number of logs before sorting with the following approaches:</p>
<ul>
<li>Adding <code>limit N</code> to the end of <code>sort ...</code> pipe.</li>
<li>Reducing the selected time range with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#time-filter">time filter</a>.</li>
<li>Using more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">filters</a>, so they select less logs.</li>
<li>Limiting the number of selected <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">fields</a> via <a href="https://docs.victoriametrics.com/victorialogs/logsql/#fields-pipe"><code>fields</code> pipe</a>.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#first-pipe"><code>first</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#last-pipe"><code>last</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#limit-pipe"><code>limit</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#offset-pipe"><code>offset</code> pipe</a></li>
</ul>
</div>`},{id:"split-pipe",value:"split",title:"split pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | split &lt;separator&gt; from &lt;src_field&gt; as &lt;dst_field&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> splits <code>&lt;src_field&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>
obtained from <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results into <code>&lt;dst_field&gt;</code> as a JSON array, by using the given <code>&lt;separator&gt;</code>.</p>
<p>For example, the following query splits <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log messages</a> by <code>,</code> and stores the results into <code>items</code> field:</p>
<pre><code class="language-logsql">_time:5m | split &quot;,&quot; from _msg as items
</code></pre>
<p>The <code>as &lt;dst_field&gt;</code> part is optional. If it is missing, then the result is stored in the <code>&lt;src_field&gt;</code> specified in <code>from &lt;src_field&gt;</code>.
For example, the following query stores the split result into <code>_msg</code> field:</p>
<pre><code class="language-logsql">_time:5m | split &quot;,&quot; from _msg
</code></pre>
<p>The <code>from &lt;src_field&gt;</code> part is optional. If it is missing, then the <code>_msg</code> field is used as a source field. The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | split &quot;,&quot;
</code></pre>
<p>It is convenient to use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unroll-pipe"><code>unroll</code> pipe</a> for unrolling the JSON array with the split results.
For example, the following query returns top 5 most frequently seen comma-separated items across <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log messages</a>
for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | split &quot;,&quot; as items | unroll items | top 5 (items)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unroll-pipe"><code>unroll</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_words-pipe"><code>unpack_words</code> pipe</a></li>
</ul>
</div>`},{id:"stats-pipe",value:"stats",title:"stats pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | stats ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> calculates various stats over the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
For example, the following LogsQL query uses <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-stats"><code>count</code> stats function</a> for calculating the number of logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | stats count() as logs_total
</code></pre>
<p>The <code>| stats ...</code> pipe has the following basic format:</p>
<pre><code class="language-logsql">... | stats
  stats_func1(...) as result_name1,
  ...
  stats_funcN(...) as result_nameN
</code></pre>
<p>Where <code>stats_func*</code> is any of the supported <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe-functions">stats function</a>, while the <code>result_name*</code> is the name of the log field
to store the result of the corresponding stats function. The <code>as</code> keyword is optional.</p>
<p>For example, the following query calculates the following stats for logs over the last 5 minutes:</p>
<ul>
<li>the number of logs with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-stats"><code>count</code> stats function</a>;</li>
<li>the number of unique <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields">log streams</a> with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count_uniq-stats"><code>count_uniq</code> stats function</a>:</li>
</ul>
<pre><code class="language-logsql">_time:5m | stats count() logs_total, count_uniq(_stream) streams_total
</code></pre>
<p>It is allowed omitting <code>stats</code> prefix for convenience. So the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | count() logs_total, count_uniq(_stream) streams_total
</code></pre>
<p>It is allowed omitting the result name. In this case the result name equals the string representation of the used <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe-functions">stats function</a>.
For example, the following query returns the same stats as the previous one, but gives <code>count()</code> and <code>count_uniq(_stream)</code> names for the returned fields:</p>
<pre><code class="language-logsql">_time:5m | count(), count_uniq(_stream)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe-functions">stats pipe functions</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-fields">stats by fields</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-time-buckets">stats by time buckets</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-time-buckets-with-timezone-offset">stats by time buckets with timezone offset</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-field-buckets">stats by field buckets</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-ipv4-buckets">stats by IPv4 buckets</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-with-additional-filters">stats with additional filters</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-pipe"><code>running_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-pipe"><code>total_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#math-pipe"><code>math</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq-pipe"><code>uniq</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#join-pipe"><code>join</code> pipe</a></li>
</ul>
</div>`},{id:"stream-context-pipe",value:"stream_context",title:"stream_context pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | stream_context ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> allows selecting surrounding logs in a <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields">log stream</a>
across the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> in the way similar to <code>grep -A</code> / <code>grep -B</code>.
The returned log chunks are delimited with <code>---</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log message</a> for easier investigation.</p>
<p>For example, the following query returns up to 10 additional logs after every log message with the <code>panic</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> across all the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m panic | stream_context after 10
</code></pre>
<p>The following query returns up to 5 additional logs in front of every log message with the <code>stacktrace</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> across all the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m stacktrace | stream_context before 5
</code></pre>
<p>The following query returns up to 2 logs in front of the log message with the <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> and up to 5 logs after this log message
across all the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m error | stream_context before 2 after 5
</code></pre>
<p>By default <code>stream_context</code> pipe looks for surrounding logs in a one-hour window. This window can be changed via the <code>time_window</code> option at query time.
For example, the following query searches for surrounding logs in a one-week window:</p>
<pre><code class="language-logsql">_time:5m error | stream_context before 10 time_window 1w
</code></pre>
<p>The <code>| stream_context</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> must go first just after the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">filters</a>.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stream-filter">stream filter</a></li>
</ul>
</div>`},{id:"time-add-pipe",value:"time_add",title:"time_add pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | time_add &lt;duration&gt;</code> adds the given <code>&lt;duration&gt;</code> to the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> field</a>.
The <code>&lt;duration&gt;</code> can be in any format described <a href="https://docs.victoriametrics.com/victorialogs/logsql/#duration-values">here</a>.</p>
<p>For example, the following query adds one hour to <code>_time</code> field in the selected logs:</p>
<pre><code class="language-logsql">_time:5m | time_add 1h
</code></pre>
<p>Specify negative duration for subtracting it from the <code>_time</code> field:</p>
<pre><code class="language-logsql">_time:5m | time_add -1h
</code></pre>
<p>Add <code>at &lt;field_name&gt;</code> to the end of the <code>time_add</code> pipe in order to add the given <code>&lt;duration&gt;</code> to the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>
with the given <code>&lt;field_name&gt;</code>. For example, the following query adds one week to the field <code>transaction_time</code>:</p>
<pre><code class="language-logsql">_time:5m | time_add 1w at transaction_time
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#time-filter"><code>_time</code> filter</a>.</li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-options"><code>time_offset</code> option</a>.</li>
</ul>
</div>`},{id:"top-pipe",value:"top",title:"top pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | top N by (field1, ..., fieldN)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns top <code>N</code> sets for <code>(field1, ..., fieldN)</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
with the maximum number of matching log entries across logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.</p>
<p>For example, the following query returns top 7 <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#stream-fields">log streams</a>
with the maximum number of log entries over the last 5 minutes. The number of entries is returned in the <code>hits</code> field:</p>
<pre><code class="language-logsql">_time:5m | top 7 by (_stream)
</code></pre>
<p>The <code>N</code> is optional. If it is skipped, then top 10 entries are returned. For example, the following query returns top 10 values
for <code>ip</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">field</a> seen in logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | top by (ip)
</code></pre>
<p>It is possible to give another name for the <code>hits</code> field via <code>hits as &lt;new_name&gt;</code> syntax. For example, the following query returns top per-<code>path</code> hits in the <code>visits</code> field:</p>
<pre><code class="language-logsql">_time:5m | top by (path) hits as visits
</code></pre>
<p>It is possible to set a <code>rank</code> field for each returned entry for the <code>top</code> pipe by adding <code>rank</code>. For example, the following query sets the <code>rank</code> field for each returned <code>ip</code>:</p>
<pre><code class="language-logsql">_time:5m | top 10 by (ip) rank
</code></pre>
<p>The <code>rank</code> field can have other name. For example, the following query uses the <code>position</code> field name instead of <code>rank</code> field name in the output:</p>
<pre><code class="language-logsql">_time:5m | top 10 by (ip) rank as position
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#first-pipe"><code>first</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#last-pipe"><code>last</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#facets-pipe"><code>facets</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq-pipe"><code>uniq</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#histogram-stats"><code>histogram</code> stats function</a></li>
</ul>
</div>`},{id:"total-stats-pipe",value:"total_stats",title:"total_stats pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | total_stats ...</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> calculates total (global) stats (such as <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-total_stats">global count</a> or <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-total_stats">global sum</a>)
over the specified <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>
and stores these stats in the specified log fields for each input log entry.</p>
<p>The total stats is calculated over the logs sorted by time, so the <code>&lt;q&gt;</code> must return the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#time-field"><code>_time</code> field</a>
in order to properly calculate the total stats.</p>
<p>The <code>total_stats</code> pipe puts all the logs returned by <code>&lt;q&gt;</code> in memory, so make sure the <code>&lt;q&gt;</code> returns the limited number of logs in order to avoid high memory usage.</p>
<p>For example, the following LogsQL query calculates <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-total_stats">total sum</a> for the <code>hits</code> field over the logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | total_stats sum(hits) as total_hits
</code></pre>
<p>The <code>| total_stats ...</code> pipe has the following basic format:</p>
<pre><code class="language-logsql">... | total_stats
  stats_func1(...) as result_name1,
  ...
  stats_funcN(...) as result_nameN
</code></pre>
<p>Where <code>stats_func*</code> is any of the supported <a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-pipe-functions">total stats function</a>, while the <code>result_name*</code> is the name of the log field
to store the result of the corresponding stats function. The <code>as</code> keyword is optional.</p>
<p>For example, the following query calculates the following total stats for logs over the last 5 minutes:</p>
<ul>
<li>the number of logs with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#count-total_stats"><code>count</code> function</a>;</li>
<li>the sum of <code>hits</code> field with the help of <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sum-total_stats"><code>sum</code> function</a>:</li>
</ul>
<pre><code class="language-logsql">_time:5m
    | total_stats
        count() as total_logs,
        sum(hits) as total_hits
</code></pre>
<p>It is allowed omitting the result name. In this case the result name equals the string representation of the used <a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-pipe-functions">total stats function</a>.
For example, the following query returns the same stats as the previous one, but gives <code>count()</code> and <code>sum(hits)</code> names for the returned fields:</p>
<pre><code class="language-logsql">_time:5m | total_stats count(), sum(hits)
</code></pre>
<p>It is useful to combine <code>total_stats</code> with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-by-time-buckets">stats by time buckets</a>. For example, the following query returns per-hour number of logs over the last day,
plus the total number of logs, and then calculates the per-hour percent of hits over the daily hits.</p>
<pre><code class="language-logsql">_time:1d
    | stats by (_time:hour) count() as hits
    | total_stats sum(hits) as total_hits
    | math round((hits / total_hits)*100) as hits_percent
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-pipe-functions"><code>total_stats</code> pipe functions</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#total_stats-by-fields"><code>total_stats</code> by fields</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#running_stats-pipe"><code>running_stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a></li>
</ul>
</div>`},{id:"union-pipe",value:"union",title:"union pipe",description:`<div class='vm-markdown'><p><code>&lt;q1&gt; | union (&lt;q2&gt;)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns results of <code>&lt;q1&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> followed by results of <code>&lt;q2&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>.
It works similarly to <code>UNION ALL</code> in SQL. <code>&lt;q1&gt;</code> and <code>q2</code> may contain arbitrary <a href="https://docs.victoriametrics.com/victorialogs/logsql/#logsql-tutorial">LogsQL queries</a>.
For example, the following query returns logs with <code>error</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">word</a> for the last 5 minutes, plus logs with <code>panic</code> word for the last hour:</p>
<pre><code class="language-logsql">_time:5m error | union (_time:1h panic)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#join-pipe"><code>join</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#subquery-filter">subquery filter</a></li>
</ul>
</div>`},{id:"uniq-pipe",value:"uniq",title:"uniq pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | uniq by (field1, ..., fieldN)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> returns unique values for the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a>
over the logs returned by <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a>. For example, the following LogsQL query
returns unique values for <code>ip</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>
over logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | uniq by (ip)
</code></pre>
<p>It is possible to specify multiple fields inside <code>by(...)</code> clause. In this case all the unique sets for the given fields
are returned. For example, the following query returns all the unique <code>(host, path)</code> pairs for the logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | uniq by (host, path)
</code></pre>
<p>The unique entries are returned in arbitrary order. Use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#sort-pipe"><code>sort</code> pipe</a> in order to sort them if needed.</p>
<p>Add <code>with hits</code> after <code>uniq by (...)</code> in order to return the number of matching logs for each field value:</p>
<pre><code class="language-logsql">_time:5m | uniq by (host) with hits
</code></pre>
<p>Unique entries are stored in memory during query execution. Big number of unique selected entries may require a lot of memory.
Sometimes it is enough to return up to <code>N</code> unique entries. This can be done by adding <code>limit N</code> after <code>by (...)</code> clause.
This allows limiting memory usage. For example, the following query returns up to 100 unique <code>(host, path)</code> pairs for the logs over the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | uniq by (host, path) limit 100
</code></pre>
<p>If the <code>limit</code> is reached, then arbitrary subset of unique values can be returned. The <code>hits</code> calculation doesn&#39;t work when the <code>limit</code> is reached.</p>
<p>The <code>by</code> keyword can be skipped in <code>uniq ...</code> pipe. For example, the following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | uniq (host, path) limit 100
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq_values-stats"><code>uniq_values</code> stats function</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#top-pipe"><code>top</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe"><code>stats</code> pipe</a></li>
</ul>
</div>`},{id:"unpack-json-pipe",value:"unpack_json",title:"unpack_json pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | unpack_json from field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> unpacks <code>{&quot;k1&quot;:&quot;v1&quot;, ..., &quot;kN&quot;:&quot;vN&quot;}</code> JSON from the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code></a>
of <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results into <code>k1</code>, ... <code>kN</code> output field names with the corresponding <code>v1</code>, ..., <code>vN</code> values.
It overrides existing fields with names from the <code>k1</code>, ..., <code>kN</code> list. Other fields remain untouched.</p>
<p>Nested JSON is unpacked according to the rules defined <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">here</a>.</p>
<p>For example, the following query unpacks JSON fields from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> across logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unpack_json from _msg
</code></pre>
<p>The <code>from _msg</code> part can be omitted when JSON fields are unpacked from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | unpack_json
</code></pre>
<p>If only some fields must be extracted from JSON, then they can be enumerated inside <code>fields (...)</code>. For example, the following query unpacks only <code>foo</code> and <code>bar</code>
fields from JSON value stored in <code>my_json</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>:</p>
<pre><code class="language-logsql">_time:5m | unpack_json from my_json fields (foo, bar)
</code></pre>
<p>If it is needed to extract all the fields with some common prefix, then this can be done via <code>fields(prefix*)</code> syntax.</p>
<p>If it is needed to preserve the original non-empty field values, then add <code>keep_original_fields</code> to the end of <code>unpack_json ...</code>. For example,
the following query preserves the original non-empty values for <code>ip</code> and <code>host</code> fields instead of overwriting them with the unpacked values:</p>
<pre><code class="language-logsql">_time:5m | unpack_json from foo fields (ip, host) keep_original_fields
</code></pre>
<p>Add <code>skip_empty_results</code> to the end of <code>unpack_json ...</code> if the original field values must be preserved when the corresponding unpacked values are empty.
For example, the following query preserves the original <code>ip</code> and <code>host</code> field values for empty unpacked values:</p>
<pre><code class="language-logsql">_time:5m | unpack_json fields (ip, host) skip_empty_results
</code></pre>
<p>Performance tip: if you need to extract a single field from long JSON, it is faster to use the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a>. For example, the following query extracts the <code>&quot;ip&quot;</code> field from JSON
stored in <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a> at the maximum speed:</p>
<pre><code>_time:5m | extract &#39;&quot;ip&quot;:&lt;ip&gt;&#39;
</code></pre>
<p>If you want to make sure that the unpacked JSON fields do not clash with the existing fields, then specify common prefix for all the fields extracted from JSON,
by adding <code>result_prefix &quot;prefix_name&quot;</code> to <code>unpack_json</code>. For example, the following query adds the <code>foo_</code> prefix for all the unpacked fields
from <code>foo</code>:</p>
<pre><code class="language-logsql">_time:5m | unpack_json from foo result_prefix &quot;foo_&quot;
</code></pre>
<p>Performance tips:</p>
<ul>
<li><p>It is better from performance and resource usage PoV ingesting parsed JSON logs into VictoriaLogs
according to the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">supported data model</a>
instead of ingesting unparsed JSON lines into VictoriaLogs and then parsing them at query time with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a>.</p>
</li>
<li><p>It is recommended to use more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries that are passed to <code>unpack_json</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-unpack_json">Conditional <code>unpack_json</code></a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_logfmt-pipe"><code>unpack_logfmt</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_syslog-pipe"><code>unpack_syslog</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#split-pipe"><code>split</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unroll-pipe"><code>unroll</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#pack_json-pipe"><code>pack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#pack_logfmt-pipe"><code>pack_logfmt</code> pipe</a></li>
</ul>
</div>`},{id:"unpack-logfmt-pipe",value:"unpack_logfmt",title:"unpack_logfmt pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | unpack_logfmt from field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> unpacks <code>k1=v1 ... kN=vN</code> <a href="https://brandur.org/logfmt">logfmt</a> fields
from the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code></a> of <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results into <code>k1</code>, ... <code>kN</code> field names
with the corresponding <code>v1</code>, ..., <code>vN</code> values. It overrides existing fields with names from the <code>k1</code>, ..., <code>kN</code> list. Other fields remain untouched.</p>
<p>For example, the following query unpacks <a href="https://brandur.org/logfmt">logfmt</a> fields from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
across logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt from _msg
</code></pre>
<p>The <code>from _msg</code> part can be omitted when <a href="https://brandur.org/logfmt">logfmt</a> fields are unpacked from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt
</code></pre>
<p>If only some fields must be unpacked from logfmt, then they can be enumerated inside <code>fields (...)</code>. For example, the following query extracts only <code>foo</code> and <code>bar</code> fields
from logfmt stored in the <code>my_logfmt</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt from my_logfmt fields (foo, bar)
</code></pre>
<p>If it is needed to extract all the fields with some common prefix, then this can be done via <code>fields(prefix*)</code> syntax.</p>
<p>If it is needed to preserve the original non-empty field values, then add <code>keep_original_fields</code> to the end of <code>unpack_logfmt ...</code>. For example,
the following query preserves the original non-empty values for <code>ip</code> and <code>host</code> fields instead of overwriting them with the unpacked values:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt from foo fields (ip, host) keep_original_fields
</code></pre>
<p>Add <code>skip_empty_results</code> to the end of <code>unpack_logfmt ...</code> if the original field values must be preserved when the corresponding unpacked values are empty.
For example, the following query preserves the original <code>ip</code> and <code>host</code> field values for empty unpacked values:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt fields (ip, host) skip_empty_results
</code></pre>
<p>Performance tip: if you need to extract a single field from a long <a href="https://brandur.org/logfmt">logfmt</a> line, it is faster to use the <a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a>.
For example, the following query extracts <code>&quot;ip&quot;</code> field from <a href="https://brandur.org/logfmt">logfmt</a> line stored
in <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>:</p>
<pre><code>_time:5m | extract &#39; ip=&lt;ip&gt;&#39;
</code></pre>
<p>If you want to make sure that the unpacked <a href="https://brandur.org/logfmt">logfmt</a> fields do not clash with the existing fields, then specify common prefix for all the fields extracted from logfmt,
by adding <code>result_prefix &quot;prefix_name&quot;</code> to <code>unpack_logfmt</code>. For example, the following query adds <code>foo_</code> prefix for all the unpacked fields
from <code>foo</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_logfmt from foo result_prefix &quot;foo_&quot;
</code></pre>
<p>Performance tips:</p>
<ul>
<li><p>It is better from performance and resource usage PoV ingesting parsed <a href="https://brandur.org/logfmt">logfmt</a> logs into VictoriaLogs
according to the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">supported data model</a>
instead of ingesting unparsed logfmt lines into VictoriaLogs and then parsing them at query time with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_logfmt-pipe"><code>unpack_logfmt</code> pipe</a>.</p>
</li>
<li><p>It is recommended to use more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries that are passed to <code>unpack_logfmt</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-unpack_logfmt">Conditional unpack_logfmt</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_syslog-pipe"><code>unpack_syslog</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
</ul>
</div>`},{id:"unpack-syslog-pipe",value:"unpack_syslog",title:"unpack_syslog pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | unpack_syslog from field_name</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> unpacks <a href="https://en.wikipedia.org/wiki/Syslog">syslog</a> message
from the given <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model"><code>field_name</code></a> of <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results.
It understands the following Syslog formats:</p>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc3164">RFC3164</a> aka <code>&lt;PRI&gt;MMM DD hh:mm:ss HOSTNAME APP-NAME[PROCID]: MESSAGE</code></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc5424">RFC5424</a> aka <code>&lt;PRI&gt;1 TIMESTAMP HOSTNAME APP-NAME PROCID MSGID [STRUCTURED-DATA] MESSAGE</code></li>
</ul>
<p>The following fields are unpacked:</p>
<ul>
<li><code>level</code> - obtained from <code>PRI</code>.</li>
<li><code>priority</code> - obtained from <code>PRI</code>.</li>
<li><code>facility</code> - calculated as <code>PRI / 8</code>.</li>
<li><code>facility_keyword</code> - string representation of the <code>facility</code> field according to <a href="https://en.wikipedia.org/wiki/Syslog#Facility">these docs</a>.</li>
<li><code>severity</code> - calculated as <code>PRI % 8</code>.</li>
<li><code>format</code> - either <code>rfc3164</code> or <code>rfc5424</code> depending on which Syslog format is unpacked.</li>
<li><code>timestamp</code> - timestamp in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601 format</a>. The <code>MMM DD hh:mm:ss</code> timestamp in <a href="https://datatracker.ietf.org/doc/html/rfc3164">RFC3164</a>
is automatically converted into <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601 format</a> by assuming that the timestamp belongs to the last 12 months.</li>
<li><code>hostname</code></li>
<li><code>app_name</code></li>
<li><code>proc_id</code></li>
<li><code>msg_id</code></li>
<li><code>message</code></li>
</ul>
<p>The <code>&lt;PRI&gt;</code> part is optional. If it is missing, then <code>priority</code>, <code>facility</code> and <code>severity</code> fields aren&#39;t set.</p>
<p>The <code>[STRUCTURED-DATA]</code> is parsed into fields with the <code>SD-ID.param1</code>, <code>SD-ID.param2</code>, ..., <code>SD-ID.paramN</code> names and the corresponding values
according to <a href="https://datatracker.ietf.org/doc/html/rfc5424#section-6.3">the specification</a>.</p>
<p>If the <code>app_name</code> equals <code>CEF</code> and the <code>message</code> contains Common Event Format data for SIEM
aka <a href="https://www.microfocus.com/documentation/arcsight/arcsight-smartconnectors-8.3/cef-implementation-standard/Content/CEF/Chapter%201%20What%20is%20CEF.htm">CEF for Syslog</a>,
then it is automatically parsed into the following fields:</p>
<ul>
<li><code>cef.version</code> - the CEF version</li>
<li><code>cef.device_vendor</code> - the device vendor field</li>
<li><code>cef.device_product</code> - the device product field</li>
<li><code>cef.device_version</code> - the device version field</li>
<li><code>cef.device_event_class_id</code> - the device event class id</li>
<li><code>cef.name</code> - the CEF name</li>
<li><code>cef.severity</code> - the severity field</li>
</ul>
<p>Optional extension fields are parsed into <code>cef.extension.&lt;key&gt;=&lt;value&gt;</code> fields.</p>
<p>For example, the following query unpacks <a href="https://en.wikipedia.org/wiki/Syslog">syslog</a> message from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>
across logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unpack_syslog from _msg
</code></pre>
<p>The <code>from _msg</code> part can be omitted when <a href="https://en.wikipedia.org/wiki/Syslog">syslog</a> message is unpacked
from the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field"><code>_msg</code> field</a>.
The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | unpack_syslog
</code></pre>
<p>By default timestamps in <a href="https://datatracker.ietf.org/doc/html/rfc3164">RFC3164 format</a> are converted to local timezone. It is possible to change the timezone
offset via <code>offset</code> option. For example, the following query adds 5 hours and 30 minutes to unpacked <code>rfc3164</code> timestamps:</p>
<pre><code class="language-logsql">_time:5m | unpack_syslog offset 5h30m
</code></pre>
<p>If it is needed to preserve the original non-empty field values, then add <code>keep_original_fields</code> to the end of <code>unpack_syslog ...</code>:</p>
<pre><code class="language-logsql">_time:5m | unpack_syslog keep_original_fields
</code></pre>
<p>If you want to make sure that the unpacked <a href="https://en.wikipedia.org/wiki/Syslog">syslog</a> fields do not clash with the existing fields,
then specify common prefix for all the fields extracted from syslog, by adding <code>result_prefix &quot;prefix_name&quot;</code> to <code>unpack_syslog</code>.
For example, the following query adds <code>foo_</code> prefix for all the unpacked fields from <code>foo</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_syslog from foo result_prefix &quot;foo_&quot;
</code></pre>
<p>Performance tips:</p>
<ul>
<li><p>It is better from performance and resource usage PoV ingesting parsed <a href="https://en.wikipedia.org/wiki/Syslog">syslog</a> messages into VictoriaLogs
according to the <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">supported data model</a>
instead of ingesting unparsed syslog lines into VictoriaLogs and then parsing them at query time with <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_syslog-pipe"><code>unpack_syslog</code> pipe</a>.</p>
</li>
<li><p>It is recommended to use more specific <a href="https://docs.victoriametrics.com/victorialogs/logsql/#filters">log filters</a> in order to reduce the number of log entries that are passed to <code>unpack_syslog</code>.
See <a href="https://docs.victoriametrics.com/victorialogs/logsql/#performance-tips">general performance tips</a> for details.</p>
</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#conditional-unpack_syslog">Conditional unpack_syslog</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_logfmt-pipe"><code>unpack_logfmt</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
</ul>
</div>`},{id:"unpack-words-pipe",value:"unpack_words",title:"unpack_words pipe",description:`<div class='vm-markdown'><p>The <code>&lt;q&gt; | unpack_words from &lt;src_field&gt; as &lt;dst_field&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> unpacks <a href="https://docs.victoriametrics.com/victorialogs/logsql/#word">words</a> from the given
<code>&lt;src_field&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log field</a>
of <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results into <code>&lt;dst_field&gt;</code> as a JSON array.</p>
<p>For example, the following query unpacks words from <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log messages</a> into <code>words</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_words from _msg as words
</code></pre>
<p>The <code>as &lt;dst_field&gt;</code> part is optional. If it is missing, then the result is stored in the <code>&lt;src_field&gt;</code> specified in <code>from &lt;src_field&gt;</code>.
For example, the following query stores the unpacked words into <code>_msg</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_words from _msg
</code></pre>
<p>The <code>from &lt;src_field&gt;</code> part is optional. If it is missing, then words are unpacked from the <code>_msg</code> field. The following query is equivalent to the previous one:</p>
<pre><code class="language-logsql">_time:5m | unpack_words
</code></pre>
<p>By default <code>unpack_words</code> pipe unpacks all the words, including duplicates, from the <code>&lt;src_field&gt;</code>. It is possible to drop duplicate words by adding <code>drop_duplicates</code> suffix to the pipe.
For example, the following query extracts only unique words from every <code>text</code> field:</p>
<pre><code class="language-logsql">_time:5m | unpack_words from text as words drop_duplicates
</code></pre>
<p>It is convenient to use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unroll-pipe"><code>unroll</code> pipe</a> for unrolling the JSON array with unpacked words from the destination field.
For example, the following query returns top 5 most frequently seen words across <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#message-field">log messages</a> for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unpack_words as words | unroll words | top 5 (words)
</code></pre>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unroll-pipe"><code>unroll</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#split-pipe"><code>split</code> pipe</a></li>
</ul>
</div>`},{id:"unroll-pipe",value:"unroll",title:"unroll pipe",description:`<div class='vm-markdown'><p><code>&lt;q&gt; | unroll by (field1, ..., fieldN)</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#pipes">pipe</a> can be used for unrolling JSON arrays from <code>field1</code>, ..., <code>fieldN</code>
<a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> of <code>&lt;q&gt;</code> <a href="https://docs.victoriametrics.com/victorialogs/logsql/#query-syntax">query</a> results into separate rows.</p>
<p>For example, the following query unrolls <code>timestamp</code> and <code>value</code> <a href="https://docs.victoriametrics.com/victorialogs/keyconcepts/#data-model">log fields</a> from logs for the last 5 minutes:</p>
<pre><code class="language-logsql">_time:5m | unroll (timestamp, value)
</code></pre>
<p>If the unrolled JSON array contains JSON objects, then it may be handy to use <a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code></a> for unpacking
the unrolled array items into separate fields for further processing.</p>
<p>See also:</p>
<ul>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_json-pipe"><code>unpack_json</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#unpack_words-pipe"><code>unpack_words</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#extract-pipe"><code>extract</code> pipe</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#uniq_values-stats"><code>uniq_values</code> stats function</a></li>
<li><a href="https://docs.victoriametrics.com/victorialogs/logsql/#values-stats"><code>values</code> stats function</a></li>
</ul>
</div>`}],mo=on.map(e=>({...e,type:Y.PipeName,icon:t(Nt,{})})),sn=["AND","OR","NOT"],rn=mo.map(e=>e.value),an=e=>{const o=e,s=[];let i="",r,a=!1;const c=["'",'"',"`"];let n=!1,l="";const m=["(","[","{"],d=[")","]","}"],u=[...m,...d];let h=0,p=0;for(let g=0;g<o.length;g++){const f=o[g];if(c.includes(f)){const v=n&&f===l;n=!v,l=v?"":f}if(!n&&u.includes(f)){const v=m.includes(f)?1:-1;h+=v}if(!n&&!h&&f==="|"){a=!0;const v=i.match(/^ */)?.[0].length||0,_=i.match(/ *$/)?.[0].length||0;Kt(i,!0,[p+v,g-_-1],s,r),i="",r="|",p=g+1;continue}if(!a&&!n&&!h&&f===" "){const v=o.slice(g).replace(/^\s*/,""),_=o.slice(0,g).replace(/\s*$/,"");if(!v.startsWith(":")&&!_.endsWith(":")){Kt(i,!1,[p,g-1],s,r),r=" ",i="",p=g+1;continue}}i+=f}return Kt(i,a,[p,o.length],s,r),s},Kt=(e,o,s,i,r)=>{const a=e.trim();if(!a)return;const c=sn.includes(a.toUpperCase()),n=[ve.Pipe,ve.FilterOrPipe],l=i.length>0&&n.includes(i[i.length-1].type),m=()=>l?ve.FilterOrPipe:o?ve.Pipe:c?ve.Operator:ve.Filter;i.push({id:i.length,value:a,position:s,type:m(),separator:r})},cn=(e,o)=>{const s=e.value.substring(0,o),i=e.value.substring(o),r={valueBeforeCursor:s,valueAfterCursor:i,valueContext:e.value,contextType:Y.Unknown};return ln(e,s,i,r),r.valueContext=r.valueContext.replace(/^["']|["']$/g,""),r},Pi=e=>rn.some(o=>e.startsWith(o)),nn=(e,o)=>!e.includes(":")&&!o.includes(":"),Oi=(e,o)=>{const[s,...i]=e.split(":");o.contextType=Y.FilterValue,o.filterName=s;const a=["=","-","!"].find(c=>c===i[0]);a?(o.valueContext=i.slice(1).join(":"),o.operator=`:${a}`):(o.valueContext=i.join(":"),o.operator=":")},ln=(e,o,s,i)=>{switch(e.type){case ve.Filter:dn(o,s,i);break;case ve.Pipe:i.contextType=Pi(e.value)?Y.PipeValue:Y.PipeName;break;case ve.FilterOrPipe:mn(e.value,o,i);break}},dn=(e,o,s)=>{nn(e,o)?s.contextType=Y.FilterUnknown:e.includes(":")?Oi(e,s):s.contextType=Y.FilterName},mn=(e,o,s)=>{Pi(e)?s.contextType=Y.PipeValue:o.includes(":")?Oi(o,s):s.contextType=Y.FilterOrPipeName},pn=e=>{if(e.includes("=")){const[o,s]=e.split("=");if(s)return`_stream:${o}=~${s}.*"}`}return"*"},_s=(e,o)=>{const s=e.lastIndexOf(o);return s!==-1?e.slice(0,s):""},un=e=>{let o="";return e.valueContext.includes(":")?o=_s(e.valueContext,":"):e.valueContext.includes("-")&&(o=_s(e.valueContext,"-")),o?`${e.filterName}:${o}`:"*"},hn=e=>{let o="";return!e.filterName||!e.query||["_msg","_stream_id"].includes(e.filterName)?o="*":e.filterName==="_stream"?o=pn(e.valueContext):e.filterName==="_time"?o=un(e):o=`${e.filterName}:${e.valueContext}*`,e.queryBeforeIncompleteFilter?`${e.queryBeforeIncompleteFilter}${e.separator??" "}${o}`:o},gn={[Y.FilterName]:t(ro,{}),[Y.FilterUnknown]:t(ro,{}),[Y.FilterValue]:t(ao,{}),[Y.PipeName]:t(Nt,{}),[Y.PipeValue]:t(ri,{}),[Y.Unknown]:t(ao,{}),[Y.FilterOrPipeName]:t(Nt,{})},fn=e=>{const{serverUrl:o}=se(),{period:{start:s,end:i}}=Oe(),{autocompleteCache:r}=So(),a=Us(),c=st(),[n,l]=N(!1),[m,d]=N([]),[u,h]=N([]),p=D(new AbortController),g=O(_=>{const b=F(s*1e3).startOf("day").valueOf()/1e3,y=F(i*1e3).endOf("day").valueOf()/1e3;return new URLSearchParams({..._||{},limit:`${dt.queryLimit}`,start:`${b}`,end:`${y}`})},[s,i]),f=(_,b)=>_.map(y=>({value:y.value,type:`${b}`,icon:gn[b]})),v=async({urlSuffix:_,setter:b,params:y})=>{p.current.abort(),p.current=new AbortController;const{signal:w}=p.current,k=new URLSearchParams(c).toString(),S=`${_}?${y?.toString()}&${k}`;l(!0);try{const q=r.get(S);if(q){b(q),l(!1);return}const x=await fetch(`${o}/select/logsql/${_}`,{signal:w,method:"POST",headers:{...c},body:y});if(x.ok){const A=(await x.json())?.values||[];b(A||[]),a({type:"SET_AUTOCOMPLETE_CACHE",payload:{key:S,value:A}})}l(!1)}catch(q){q instanceof Error&&q.name!=="AbortError"&&(a({type:"SET_AUTOCOMPLETE_CACHE",payload:{key:S,value:[]}}),l(!1),console.error(q))}};return T(()=>{const b=![Y.FilterName,Y.FilterUnknown,Y.FilterOrPipeName].includes(e?.contextType||Y.Unknown);return!o||b?void 0:(d([]),v({urlSuffix:"field_names",setter:w=>{d(f(w,Y.FilterName))},params:g({query:e?.queryBeforeIncompleteFilter||"*"})}),()=>p.current?.abort())},[o,e]),T(()=>{const _=e?.contextType!==Y.FilterValue;return!o||_||!e?.filterName?void 0:(h([]),v({urlSuffix:"field_values",setter:y=>{h(f(y,Y.FilterValue))},params:g({query:hn(e),field:e.filterName})}),()=>p.current?.abort())},[o,e]),{fieldNames:m,fieldValues:u,loading:n}},vn=({value:e,anchorEl:o,caretPosition:s,hasHelperText:i,onSelect:r,onFoundOptions:a,isOpen:c})=>{const[n,l]=N({top:0,left:0}),m=E(()=>{if(s[0]!==s[1])return{valueBeforeCursor:e,valueAfterCursor:""};const y=e.substring(0,s[0]),w=e.substring(s[1]);return{valueBeforeCursor:y,valueAfterCursor:w}},[e,s]),d=E(()=>an(e),[e]),u=E(()=>{if(s[0]!==s[1])return;const y=d.find(q=>s[0]>=q.position[0]&&s[0]<=q.position[1]);if(!y)return;const w=s[0]-y.position[0],k=d.find(q=>q.id===y.id-1),S=k?e.substring(0,k.position[1]+1):void 0;return{...y,queryBeforeIncompleteFilter:S,query:e,...cn(y,w)}},[d,s,e]),{fieldNames:h,fieldValues:p,loading:g}=fn(u),f=E(()=>{switch(u?.contextType){case Y.FilterName:case Y.FilterUnknown:return h;case Y.FilterValue:return p;case Y.PipeName:return mo;case Y.FilterOrPipeName:return[...h,...mo];default:return[]}},[u,h,p]),v=(y,w,k)=>w.reduce((S,q)=>{const x=q.id===k?y:q.value,C=q.separator==="|"?" | ":" ";return`${S}${C}${x}`},"").trim(),_=(y,w,k="",S)=>{let q=y;if(S===Y.FilterName)q+=":";else if(w===Y.FilterValue){const x=k.startsWith("_stream:")?q:`${JSON.stringify(q)}`;q=`${u?.filterName||""}${u?.operator||":"}${x}`}return q},b=O((y,w)=>{const{id:k,contextType:S=Y.FilterUnknown,value:q="",position:x=[0,0]}=u||{},C=_(y,S,q,w.type),A=v(C,d,k),L=d.find(B=>B.id===k),I=()=>L?.type===ve.FilterOrPipe||w.type===Y.PipeName?1:0,z=(x[0]||1)+C.length+I();r(A,z)},[u,d]);if(T(()=>{if(!o.current){l({top:0,left:0});return}const y=o.current.querySelector("textarea")||o.current,w=window.getComputedStyle(y),k=`${w.getPropertyValue("font-size")}`,S=`${w.getPropertyValue("font-family")}`,q=parseInt(`${w.getPropertyValue("line-height")}`),x=document.createElement("div");x.style.font=`${k} ${S}`,x.style.padding=w.getPropertyValue("padding"),x.style.lineHeight=`${q}px`,x.style.width=`${y.offsetWidth}px`,x.style.maxWidth=`${y.offsetWidth}px`,x.style.whiteSpace=w.getPropertyValue("white-space"),x.style.overflowWrap=w.getPropertyValue("overflow-wrap");const C=document.createElement("span");x.appendChild(document.createTextNode(m.valueBeforeCursor||"")),x.appendChild(C),x.appendChild(document.createTextNode(m.valueAfterCursor||"")),document.body.appendChild(x);const A=x.getBoundingClientRect(),L=C.getBoundingClientRect(),I=L.left-A.left,z=L.bottom-A.bottom-(i?q:0);l({top:z,left:I}),x.remove(),C.remove()},[o,s,i,m]),!!c)return t(V,{children:t(Li,{loading:g,disabledFullScreen:!0,value:u?.valueContext||"",options:f,anchor:o,minLength:0,offset:n,onSelect:b,onFoundOptions:a,maxDisplayResults:{limit:dt.displayResults,message:"Please, specify the query more precisely."}})})},_n=({query:e,favorites:o,onRun:s,onToggleFavorite:i})=>{const r=Ie(),a=E(()=>o.includes(e),[e,o]);return t("div",{className:"vm-query-history-item",children:[t("span",{className:"vm-query-history-item__value",children:e}),t("div",{className:"vm-query-history-item__buttons",children:[t(j,{title:"Execute query",children:t(R,{size:"small",variant:"text",onClick:()=>{s(e)},startIcon:t(Lo,{})})}),t(j,{title:"Copy query",children:t(R,{size:"small",variant:"text",onClick:async()=>{await r(e,"Query has been copied")},startIcon:t(Re,{})})}),t(j,{title:a?"Remove Favorite":"Add to Favorites",children:t(R,{size:"small",variant:"text",color:a?"warning":"primary",onClick:()=>{i(e,a)},startIcon:a?t(ii,{}):t(si,{})})})]})]})},Ve={session:"session",storage:"saved",favorite:"favorite"},ys=[{label:"Session history",value:Ve.session},{label:"Saved history",value:Ve.storage},{label:"Favorite queries",value:Ve.favorite}],yn=({handleSelectQuery:e,historyKey:o})=>{const{queryHistory:s}=ht(),{isMobile:i}=U(),{value:r,setTrue:a,setFalse:c}=Z(),[n,l]=N(ys[0].value),[m,d]=N(it(o,"QUERY_HISTORY")),[u,h]=N(it(o,"QUERY_FAVORITES")),p=E(()=>s.map(k=>k.values.filter(S=>S).reverse()),[s]),g=E(()=>{switch(n){case Ve.favorite:return u;case Ve.storage:return m;default:return p}},[n,u,m,p]),f=g?.every(k=>!k.length),v=E(()=>{switch(n){case Ve.favorite:return`Favorites queries are empty.
To see your favorites, mark a query as a favorite.`;default:return`Query history is empty.
To see the history, please make a query.`}},[n]),_=k=>S=>{e(S,k),c()},b=(k,S)=>{h(q=>{const x=q[0]||[];return S?[x.filter(C=>C!==k)]:!S&&!x.includes(k)?[[...x,k]]:q})},y=()=>{d(it(o,"QUERY_HISTORY")),h(it(o,"QUERY_FAVORITES"))},w=()=>{Ur(o,"QUERY_HISTORY")};return T(()=>{const k=u[0]||[],S=it(o,"QUERY_FAVORITES")[0]||[];wi(k,S)||$r(o,u)},[u]),te("storage",y),t(V,{children:[t(R,{color:"primary",variant:"outlined",onClick:a,startIcon:t(xt,{}),ariaLabel:"Query history",children:!i&&"Query history"}),r&&t(xe,{title:"Query history",onClose:c,children:t("div",{className:M({"vm-query-history":!0,"vm-query-history_mobile":i}),children:[t("div",{className:M({"vm-query-history__tabs":!0,"vm-section-header__tabs":!0,"vm-query-history__tabs_mobile":i}),children:t(yi,{activeItem:n,items:ys,onChange:l})}),t("div",{className:"vm-query-history-list",children:[f&&t("div",{className:"vm-query-history-list__no-data",children:v}),g.map((k,S)=>t("div",{children:[g.length>1&&t("div",{className:M({"vm-query-history-list__group-title":!0,"vm-query-history-list__group-title_first":S===0}),children:["Query ",S+1]}),k.map((q,x)=>t(_n,{query:q,favorites:u.flat(),onRun:_(S),onToggleFavorite:b},x))]},S)),n===Ve.storage&&!f&&t("div",{className:"vm-query-history-footer",children:t(R,{color:"error",variant:"outlined",size:"small",startIcon:t(Io,{}),onClick:w,children:"clear history"})})]})]})})]})},bn=()=>{const e=qo(),o=O(i=>{e({type:"SET_AUTOCOMPLETE_QUICK",payload:i})},[e]);return te("keydown",i=>{const{code:r,ctrlKey:a,altKey:c}=i;r==="Space"&&(a||c)&&(i.preventDefault(),o(!0))}),o},Bo=Ot()?"":"Ctrl",$o=Ot()?"":"Alt",Ge=t("code",{children:Bo}),Di=t(V,{children:[t("code",{children:Ot()?$o:"Ctrl"})," + ",t("code",{children:"Space"})]}),wn=[{title:"Query",list:[{keys:t("code",{children:"Enter"}),description:"Run"},{keys:t(V,{children:[t("code",{children:"Shift"})," + ",t("code",{children:"Enter"})]}),description:"Multi-line queries"},{keys:t(V,{children:[Ge," + ",t("code",{children:"Arrow Up"})]}),description:"Previous command from the Query history"},{keys:t(V,{children:[Ge," + ",t("code",{children:"Arrow Down"})]}),description:"Next command from the Query history"},{keys:Di,description:"Show quick autocomplete tips"}]},{title:"Graph",list:[{keys:t(V,{children:[Ge," + ",t("code",{children:"scroll Up"})," or ",t("code",{children:"+"})]}),description:"Zoom in"},{keys:t(V,{children:[Ge," + ",t("code",{children:"scroll Down"})," or ",t("code",{children:"-"})]}),description:"Zoom out"},{keys:t(V,{children:[Ge," + ",t("code",{children:"drag"})]}),description:"Move the graph left/right"},{keys:t(V,{children:[t("code",{children:"click"})," on legend item"]}),description:"Open the legend item menu"},{keys:t(V,{children:[t("code",{children:$o})," + ",t("code",{children:"click"})," on legend item"]}),description:"Hide or show this series"},{keys:t(V,{children:[Ge," + ",t("code",{children:"click"})," on legend item"]}),description:"Show only this series or show all series"}]}],kn=({onSelect:e})=>{const[o,s]=N(""),[i,r]=N([]);return T(()=>{(async()=>{try{const l=(await(await fetch("/select/logsql/streams?query=*")).json()).values.map(m=>({name:m.value.match(/stream="([^"]+)"/)?.[1],hits:m.hits}));if(r(l),l.length>0){const m=l[0].name;s(m),ss(m)}}catch(c){console.error("Failed to fetch streams:",c)}})()},[]),t("label",{className:"stream-filter",children:[t("span",{className:"stream-filter__label",children:"Stream"}),t("select",{className:"stream-filter__select",value:o,onChange:a=>{const c=a.target.value;s(c),ss(c)},children:[t("option",{value:"",disabled:!0,children:"Select stream"}),i.map(a=>t("option",{value:a.name,children:a.name},a.name)),t("option",{value:"__all__",children:"All streams (slow queries)"})]})]})},qn=({query:e,queryDurationMs:o,limit:s,error:i,isLoading:r,onChange:a,onChangeLimit:c,onRun:n})=>{const{isMobile:l}=U(),{autocomplete:m,queryHistory:d,autocompleteQuick:u}=ht(),h=qo(),p=bn(),[g,f]=N(""),{value:v,setValue:_}=Z(),b=()=>{h({type:"TOGGLE_AUTOCOMPLETE"})},y=q=>{const{values:x,index:C}=d[0],A=C+q;A<0||A>=x.length||(a(x[A]||""),h({type:"SET_QUERY_HISTORY_BY_INDEX",payload:{value:{values:x,index:A},queryNumber:0}}))},w=q=>{a(q),_(!0)},k=q=>()=>{y(q)};T(()=>{v&&(n(),_(!1))},[e,v]);const S=q=>{a(q),u&&p(!1)};return t("div",{className:M({"vm-query-page-header":!0,"vm-block":!0,"vm-block_mobile":l}),children:[t("div",{className:"vm-query-page-header-top",children:[t(kn,{onSelect:f}),t(tn,{value:e,autocomplete:m||u,autocompleteEl:vn,onArrowUp:k(-1),onArrowDown:k(1),onEnter:n,onChange:S,label:"Log query",error:i,stats:{executionTimeMsec:o}}),t(Fi,{limit:s,onChangeLimit:c,onPressEnter:n})]}),t("div",{className:"vm-query-page-header-bottom",children:[t("div",{className:"vm-query-page-header-bottom-contols",children:t(j,{title:t(V,{children:["Quick tip: ",Di]}),children:t(ue,{label:"Autocomplete",value:m,onChange:b})})}),!l&&t("div",{className:"vm-query-page-header-bottom-helpful",children:[t("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/victorialogs/logsql/",rel:"help noreferrer",children:[t(Co,{}),"Query language docs"]}),t("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/victorialogs/",rel:"help noreferrer",children:[t(Mo,{}),"Documentation"]})]}),t("div",{className:"vm-query-page-header-bottom-buttons",children:[t(yn,{handleSelectQuery:w,historyKey:"LOGS_QUERY_HISTORY"}),t("div",{className:"vm-query-page-header-bottom-execute",children:t(R,{startIcon:r?t(Pt,{}):t(To,{}),onClick:n,fullWidth:!0,children:t("div",{children:[t("span",{className:"vm-query-page-header-bottom-execute__text",children:r?"Cancel Query":"Execute Query"}),t("span",{className:"vm-query-page-header-bottom-execute__text_hidden",children:"Execute Query"})]})})})]})]})]})},xn="Shortcut keys",po=Ot(),Sn=po?`${Bo} + /`:"F1",Ri=({children:e})=>{const{value:o,setTrue:s,setFalse:i}=Z(),r=O(a=>{const c=po&&a.key==="/"&&a.metaKey,n=!po&&a.key==="F1"&&!a.metaKey;(c||n)&&s()},[s]);return te("keydown",r),t(V,{children:[t(j,{title:`${xn} (${Sn})`,placement:"bottom-center",children:t("div",{onClick:s,children:e})}),o&&t(xe,{title:"Shortcut keys",onClose:i,children:t("div",{className:"vm-shortcuts",children:wn.map(a=>t("div",{className:"vm-shortcuts-section",children:[t("h3",{className:"vm-shortcuts-section__title",children:a.title}),t("div",{className:"vm-shortcuts-section-list",children:a.list.map((c,n)=>t("div",{className:"vm-shortcuts-section-list-item",children:[t("div",{className:"vm-shortcuts-section-list-item__key",children:c.keys}),t("p",{className:"vm-shortcuts-section-list-item__description",children:c.description})]},`${a.title}_${n}`))})]},a.title))})})]})},Nn=({isOverview:e,onChange:o})=>{const[s,i]=X(),[r,a]=ne(ce.hits,"graph_mode"),c=r===ce.stats,[n,l]=ne(!1,"stacked"),[m,d]=ne(!1,"hide_chart"),u=E(()=>({graphStyle:Te.BAR,queryMode:r,stacked:n,fill:!0,hideChart:m}),[n,m,r]),h=f=>{const v=f?ce.stats:ce.hits;a(v),f?s.set("graph_mode",v):s.delete("graph_mode"),i(s)},p=f=>{l(f),f?s.set("stacked","true"):s.delete("stacked"),i(s)},g=()=>{d(f=>{const v=!f;return v?s.set("hide_chart","true"):s.delete("hide_chart"),i(s),v})};return T(()=>{o(u)},[u]),t("div",{className:"vm-bar-hits-options",children:[!e&&t("div",{className:"vm-bar-hits-options-item",children:t(ue,{label:"Stats view",value:c,onChange:h})}),t("div",{className:"vm-bar-hits-options-item",children:t(ue,{label:"Stacked",value:n,onChange:p})}),t(Ri,{children:t(R,{variant:"text",color:"gray",startIcon:t(ti,{})})}),t(j,{title:m?"Show chart and resume hits updates":"Hide chart and pause hits updates",children:t(R,{variant:"text",color:"primary",startIcon:m?t(Ft,{}):t(Je,{}),onClick:g,ariaLabel:"settings"})})]})},Cn=()=>{const[e,o]=N(null),[s,i]=N({width:0,height:0}),r=O(()=>{i({width:e?.offsetWidth||0,height:e?.offsetHeight||0})},[e?.offsetHeight,e?.offsetWidth]);return te("resize",r),T(r,[e?.offsetHeight,e?.offsetWidth]),[o,s]},An=({period:e,setPeriod:o})=>{const[s,i]=N({min:e.start,max:e.end}),r=({min:a,max:c})=>{const n=(c-a)*1e3;n<Ko.min||n>Ko.max||o({from:F(a*1e3).toDate(),to:F(c*1e3).toDate()})};return T(()=>{i({min:e.start,max:e.end})},[e]),{xRange:s,setPlotScale:r}},Tn=e=>e instanceof MouseEvent,bs=e=>Tn(e)?e.clientX:e.touches[0].clientX,Ln=({dragSpeed:e=.85,setPanning:o,setPlotScale:s})=>{const i=D({leftStart:0,xUnitsPerPx:0,scXMin:0,scXMax:0}),r=n=>{n.preventDefault();const l=bs(n),{leftStart:m,xUnitsPerPx:d,scXMin:u,scXMax:h}=i.current,p=d*((l-m)*e);s({min:u-p,max:h-p})},a=()=>{o(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",a)},c=()=>{document.addEventListener("mousemove",r),document.addEventListener("mouseup",a),document.addEventListener("touchmove",r),document.addEventListener("touchend",a)};return({e:n,u:l})=>{n.preventDefault(),o(!0),i.current={leftStart:bs(n),xUnitsPerPx:l.posToVal(1,"x")-l.posToVal(0,"x"),scXMin:l.scales.x.min||0,scXMax:l.scales.x.max||0},c()}},En=e=>{const{ctrlKey:o,metaKey:s,button:i}=e;return i===0&&(o||s)},Zt=.9,In=e=>{const[o,s]=N(!1),i=Ln({dragSpeed:Zt,setPanning:s,setPlotScale:e});return{onReadyChart:a=>{const c=l=>{const m=l instanceof MouseEvent&&En(l),d=window.TouchEvent&&l instanceof TouchEvent&&l.touches.length>1;(m||d)&&i({u:a,e:l})},n=l=>{if(!l.ctrlKey&&!l.metaKey)return;l.preventDefault();const{width:m}=a.over.getBoundingClientRect(),d=a.cursor.left&&a.cursor.left>0?a.cursor.left:0,u=a.posToVal(d,"x"),h=(a.scales.x.max||0)-(a.scales.x.min||0),p=l.deltaY<0?h*Zt:h/Zt,g=u-d/m*p,f=g+p;a.batch(()=>e({min:g,max:f}))};a.over.addEventListener("mousedown",c),a.over.addEventListener("touchstart",c),a.over.addEventListener("wheel",n)},isPanning:o}},ws=e=>{const o=e[0].clientX-e[1].clientX,s=e[0].clientY-e[1].clientY;return Math.sqrt(o*o+s*s)},Mn=({uPlotInst:e,xRange:o,setPlotScale:s})=>{const[i,r]=N(0),a=O(l=>{const{target:m,ctrlKey:d,metaKey:u,key:h}=l,p=m instanceof HTMLInputElement||m instanceof HTMLTextAreaElement;if(!e||p)return;const g=h==="+"||h==="=";if((h==="-"||g)&&!(d||u)){l.preventDefault();const _=(o.max-o.min)/10*(g?1:-1);s({min:o.min+_,max:o.max-_})}},[e,o]),c=l=>{l.touches.length===2&&(l.preventDefault(),r(ws(l.touches)))},n=O(l=>{if(!e||l.touches.length!==2)return;l.preventDefault();const m=ws(l.touches),d=i-m,u=e.scales.x.max||o.max,h=e.scales.x.min||o.min,p=u-h,g=d>0?-1:1,f=p/50*g;e.batch(()=>s({min:h+f,max:u-f}))},[e,i,o]);return te("keydown",a),te("touchmove",n),te("touchstart",c),null};function Fn(e,o){const s=[];let i=[];const r=e[0].length,a=Array(r);for(let c=0;c<r;c++)a[c]=0;for(let c=1;c<e.length;c++)s.push(o(c)?e[c]:e[c].map((n,l)=>a[l]+=+(n??0)));for(let c=1;c<e.length;c++)!o(c)&&i.push({series:[e.findIndex((n,l)=>l>c&&!o(l)),c]});return i=i.filter(c=>c.series[1]>-1),{data:[e[0]].concat(s),bands:i}}const ks=e=>F(e*1e3).tz().format(Le),Pn=({data:e,focusDataIdx:o,uPlotInst:s})=>{const[i,r]=N(!1),a=D(null),c=E(()=>{if(!s||o<0||!e.length||!e[0]?.length)return;const l=e[0][o]||0,m=e[0][1]-e[0][0],d=l+m,u=e.slice(1).map(v=>v[o]||0),h=s.series.slice(1);let p=0;const g=h.reduce((v,_,b)=>{if(!_?.show)return v;const y=u[b];return y<=0||(v.push({value:y,label:_.label,stroke:_.stroke?.(),show:!0}),p+=y),v},[]);return g.sort(Ai("value")),g.length?{point:{top:s.valToPos?.(g[0]?.value??0,"y")||0,left:s.valToPos?.(l,"x")||0},total:p,values:g,timestamp:`${ks(l)} - ${ks(d)}`}:void 0},[o,s,e]),n=E(()=>{if(!s||!c||!a.current||!i)return;const{top:l,left:m}=c.point,d={left:parseFloat(s.over.style.left),top:parseFloat(s.over.style.top)},{width:u,height:h}=s.over.getBoundingClientRect(),{width:p,height:g}=a.current.getBoundingClientRect(),f=50,v=m+p>=u?p+2*f:0,_=l+g>=h?g+2*f:0,b={top:l+d.top+f-_,left:m+d.left+f-v};return b.left<0&&(b.left=20),b.top<0&&(b.top=20),b},[c,s,i]);return er(()=>{a.current?r(!0):r(!1)},[c]),c?t("div",{className:M({"vm-chart-tooltip":!0,"vm-chart-tooltip_hits":!0,"vm-bar-hits-tooltip":!0}),ref:a,style:n,children:[t("div",{children:c.values.map(l=>t("div",{className:"vm-chart-tooltip-data",children:[t("span",{className:"vm-chart-tooltip-data__marker",style:{background:l.stroke}}),t("p",{className:"vm-bar-hits-tooltip-item",children:[t("span",{className:"vm-bar-hits-tooltip-item__label",children:l.label}),t("span",{children:l.value&&l.value.toLocaleString("en-US")})]})]},l.label))}),c.values.length>1&&t("div",{className:"vm-chart-tooltip-data",children:[t("span",{}),t("p",{className:"vm-bar-hits-tooltip-item",children:[t("span",{className:"vm-bar-hits-tooltip-item__label",children:"Total"}),t("span",{children:c.total.toLocaleString("en-US")})]})]}),t("div",{className:"vm-chart-tooltip-header",children:t("div",{className:"vm-chart-tooltip-header__title vm-bar-hits-tooltip__date",children:c.timestamp})})]}):null},On=e=>e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),Dn=({legend:e})=>{const o=e.total.toLocaleString("en-US"),s=Math.round(e.total/e.totalHits*100);return t("div",{className:"vm-legend-hits-menu-section",children:t("div",{className:"vm-legend-hits-menu-row",children:t("div",{className:"vm-legend-hits-menu-row__title",children:["Total: ",o," (",s,"%)"]})})})},vt=({title:e,shortcut:o,handler:s,iconStart:i,iconEnd:r,className:a,submenu:c})=>{const n=D(null),l=D(null),m=D(null),[d,u]=N(!1),[h,p]=N(!1),[g,f]=N(!1),v=!!c?.length,_=()=>{p(k=>!k)},b=()=>{p(!1)},y=()=>{s&&s(),v&&_()};T(()=>{l.current&&u(l.current.scrollWidth>l.current.clientWidth)},[e,l]),T(()=>{requestAnimationFrame(()=>{if(!h||!m.current){f(!1);return}const{left:k,width:S}=m.current.getBoundingClientRect();f(k+S>window.innerWidth)})},[m,h]),ft(n,b);const w=t("div",{ref:l,className:"vm-legend-hits-menu-row__title",children:e});return t("div",{ref:n,className:M({"vm-legend-hits-menu-row":!0,"vm-legend-hits-menu-row_interactive":!!s||v,[`${a}`]:a}),onClick:y,children:[i&&t("div",{className:"vm-legend-hits-menu-row__icon",children:i}),d?t(j,{title:e,children:w}):w,r&&!v&&t("div",{className:"vm-legend-hits-menu-row__icon",children:r}),o&&t("div",{className:"vm-legend-hits-menu-row__shortcut",children:o}),v&&t("div",{className:"vm-legend-hits-menu-row__icon vm-legend-hits-menu-row__icon_drop",children:t(De,{})}),h&&c&&t("div",{ref:m,className:M({"vm-legend-hits-menu":!0,"vm-legend-hits-menu_submenu":!0,"vm-legend-hits-menu_submenu_left":g}),children:t("div",{className:"vm-legend-hits-menu-section",children:c.map(({...k})=>t(vt,{...k},k.title))})})]})};var oe=(e=>(e.Equals="=",e.NotEquals="!=",e.Regex="~",e.NotRegex="!~",e))(oe||{});const zt=()=>{const[e,o]=X(),s=E(()=>{const n=Number(e.get("top_hits"));return Number.isFinite(n)&&n>0?n:nt},[e]),i=e.get("group_hits")||_e,r=O((n,l)=>{o(m=>{const d=new URLSearchParams(m),u=m.get(n);return l&&l!==u?d.set(n,l):d.delete(n),d})},[o]),a=O(n=>{r("top_hits",String(n))},[r]),c=O(n=>{r("group_hits",n)},[r]);return{topHits:s,setTopHits:a,groupFieldHits:i,setGroupFieldHits:c}},Rn=({legend:e,onApplyFilter:o,onClose:s})=>{const i=Ie(),{groupFieldHits:r}=zt(),a=l=>()=>{o({field:r,value:e.label,operator:l}),s()},c=async()=>{await i(e.label,`${e.label} has been copied`),s()},n=[{title:`Copy ${r} name`,iconStart:t(Re,{}),handler:c},{title:`Add ${r} to filter`,iconStart:t(Po,{}),handler:a(oe.Equals)},{title:`Exclude ${r} to filter`,iconStart:t(Oo,{}),handler:a(oe.NotEquals)}];return t("div",{className:"vm-legend-hits-menu-section",children:n.map(({...l})=>t(vt,{...l},l.title))})},zn=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e,Hn=e=>{const[o,s]=e.split(":").map(r=>r.trim()),i=zn(s);return{field:o,value:i}},Vn=({fields:e,onApplyFilter:o,onClose:s})=>{const i=Ie(),{groupFieldHits:r}=zt(),a=m=>async()=>{await i(m,`${m} has been copied`),s()},c=(m,d)=>()=>{o({...Hn(m),operator:d}),s()},n=m=>[{title:"Copy",iconStart:t(Re,{}),handler:a(m)},{title:"Add to filter",iconStart:t(Po,{}),handler:c(m,oe.Equals)},{title:"Exclude to filter",iconStart:t(Oo,{}),handler:c(m,oe.NotEquals)}],l=E(()=>e.map(m=>{const d=Ci(m,r);return{title:d,submenu:n(d)}}),[e]);return t("div",{className:"vm-legend-hits-menu-section",children:l?.map(m=>t(vt,{...m},m.title))})},Bn=({options:e})=>t("div",{className:"vm-legend-hits-menu-section",children:e.map(({...o})=>t(vt,{...o},o.title))}),$n=`Aggregated results for fields not in the top ${nt}`,Un=({legend:e,fields:o,optionsVisibilitySection:s,onApplyFilter:i,onClose:r})=>t("div",{className:"vm-legend-hits-menu",children:[t(Bn,{options:s}),!e.isOther&&t(Rn,{legend:e,onApplyFilter:i,onClose:r}),!e.isOther&&t(Vn,{fields:o,onApplyFilter:i,onClose:r}),t(Dn,{legend:e}),e.isOther&&t("div",{className:"vm-legend-hits-menu-section vm-legend-hits-menu-section_info",children:t(vt,{title:$n})})]}),jn=({targetSeries:e,isOnlyTargetVisible:o,handleVisibilityToggle:s,handleFocusToggle:i})=>{const r=!!e?.show;return E(()=>[{title:r?"Hide this series":"Show this series",iconStart:r?t(Ft,{}):t(Je,{}),shortcut:`${$o} + Click`,handler:s},{title:o?"Show all series":"Show only this series",iconStart:o?t(pi,{}):t(mi,{}),shortcut:`${Bo} + Click`,handler:i}],[o,r,s,i])},Yn=({legend:e,series:o,onRedrawGraph:s,onApplyFilter:i})=>{const{value:r,setTrue:a,setFalse:c}=Z(),n=D(null),[l,m]=N(null),d=E(()=>o.find(w=>w.label===e.label),[o]),u=o.every(w=>w===d||!w.show),h=E(()=>Si(e.label),[e.label]),p=h.join(", "),g=On(e.total),f=w=>{w.preventDefault(),m({top:w.clientY,left:w.clientX}),a()},v=O(()=>{d&&(d.show=!d.show,s(),c())},[d,s,c]),_=O(()=>{o.forEach(w=>{w.show=u||w===d}),s(),c()},[o,u,d,s,c]),b=w=>{const{ctrlKey:k,metaKey:S,altKey:q}=w;if(q){v();return}if(k||S){_();return}f(w)},y=jn({targetSeries:d,isOnlyTargetVisible:u,handleVisibilityToggle:v,handleFocusToggle:_});return t("div",{ref:n,className:M({"vm-bar-hits-legend-item":!0,"vm-bar-hits-legend-item_other":e.isOther,"vm-bar-hits-legend-item_active":r,"vm-bar-hits-legend-item_hide":!d?.show}),onClick:b,children:[t("div",{className:"vm-bar-hits-legend-item__marker",style:{backgroundColor:`${e.stroke}`}}),t("div",{className:"vm-bar-hits-legend-item__label",children:p}),t("span",{className:"vm-bar-hits-legend-item__total",children:["(",g,")"]}),t(Se,{placement:"fixed",open:r,buttonRef:n,placementPosition:l,onClose:c,children:t(Un,{legend:e,fields:h,optionsVisibilitySection:y,onApplyFilter:i,onClose:c})})]})},Gn=({uPlotInst:e,legendDetails:o,onApplyFilter:s})=>{const[i,r]=N([]),a=()=>e.series.filter(n=>n.scale!=="x"),c=()=>{e.redraw()};return T(()=>{e.hooks.draw||(e.hooks.draw=[]),e.hooks.draw.push(()=>{r(a())})},[e]),t("div",{className:"vm-bar-hits-legend",children:o.map(n=>t(Yn,{legend:n,series:i,onRedrawGraph:c,onApplyFilter:s},n.label))})},Qn=({graphOptions:e,logHits:o,totalHits:s,data:i,period:r,setPeriod:a,onApplyFilter:c})=>{const{isMobile:n}=U(),{isDarkTheme:l}=se(),{timezone:m}=Oe(),[d,u]=Cn(),h=D(null),[p,g]=N(),{xRange:f,setPlotScale:v}=An({period:r,setPeriod:a}),{onReadyChart:_,isPanning:b}=In(v);Mn({uPlotInst:p,xRange:f,setPlotScale:v});const{data:y,bands:w}=E(()=>e.stacked?Fn(i,()=>!1):{data:i,bands:[]},[e,i]),{options:k,series:S,focusDataIdx:q}=lc({data:y,logHits:o,bands:w,xRange:f,containerSize:u,onReadyChart:_,setPlotScale:v,graphOptions:e,timezone:m}),x=E(()=>o.map(C=>{const A=xi(C);return{label:A,isOther:C._isOther,fields:C.fields,total:C.total||0,totalHits:s,stroke:S.find(I=>I.label===A)?.stroke}}).sort(Ai("total")),[o,s,S]);return T(()=>{if(!p)return;const C=new Map(p.series.map(L=>[L.label,L])),A=S.map(L=>{const I=C.get(L.label);return I?{...L,show:I.show}:L});qi(p),Ja(p,A,!0),tc(p,A),p.redraw()},[S,p]),T(()=>{p&&(p.delBand(),w.forEach(C=>{p.addBand(C)}),p.redraw())},[w]),T(()=>{if(!h.current)return;const C=new Tt(k,y,h.current);return g(C),()=>C.destroy()},[h.current,l,m]),T(()=>{p&&(p.scales.x.range=()=>[f.min,f.max],p.redraw())},[f]),T(()=>{p&&(p.setSize(u),p.redraw())},[u]),T(()=>{p&&(p.setData(y),p.redraw())},[y]),t(V,{children:[t("div",{className:M({"vm-bar-hits-chart":!0,"vm-bar-hits-chart_panning":b}),ref:d,children:[t("div",{className:"vm-line-chart__u-plot",ref:h}),!n&&t(Pn,{uPlotInst:p,data:i,focusDataIdx:q})]}),p&&t(Gn,{uPlotInst:p,onApplyFilter:c,legendDetails:x})]})},Wn=["_msg","_time"],Kn=["_stream","_stream_id"],Zn=()=>{const{serverUrl:e}=se(),{fieldNames:o,fieldNamesParamsKey:s}=sa(),i=ia(),r=st(),[a,c]=N([]),[n,l]=N(!1),[m,d]=N(""),u=(p,g)=>{const f=g?p:p.filter(v=>!Wn.concat(Kn).includes(v.value));c(f)},h=O(async p=>{l(!0),d("");try{const g=new URLSearchParams({start:p.start.toString(),end:p.end.toString(),query:p.query||"*"}),f=new URLSearchParams([...g,...p.extraParams??[]]),v={...r},b=f.toString()+JSON.stringify(r);if(s===b){u(o,p.showAllFields),l(!1);return}const y=`${e}/select/logsql/field_names`,w=await fetch(y,{method:"POST",headers:v,body:f});if(!w.ok){const S=await w.text(),q=`${w.status} ${w.statusText}: ${S}`;console.error(q),d(q);return}const k=await w.json();u(k.values,p.showAllFields),i({type:"SET_FIELD_NAMES",payload:{rows:k.values,key:b}})}catch(g){console.error(g),d(g)}finally{l(!1)}},[e,r,o,s]);return{fieldNames:a,loading:n,error:m,fetchFieldNames:h}},Jn=e=>JSON.stringify(e).slice(1,-1),Xn=["eq","neq","regex","nregex"],el=e=>typeof e=="string"&&Xn.includes(e),tl={eq:oe.Equals,neq:oe.NotEquals,regex:oe.Regex,nregex:oe.NotRegex},ol={[oe.Equals]:"eq",[oe.NotEquals]:"neq",[oe.Regex]:"regex",[oe.NotRegex]:"nregex"},sl=e=>e.replace(/"/g,'\\"'),zi=e=>{const{field:o,operator:s,value:i}=e,r=o==="_stream",a=i==='""',c=i==="*",l=!r&&!c&&!a?`"${sl(i)}"`:i;switch(s){case oe.Equals:case oe.NotEquals:{const m=c||r?`${o}:${l}`:`${o}:=${l}`;return s===oe.NotEquals?`(NOT ${m})`:m}case oe.Regex:case oe.NotRegex:{const m=`${o}:~${l}`;return s===oe.NotRegex?`(NOT ${m})`:m}default:return""}},il=()=>{const[e,o]=X(),s=E(()=>e.getAll("filter").flatMap((d,u)=>{try{const h=JSON.parse(d);if(!h||typeof h!="object")return[];const{f:p,o:g,v:f}=h;return typeof p!="string"||typeof f!="string"||!el(g)?[]:[{id:u,field:p,operator:tl[g],value:f}]}catch{return[]}}),[e]),i=E(()=>{const d=new URLSearchParams;return ki(s,["field","operator"]).forEach(({values:u})=>{const{field:h,operator:p,value:g}=u[0];if(!h||!u.length||!p)return;const f=h==="_stream"?"extra_stream_filters":"extra_filters";if(u.length===1)d.append(f,zi({field:h,operator:p,value:g}));else{const v=u.map(b=>`"${Jn(b.value)}"`),_=`${h}:in(
${v.join(`,
`)}
)`;d.append(f,p===oe.NotEquals?`(NOT ${_})`:_)}}),d},[s]),r=O(d=>{const u=new URLSearchParams(e);u.delete("filter");for(const h of d)u.append("filter",JSON.stringify({f:h.field,o:ol[h.operator],v:h.value}));o(u,{replace:!0})},[e,o]),a=O(d=>{r([...s,d])},[s,r]),c=O((d,u)=>{const h=[...s];h[u]=d,r(h)},[s,r]),n=O(d=>{const u=new Map;for(const p of s)u.set(`${p.field}\0${p.value}`,p);for(const p of d)u.set(`${p.field}\0${p.value}`,p);const h=Array.from(u.values());r(h)},[s,r]),l=O(d=>{const u=s.filter((h,p)=>p!==d);r(u)},[s,r]),m=O(()=>r([]),[r]);return{extraFilters:s,extraParams:i,addNewFilter:a,updateFilter:c,upsertFilters:n,removeFilter:l,clearFilters:m}},rl=({logHits:e,data:o,query:s,period:i,setPeriod:r,onApplyFilter:a,durationMs:c,isOverview:n})=>{const{isMobile:l}=U(),[m,d]=N({graphStyle:Te.BAR,queryMode:ce.hits,stacked:!1,fill:!1,hideChart:!1}),u=m.queryMode===ce.hits,h=E(()=>dc(e),[e]),{extraParams:p}=il(),{period:{start:g,end:f}}=Oe(),{topHits:v,setTopHits:_,groupFieldHits:b,setGroupFieldHits:y}=zt(),{fetchFieldNames:w,fieldNames:k,loading:S,error:q}=Zn(),x=E(()=>k.map(A=>A.value).sort((A,L)=>A.localeCompare(L)),[k]),C=O(()=>{w({start:g,end:f,extraParams:p,showAllFields:!0,query:s})},[g,f,p.toString(),w,s]);return t("div",{className:M({"vm-bar-hits-chart__wrapper":!0,"vm-bar-hits-chart__wrapper_hidden":m.hideChart}),children:[t("div",{className:"vm-bar-hits-chart-header",children:[t("div",{className:M({"vm-bar-hits-chart-header-info":!0,"vm-bar-hits-chart-header-info_mobile":l}),children:[t($e,{label:"Top hits",options:[5,10,25,50],limit:v,onChange:_})," |",u&&t(V,{children:[t($e,{searchable:!0,label:"Group by",limit:b,options:x,textNoOptions:"No fields found",isLoading:S,error:q?String(q):"",onOpenSelect:C,onChange:y})," |"]}),t("p",{children:["Total: ",t("b",{children:h.toLocaleString("en-US")})," hits"]}),c!==void 0&&t(V,{children:["|",t("p",{children:["Duration: ",t("b",{children:_o(c)})]})]})]}),t(Nn,{isOverview:n,onChange:d})]}),!m.hideChart&&t(Qn,{logHits:e,totalHits:h,data:o,period:i,setPeriod:r,onApplyFilter:a,graphOptions:m})]})},al=({query:e,logHits:o,durationMs:s,period:i,error:r,isLoading:a,isOverview:c,onApplyFilter:n})=>{const{isMobile:l}=U(),m=tt(),[d]=X(),u=E(()=>d.get("hide_chart"),[d]),h=(_,b)=>_.map(y=>{const w=new Map;return y.timestamps.forEach((k,S)=>{w.set(es(k),y.values[S]||null)}),b.map(k=>w.get(k)||null)}),p=O(_=>{const b=[],{start:y,end:w,step:k}=Ni(i),S=Math.ceil(y.diff(_,"milliseconds")/k);let q=_.add(S*k,"milliseconds");q.isBefore(y)&&(q=y.clone());const x=Math.floor(w.diff(q,"milliseconds")/k);for(let C=0;C<=x;C++){const A=q.add(C*k,"milliseconds");b.push(es(A))}return b},[i]),g=E(()=>{if(!o.length)return[[],[]];const _=p(F(o[0].timestamps[0])),b=h(o,_);return[_,...b]},[o]),f=E(()=>{if(a)return"";const _=g.every(w=>w.length===0),b=g[0].length===0,y=g[1].length===0;return u?"Chart hidden. Hits updates paused.":_?`No logs volume available
No volume information available for the current queries and time range.`:b?"No timestamp information available for the current queries and time range.":y?"No value information available for the current queries and time range.":""},[g,u,a]),v=({from:_,to:b})=>{m({type:"SET_PERIOD",payload:{from:_,to:b}})};return t("section",{className:M({"vm-query-page-chart":!0,"vm-block":!0,"vm-block_mobile":l}),children:[a&&t(Ro,{}),!r&&f&&t("div",{className:"vm-query-page-chart__empty",children:t(Ee,{variant:"info",children:f})}),r&&f&&t("div",{className:"vm-query-page-chart__empty",children:t(Ee,{variant:"error",children:t("pre",{children:r})})}),g&&t(rl,{isOverview:c,logHits:o,durationMs:s,query:e,data:g,period:i,setPeriod:v,onApplyFilter:n})]})};function cl(e){return Object.keys(e).length===0}const Jt=e=>{switch(e){case"NaN":return NaN;case"Inf":case"+Inf":return 1/0;case"-Inf":return-1/0;default:return parseFloat(e)}},nl=e=>{if(!e)return"";const{__name__:o,...s}=e,i=o??"",r=Object.entries(s).filter(([a,c])=>c).sort(([a],[c])=>a.localeCompare(c)).map(([a,c])=>`${a}:"${c}"`).join(", ");return!i&&!r?"":r?`${i} {${r}}`:i},ll=({setLogHits:e,setError:o})=>(s,i)=>{const r=[],a=s?.data?.result,c=a?.length,n=Number.isFinite(i)?i:nt;if(!a)return o("Error: No 'result' field in response"),e([]),r;if(!c)return e([]),r;const l=new Array(c);for(let g=0;g<c;g++){const f=a[g];let v=0;for(let _=0;_<f.values.length;_++){const[,b]=f.values[_];v+=Jt(b)}l[g]={idx:g,total:v}}l.sort((g,f)=>f.total-g.total);const m=Math.min(n,c),d=l.slice(0,m),u=l.slice(m),h=new Map;let p=0;for(let g=0;g<u.length;g++){const f=u[g].idx,v=a[f];for(let _=0;_<v.values.length;_++){const[b,y]=v.values[_],w=Jt(y),k=h.get(b)??0;h.set(b,k+w),p+=w}}if(u.length>0){const g=Array.from(h.keys()).sort((b,y)=>b-y),f=g.map(b=>new Date(b*1e3).toISOString()),v=g.map(b=>h.get(b)??0),_={timestamps:f,values:v,total:p,fields:{},_isOther:!0};r.push(_)}for(let g=0;g<d.length;g++){const f=d[g].idx,v=a[f],_=v.values.length,b=new Array(_),y=new Array(_);for(let w=0;w<_;w++){const[k,S]=v.values[w];b[w]=new Date(k*1e3).toISOString(),y[w]=Jt(S)}r.push({timestamps:b,values:y,total:d[g].total,fields:{name:nl(v.metric)},_isOther:!1})}return e(r),r},dl=(e="*")=>{const{serverUrl:o}=se(),s=st(),[i]=X(),[r,a]=N([]),[c,n]=N([]),[l,m]=N(),[d,u]=N(),h=D(new AbortController),p=ll({setLogHits:a,setError:m}),g=E(()=>i.get("hide_chart"),[i]),f=O(y=>{switch(y){case ce.hits:return Ba(o);case ce.stats:return $a(o)}},[o]),v=({query:y=e,period:w,extraParams:k,signal:S,fieldsLimit:q,field:x})=>{const{start:C,end:A,step:L,offset:I}=Ni(w),z=y.trim();let B=z;Ae&&Ae!=="__all__"&&(B=`{stream="${Ae}"} | ${z}`);const $=new URLSearchParams({query:B,step:`${L}ms`,offset:`${I}ms`,start:C.toISOString(),end:A.toISOString(),fields_limit:`${q||nt}`,field:x||_e});return{body:new URLSearchParams([...$,...k??[]]),signal:S,method:"POST",headers:{...s}}},_=y=>{const w=y?.hits;if(!w)return m("Error: No 'hits' field in response"),[];const k=w.map(ml).sort(pl);return a(k),k},b=O(async y=>{const w=y.queryMode||ce.hits;h.current.abort(),h.current=new AbortController;const{signal:k}=h.current;if(zo&&!Ae){m("Select a stream");return}const S=Date.now();n(q=>({...q,[S]:!0})),m(void 0);try{const q=v({...y,signal:k}),x=f(w),C=await fetch(x,q),A=C.headers.get("vl-request-duration-seconds");if(u(A?Number(A)*1e3:void 0),!C.ok||!C.body){const I=await C.text();try{m(JSON.stringify(JSON.parse(I),null,2))}catch{m(I)}a([]),n(z=>({...z,[S]:!1}));return}const L=await C.json();switch(w){case ce.hits:return _(L);case ce.stats:{const I=+(q.body.get("fields_limit")||nt);return p(L,I)}}}catch(q){q instanceof Error&&q.name!=="AbortError"&&(m(String(q)),console.error(q),a([]))}finally{n(q=>({...q,[S]:!1}))}},[f,e,s]);return T(()=>()=>{h.current.abort()},[]),T(()=>{g&&(a([]),m(void 0))},[g]),{logHits:r,isLoading:Object.values(c).some(y=>y),error:l,fetchLogHits:b,durationMs:d,abortController:h.current}},ml=e=>({...e,_isOther:cl(e.fields)}),pl=(e,o)=>e._isOther!==o._isOther?e._isOther?-1:1:o.total-e.total;function ul(e){const o=D(e);T(()=>{o.current=e},[e]),T(()=>()=>{o.current()},[])}function hl(e,o=500,s){const i=D(e);i.current=e;const r=E(()=>{const a=Ts((...n)=>i.current(...n),o,s),c=(...n)=>{a(...n)};return c.cancel=a.cancel,c.flush=a.flush,c},[o,s]);return ul(()=>{r.cancel()}),r}function We(e){const o=D();return T(()=>{o.current=e},[e]),o.current}const gl=({setLimit:e})=>{const{value:o,setFalse:s,setTrue:i}=Z(),[r,a]=N(0),[c,n]=N(0),[l,m]=N(()=>{try{return!!sessionStorage.getItem($t)}catch{return!1}}),d=D(),u=D(null),h=O(async _=>{if(u.current)return u.current;const b=Number(_.get("limit")??0),y=Number.isFinite(b)&&b>=0?b:0,w=y===0||y>at,k=y>vr&&!l;if(!(w||k))return{action:"proceed"};a(y),n(y),i();const q=new Promise(x=>{d.current=x});return u.current=q,q},[i,l]),p=O(()=>{const _=d.current;if(!_){s();return}let b=Math.floor(Number.isFinite(c)?c:0);b<0&&(b=0),b>at&&(b=at),e(b);const y=new URLSearchParams;y.set("limit",String(b)),_({action:"modify",body:y}),d.current=void 0,u.current=null,s()},[c,e,s]),g=O(()=>{const _=d.current;_&&_({action:"abort"}),d.current=void 0,u.current=null,s()},[s]),f=O(_=>{m(_);try{_?sessionStorage.setItem($t,"true"):sessionStorage.removeItem($t)}catch(b){console.error(b)}},[]);return T(()=>()=>{d.current&&(d.current({action:"abort"}),d.current=void 0,u.current=null)},[]),{beforeFetch:h,modalProps:{isOpen:o,initialLimit:r,limitDraft:c,setLimitDraft:n,suppressWarning:l,onChangeSuppressWarning:f,onConfirm:p,onCancel:g}}},fl=({initialLimit:e,limitDraft:o,setLimitDraft:s,isOpen:i,suppressWarning:r,queryParams:a,onChangeSuppressWarning:c,onConfirm:n,onCancel:l})=>{const m=e?e.toLocaleString("en-US"):"an unlimited number of",[d,u]=N(!1);return T(()=>()=>l(),[l]),i?t(xe,{title:"Confirm large load",isOpen:i,onClose:l,children:t("div",{className:"vm-logs-limit-modal",children:[t("div",{className:"vm-logs-limit-modal-text",children:[t("p",{children:["Youre about to load ",t("b",{children:m})," logs."]}),t("p",{children:"This may slow down the app or make the UI unresponsive."}),t("p",{children:"Are you sure you want to continue?"})]}),t("div",{className:"vm-logs-limit-modal-input",children:t(Fi,{limit:o,onChangeLimit:s,onPressEnter:n,onError:u})}),t(Mi,{queryParams:a,children:t("p",{className:"vm-logs-limit-modal-download vm-link vm-link_colored vm-link_underlined",children:"Click to download all matching logs without a limit."})}),t("div",{className:"vm-logs-limit-modal-footer",children:[t("div",{children:t(no,{color:"primary",label:"Don't show again in this tab",checked:r,onChange:c})}),t("div",{className:"vm-logs-limit-modal-footer__actions",children:[t(R,{color:"error",variant:"outlined",onClick:l,children:"Cancel"}),t(R,{onClick:n,disabled:d,children:"Load Logs"})]})]})]})}):null},vl=e=>{const{serverUrl:o}=se(),s=st(),[i,r]=N(null),[a,c]=N(!1),[n,l]=N();return{fetchQueryTime:O(async({period:d,query:u})=>{const h=new URLSearchParams({query:u||e||"",start:d.start.toString(),end:d.end.toString()});r(null),c(!0),l("");try{const p=`${o}/select/logsql/query_time_range`,g=await fetch(p,{method:"POST",headers:{...s},body:h});if(!g.ok||!g.body){const x=await g.text();l(x),c(!1);return}const{start:f,end:v,hasTimeFilter:_}=await g.json(),b=F(f),y=F(v);if(!b.isValid()||!y.isValid()){l("Invalid date range"),c(!1);return}const w={from:b.toDate(),to:y.toDate()},k=zs(w),q={...Fe(k,w.to),hasTimeFilter:_};return r(q),q}catch(p){p instanceof Error&&p.name!=="AbortError"&&(l(String(p)),console.error(p))}finally{c(!1)}},[e,o,s]),serverPeriod:i,isLoading:a,error:n}},qs=Number(he("LOGS_LIMIT")),_l=isNaN(qs)?fr:qs,yl=()=>{const{queryHistory:e,queryHasTimeFilter:o}=ht(),s=qo(),{duration:i,relativeTime:r,period:a}=Oe(),c=tt(),{setSearchParamsFromKeys:n}=Dt(),{topHits:l,groupFieldHits:m}=zt(),d=We(l),u=We(m),[h]=X(),p=E(()=>!!h.get("hide_chart"),[h]),g=We(p),f=E(()=>!!h.get("hide_logs"),[h]),v=We(f),[_]=ne(ce.hits,"graph_mode"),b=We(_),[y,w]=ne(_l,ee.LIMIT),[k,S]=ne("*","query"),[q,x]=N(!1),C=re=>{w(re),n({limit:re}),le("LOGS_LIMIT",`${re}`)},{beforeFetch:A,modalProps:L}=gl({setLimit:C}),I=()=>{const re=jr(k,e[0]);s({type:"SET_QUERY_HISTORY",payload:{key:"LOGS_QUERY_HISTORY",history:[re]}})},[z,B]=N(!1),[$,K]=N(a),[Q,J]=N(""),{logs:G,isLoading:P,error:H,fetchLogs:W,abortController:ae,durationMs:be,queryParams:me}=Ho(k,y),{fetchLogHits:Me,...ie}=dl(k),{fetchQueryTime:He}=vl(k),Vt=hl(async(re,ge)=>{ge.logs&&!await W({period:re,beforeFetch:A})||ge.hits&&await Me({period:re,field:m,fieldsLimit:l,queryMode:_})},300),$i=()=>{const re=qt.find(Uo=>Uo.id===r);if(!re)return a;const{duration:ge,until:Ne}=re;return Fe(ge,Ne())},Bt=async()=>{if(!k){J(Is.validQuery);return}J("");const re=$i(),ge=wo()?await He({query:k,period:re}):void 0,Ne=ge??re;s({type:"SET_QUERY_HAS_TIME_FILTER",payload:!!ge?.hasTimeFilter}),ge?.hasTimeFilter&&(x(!0),c({type:"SET_PERIOD",payload:{from:new Date(Ne.start*1e3),to:new Date(Ne.end*1e3)}})),K(Ne),ie.abortController.abort?.(),ae.abort?.(),Vt(Ne,{logs:!f,hits:!p}),n({query:k,"g0.range_input":i,"g0.end_input":Ne.date,"g0.relative_time":r||"none"}),I()},Ui=re=>{S(ge=>`${zi(re)} AND ${ge}`),B(!0)},ji=()=>{P||ie.isLoading?(ae.abort?.(),ie.abortController.abort?.()):Bt()};return T(()=>{if(k){if(q){x(!1);return}Bt()}},[a]),T(()=>{z&&(Bt(),B(!1))},[k,z]),T(()=>{(d&&l!==d||u&&m!==u||g&&!p||b&&_!==b)&&(ie.abortController.abort?.(),Me({period:$,field:m,fieldsLimit:l,queryMode:_}))},[p,g,$,m,u,l,d,_,b,Me]),T(()=>{f||!v||W({period:$,beforeFetch:A})},[f,v,$,W,A]),t("div",{className:"vm-query-page",children:[t(fl,{...L,queryParams:me}),t(qn,{query:k,queryDurationMs:f?void 0:be,error:Q,limit:y,onChange:S,onChangeLimit:C,onRun:ji,isLoading:P||ie.isLoading}),H&&t(Ee,{variant:"error",children:H}),o&&t(Ee,{variant:"warning",children:t("p",{children:"Time range is overridden by the query `_time` filter. Remove `_time` from the query to use manual selection. Disable query time override in Settings."})}),!H&&t(al,{...ie,query:k,period:$,onApplyFilter:Ui}),t(en,{data:G,queryParams:me,isLoading:P})]})};var mt=(e=>(e[e.internalLink=0]="internalLink",e[e.externalLink=1]="externalLink",e))(mt||{});const bl=()=>[{label:Rt[Pe.home].title,value:Pe.home}],uo=({activeMenu:e,label:o,value:s,type:i,color:r})=>i===mt.externalLink?t("a",{className:M({"vm-header-nav-item":!0,"vm-header-nav-item_active":e===s}),style:{color:r},href:s,target:"_blank",rel:"noreferrer",children:o}):t(As,{className:M({"vm-header-nav-item":!0,"vm-header-nav-item_active":e===s}),style:{color:r},to:s,children:o}),wl=({activeMenu:e,label:o,color:s,background:i,submenu:r,direction:a})=>{const{pathname:c}=je(),[n,l]=N(null),m=D(null),{value:d,setFalse:u,setTrue:h}=Z(),p=()=>{h(),n&&clearTimeout(n)},g=()=>{n&&clearTimeout(n);const v=setTimeout(u,300);l(v)},f=()=>{n&&clearTimeout(n)};return T(()=>{u()},[c]),a==="column"?t(V,{children:r.map(v=>t(uo,{activeMenu:e,value:v.value||"",label:v.label||"",type:v.type||mt.internalLink},v.value))}):t("div",{className:M({"vm-header-nav-item":!0,"vm-header-nav-item_sub":!0,"vm-header-nav-item_open":d,"vm-header-nav-item_active":r.find(v=>v.value===e)}),style:{color:s},onMouseEnter:p,onMouseLeave:g,ref:m,children:[o,t(De,{}),t(Se,{open:d,placement:"bottom-left",offset:{top:12,left:0},onClose:u,buttonRef:m,children:t("div",{className:"vm-header-nav-item-submenu",style:{background:i},onMouseLeave:g,onMouseEnter:f,children:r.map(v=>t(uo,{activeMenu:e,value:v.value||"",label:v.label||"",color:s,type:v.type||mt.internalLink},v.value))})})]})},kl=e=>{try{return e.replace(/^\/+/,"").replace(/-/g," ").trim().replace(/^\w/,o=>o.toUpperCase())}catch{return e}},Hi=e=>e.filter(o=>!o.hide).map(o=>{const s={...o};return s.value&&!s.label&&(s.label=Rt[s.value]?.title||kl(s.value)),s.submenu&&s.submenu.length>0&&(s.submenu=Hi(s.submenu)),s}),ql=()=>{const e=bl();return Hi(e)},Vi=({color:e,background:o,direction:s})=>{const{pathname:i}=je(),[r,a]=N(i),c=ql();return T(()=>{a(i)},[i]),t("nav",{className:M({"vm-header-nav":!0,[`vm-header-nav_${s}`]:s}),children:c.map(n=>n.submenu?t(wl,{activeMenu:r,label:n.label||"",submenu:n.submenu,color:e,background:o,direction:s},n.label):t(uo,{activeMenu:r,value:n.value||"",label:n.label||"",color:e,type:n.type||mt.internalLink},n.value))})},xl=({open:e})=>t("button",{className:M({"vm-menu-burger":!0,"vm-menu-burger_opened":e}),"aria-label":"menu",children:t("span",{})}),Sl=({background:e,color:o})=>{const{pathname:s}=je(),i=D(null),{value:r,toggle:a,setFalse:c}=Z();return T(c,[s]),ft(i,c),t("div",{className:"vm-header-sidebar",ref:i,children:[t("div",{className:M({"vm-header-sidebar-button":!0,"vm-header-sidebar-button_open":r}),onClick:a,children:t(xl,{open:r})}),t("div",{className:M({"vm-header-sidebar-menu":!0,"vm-header-sidebar-menu_open":r}),children:t("div",{children:t(Vi,{color:o,background:e,direction:"column"})})})]})},Nl=({controlsComponent:e,isMobile:o,...s})=>{const i=ze(),{pathname:r}=je(),{value:a,toggle:c,setFalse:n}=Z(),l=E(()=>Object.entries(Rt).find(([u])=>Ls(u,r))?.[1]?.header||{},[r]),m=t(e,{...s,isMobile:o,headerSetup:l});return o?t(V,{children:[t("div",{children:t(R,{className:M({"vm-header-button":!i}),startIcon:t(ei,{}),onClick:c,ariaLabel:"controls"})}),t(xe,{title:"Controls",onClose:n,isOpen:a,className:M({"vm-header-controls-modal":!0,"vm-header-controls-modal_open":a}),children:m})]}):m},xs=()=>t(js,{}),Cl=({controlsComponent:e})=>{const{isMobile:o}=U(),s=gt(),i=E(()=>window.innerWidth<1e3,[s]),{isDarkTheme:r}=se(),a=ze(),c=E(()=>qe(r?"color-background-block":"color-primary"),[r]),{background:n,color:l}=E(()=>{const{headerStyles:{background:u=a?"#FFF":c,color:h=a?c:"#FFF"}={}}=Do();return{background:u,color:h}},[c]),m=At(),d=()=>{m({pathname:Pe.home}),window.location.reload()};return t("header",{className:M({"vm-header":!0,"vm-header_app":a,"vm-header_dark":r,"vm-header_sidebar":i,"vm-header_mobile":o}),style:{background:n,color:l},children:[i?t(Sl,{background:n,color:l}):t(V,{children:[!a&&t("div",{className:"vm-header-logo",onClick:d,style:{color:l},children:t(xs,{})}),t(Vi,{color:l,background:n})]}),i&&t("div",{className:M({"vm-header-logo":!0,"vm-header-logo_mobile":!0}),onClick:d,style:{color:l},children:t(xs,{})}),t(Nl,{controlsComponent:e,displaySidebar:i,isMobile:o})]})},Al={href:"https://github.com/VictoriaMetrics/VictoriaLogs/issues/new/choose",Icon:Xs,title:"Create an issue"},Bi=[{href:"https://docs.victoriametrics.com/victorialogs/logsql/",Icon:Eo,title:"LogsQL"},{href:"https://docs.victoriametrics.com/victorialogs/",Icon:Mo,title:"Documentation"},Al],Tl=e=>`${e}/select/buildinfo`,Ll=()=>{const{serverUrl:e}=se(),[o,s]=N("");return T(()=>{(async()=>{try{const a=await(await fetch(Tl(e))).json();s(a?.data?.version)}catch(r){console.error(r)}})()},[e]),{version:o}},El=et(({links:e=Bi})=>{const o=`2019-${new Date().getFullYear()}`,{version:s}=Ll();return t("footer",{className:"vm-footer",children:[t("a",{className:"vm-link vm-footer__website",target:"_blank",href:"https://victoriametrics.com/",rel:"me noreferrer",children:[t(Ys,{}),"victoriametrics.com"]}),e.map(({href:i,Icon:r,title:a})=>t("a",{className:"vm-link vm-footer__link",target:"_blank",href:i,rel:"help noreferrer",children:[t(r,{}),a]},`${i}-${a}`)),t("div",{className:"vm-footer__copyright",children:[" ",o," VictoriaMetrics."]}),s&&t("span",{className:"vm-footer__version",children:["Version: ",s]})]})}),Il="Browser timezone is not recognized, supported, or could not be determined.",Ml=()=>t(j,{title:Il,children:t(It,{})}),wt=Vs(),Fl=({onChange:e})=>{const{isMobile:o}=U(),{defaultTimezone:s}=Oe(),i=Jo(),[r,a]=N(""),c=E(()=>[{title:`Default time (${s})`,region:s,utc:s?lt(s):"UTC"},{title:wt.title,region:wt.region,utc:lt(wt.region),isInvalid:!wt.isValid},{title:"UTC (Coordinated Universal Time)",region:"UTC",utc:"UTC"}].filter(h=>h.region),[s]),n=E(()=>{if(!r)return i;try{return Jo(r)}catch{return{}}},[r,i]),l=E(()=>Object.keys(n),[n]),m=h=>{a(h)},d=h=>{e(h),a("")},u=h=>()=>{d(h)};return t("div",{className:M({"vm-timezones-list":!0,"vm-timezones-list_mobile":o}),children:[t("div",{className:"vm-timezones-list-header",children:[t("div",{className:"vm-timezones-list-header__search",children:t(ke,{autofocus:!0,label:"Search",value:r,onChange:m})}),c.map((h,p)=>h&&t("div",{className:"vm-timezones-item vm-timezones-list-group-options__item",onClick:u(h),children:[t("div",{className:"vm-timezones-item__title",children:[h.title,h.isInvalid&&t(Ml,{})]}),t("div",{className:"vm-timezones-item__utc",children:h.utc})]},`${p}_${h.region}`))]}),l.map(h=>t("div",{className:"vm-timezones-list-group",children:t(bi,{defaultExpanded:!0,title:t("div",{className:"vm-timezones-list-group__title",children:h}),children:t("div",{className:"vm-timezones-list-group-options",children:n[h]&&n[h].map(p=>t("div",{className:"vm-timezones-item vm-timezones-list-group-options__item",onClick:u(p),children:[t("div",{className:"vm-timezones-item__title",children:p.region}),t("div",{className:"vm-timezones-item__utc",children:p.utc})]},p.search))})})},h))]})},Pl=Lt((e,o)=>{const{isMobile:s}=U(),{timezone:i}=Oe(),r=tt(),[a,c]=N(i),n=D(null),{value:l,toggle:m,setFalse:d}=Z(),u=E(()=>({region:a,utc:lt(a)}),[a]),h=p=>{c(p.region),d()};return T(()=>{c(i)},[i]),Es(o,()=>({handleApply:()=>{r({type:"SET_TIMEZONE",payload:a})}}),[a]),t("div",{className:"vm-timezones",children:[t("div",{className:"vm-server-configurator__title",children:"Time zone"}),t("div",{className:"vm-timezones-item vm-timezones-item_selected",onClick:m,ref:n,children:[t("div",{className:"vm-timezones-item__title",children:u.region}),t("div",{className:"vm-timezones-item__utc",children:u.utc}),t("div",{className:M({"vm-timezones-item__icon":!0,"vm-timezones-item__icon_open":l}),children:t(De,{})})]}),t(Se,{open:l,buttonRef:n,placement:"bottom-left",onClose:d,fullWidth:!0,title:s?"Time zone":void 0,children:t(Fl,{onChange:h})})]})}),Ol=({options:e,value:o,label:s,onChange:i})=>{const r=D(null),[a,c]=N({width:"0px",left:"0px",borderRadius:"0px"}),n=l=>()=>{i(l)};return T(()=>{if(!r.current){c({width:"0px",left:"0px",borderRadius:"0px"});return}const l=e.findIndex(p=>p.value===o),{width:m}=r.current.getBoundingClientRect();let d=m,u=l*d,h="0";l===0&&(h="16px 0 0 16px"),l===e.length-1&&(h="10px",u-=1,h="0 16px 16px 0"),l!==0&&l!==e.length-1&&(d+=1,u-=1),c({width:`${d}px`,left:`${u}px`,borderRadius:h})},[r,o,e]),t("div",{className:"vm-toggles",children:[s&&t("label",{className:"vm-toggles__label",children:s}),t("div",{className:"vm-toggles-group",style:{gridTemplateColumns:`repeat(${e.length}, 1fr)`},children:[a.borderRadius&&t("div",{className:"vm-toggles-group__highlight",style:a}),e.map((l,m)=>t("div",{className:M({"vm-toggles-group-item":!0,"vm-toggles-group-item_first":m===0,"vm-toggles-group-item_active":l.value===o,"vm-toggles-group-item_icon":l.icon&&l.title}),onClick:n(l.value),ref:l.value===o?r:null,children:[l.icon,l.title]},l.value))]})]})},Dl=Object.values(pe).map(e=>({title:e,value:e})),Rl=()=>{const{isMobile:e}=U(),o=Os(),{theme:s}=se(),i=r=>{o({type:"SET_THEME",payload:r})};return t("div",{className:M({"vm-theme-control":!0,"vm-theme-control_mobile":e}),children:[t("div",{className:"vm-server-configurator__title",children:"Theme preferences"}),t("div",{className:"vm-theme-control__toggle",children:t(Ol,{options:Dl,value:s,onChange:i})},`${e}`)]})},Xt="Settings",zl=Lt((e,o)=>{const{isMobile:s}=U(),i=ze(),r=D(null),a=D(null),c=D(null),{value:n,setTrue:l,setFalse:m}=Z(),d=()=>{r.current&&r.current.handleApply(),a.current&&a.current.handleApply(),c.current&&c.current.handleApply(),m()},u=[{show:!0,component:t(Pl,{ref:c})},{show:!0,component:t(Qr,{})},{show:!i,component:t(Rl,{})}].filter(h=>h.show);return Es(o,()=>({open:l})),t(V,{children:[s?t("div",{className:"vm-mobile-option",onClick:l,children:[t("span",{className:"vm-mobile-option__icon",children:t(Ze,{})}),t("div",{className:"vm-mobile-option-text",children:t("span",{className:"vm-mobile-option-text__label",children:Xt})}),t("span",{className:"vm-mobile-option__arrow",children:t(de,{})})]}):t(j,{title:Xt,children:t(R,{className:M({"vm-header-button":!i}),variant:"contained",color:"primary",startIcon:t(Ze,{}),onClick:l,ariaLabel:"settings"})}),n&&t(xe,{title:Xt,onClose:m,children:t("div",{className:M({"vm-server-configurator":!0,"vm-server-configurator_mobile":s}),children:[u.map((h,p)=>t("div",{className:"vm-server-configurator__input",children:h.component},p)),t("div",{className:"vm-server-configurator-footer",children:[t(R,{color:"error",variant:"outlined",onClick:m,children:"Cancel"}),t(R,{color:"primary",variant:"contained",onClick:d,children:"Apply"})]})]})})]})}),Hl=({relativeTime:e,setDuration:o})=>{const{isMobile:s}=U(),i=r=>()=>{o(r)};return t("div",{className:M({"vm-time-duration":!0,"vm-time-duration_mobile":s}),children:qt.map(({id:r,duration:a,until:c,title:n})=>t("div",{className:M({"vm-list-item":!0,"vm-list-item_mobile":s,"vm-list-item_active":r===e}),onClick:i({duration:a,until:c(),id:r}),children:n||a},r))})},Vl=({viewDate:e,showArrowNav:o,onChangeViewDate:s,toggleDisplayYears:i})=>{const r=()=>{s(e.subtract(1,"month"))},a=()=>{s(e.add(1,"month"))};return t("div",{className:"vm-calendar-header",children:[t("div",{className:"vm-calendar-header-left",onClick:i,children:[t("span",{className:"vm-calendar-header-left__date",children:e.format("MMMM YYYY")}),t("div",{className:"vm-calendar-header-left__select-year",children:t(De,{})})]}),o&&t("div",{className:"vm-calendar-header-right",children:[t("div",{className:"vm-calendar-header-right__prev",onClick:r,children:t(de,{})}),t("div",{className:"vm-calendar-header-right__next",onClick:a,children:t(de,{})})]})]})},Bl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$l=({viewDate:e,selectDate:o,onChangeSelectDate:s})=>{const i="YYYY-MM-DD",r=F.tz(),a=F(e.format(i)),c=E(()=>{const l=new Array(42).fill(null),m=a.startOf("month"),u=a.endOf("month").diff(m,"day")+1,h=new Array(u).fill(m).map((g,f)=>g.add(f,"day")),p=m.day();return l.splice(p,u,...h),l},[a]),n=l=>()=>{l&&s(l)};return t("div",{className:"vm-calendar-body",children:[Bl.map(l=>t(j,{title:l,children:t("div",{className:"vm-calendar-body-cell vm-calendar-body-cell_weekday",children:l[0]})},l)),c.map((l,m)=>t("div",{className:M({"vm-calendar-body-cell":!0,"vm-calendar-body-cell_day":!0,"vm-calendar-body-cell_day_empty":!l,"vm-calendar-body-cell_day_active":(l&&l.format(i))===o.format(i),"vm-calendar-body-cell_day_today":(l&&l.format(i))===r.format(i)}),onClick:n(l),children:l&&l.format("D")},l?l.format(i):m))]})},Ul=({viewDate:e,onChangeViewDate:o})=>{const s=F().format("YYYY"),i=E(()=>e.format("YYYY"),[e]),r=E(()=>{const l=F().subtract(18/2,"year");return new Array(18).fill(l).map((m,d)=>m.add(d,"year"))},[e]);T(()=>{const c=document.getElementById(`vm-calendar-year-${i}`);c&&c.scrollIntoView({block:"center"})},[]);const a=c=>()=>{o(c)};return t("div",{className:"vm-calendar-years",children:r.map(c=>t("div",{className:M({"vm-calendar-years__year":!0,"vm-calendar-years__year_selected":c.format("YYYY")===i,"vm-calendar-years__year_today":c.format("YYYY")===s}),id:`vm-calendar-year-${c.format("YYYY")}`,onClick:a(c),children:c.format("YYYY")},c.format("YYYY")))})},jl=({viewDate:e,selectDate:o,onChangeViewDate:s})=>{const i=F().format("MM"),r=E(()=>o.format("MM"),[o]),a=E(()=>new Array(12).fill("").map((n,l)=>F(e).month(l)),[e]);T(()=>{const n=document.getElementById(`vm-calendar-year-${r}`);n&&n.scrollIntoView({block:"center"})},[]);const c=n=>()=>{s(n)};return t("div",{className:"vm-calendar-years",children:a.map(n=>t("div",{className:M({"vm-calendar-years__year":!0,"vm-calendar-years__year_selected":n.format("MM")===r,"vm-calendar-years__year_today":n.format("MM")===i}),id:`vm-calendar-year-${n.format("MM")}`,onClick:c(n),children:n.format("MMMM")},n.format("MM")))})},Yl=({date:e,format:o=Le,onChange:s})=>{const[i,r]=N(0),[a,c]=N(F.tz(e)),[n,l]=N(F.tz(e)),m=F.tz(),d=m.format(Qo)===a.format(Qo),{isMobile:u}=U(),h=()=>{r(v=>v===2?0:2)},p=v=>{c(v),r(_=>_===2?1:0)},g=v=>{l(v)},f=()=>{c(m)};return T(()=>{n.format()!==F.tz(e).format()&&s(n.format(o))},[n]),T(()=>{const v=F.tz(e);c(v),l(v)},[e]),t("div",{className:M({"vm-calendar":!0,"vm-calendar_mobile":u}),children:[t(Vl,{viewDate:a,onChangeViewDate:p,toggleDisplayYears:h,showArrowNav:i===0}),i===0&&t($l,{viewDate:a,selectDate:n,onChangeSelectDate:g}),i===2&&t(Ul,{viewDate:a,onChangeViewDate:p}),i===1&&t(jl,{selectDate:n,viewDate:a,onChangeViewDate:p}),!d&&i===0&&t("div",{className:"vm-calendar-footer",children:t(R,{variant:"text",size:"small",onClick:f,children:"show today"})})]})},Gl=Lt(({date:e,targetRef:o,format:s=Le,onChange:i,label:r},a)=>{const c=E(()=>F(e).isValid()?F.tz(e):F().tz(),[e]),{isMobile:n}=U(),{value:l,toggle:m,setFalse:d}=Z(),u=p=>{i(p),d()},h=p=>{(p.key==="Escape"||p.key==="Enter")&&d()};return te("click",m,o),te("keyup",h),t(V,{children:t(Se,{open:l,buttonRef:o,placement:"bottom-right",onClose:d,title:n?r:void 0,children:t("div",{ref:a,children:t(Yl,{date:c,format:s,onChange:u})})})})}),Ss=e=>F(e).isValid()?F.tz(e).format(Le):e,Ns=({value:e="",label:o,pickerLabel:s,pickerRef:i,onChange:r,onEnter:a})=>{const c=D(null),[n,l]=N(null),[m,d]=N(Ss(e)),[u,h]=N(!1),[p,g]=N(!1),f=F(m).isValid()?"":"Invalid date format",v=w=>{d(w.currentTarget.value)},_=()=>{r(m)},b=w=>{w.key==="Enter"&&(r(m),g(!0))},y=w=>{d(w),h(!0)};return T(()=>{const w=Ss(e);w!==m&&d(w),p&&(a(),g(!1))},[e]),T(()=>{u&&n&&(n.focus(),n.setSelectionRange(11,11),h(!1))},[u]),t("div",{className:M({"vm-date-time-input":!0,"vm-date-time-input_error":f}),children:[t("label",{children:o}),t(tr,{tabIndex:1,inputRef:l,mask:"9999-99-99 99:99:99",placeholder:"YYYY-MM-DD HH:mm:ss",value:m,autoCapitalize:"none",inputMode:"numeric",maskChar:null,onChange:v,onBlur:_,onKeyUp:b}),f&&t("span",{className:"vm-date-time-input__error-text",children:f}),t("div",{className:"vm-date-time-input__icon",ref:c,children:t(R,{variant:"text",color:"gray",size:"small",startIcon:t(Ws,{}),ariaLabel:"calendar"})}),t(Gl,{label:s,ref:i,date:m,onChange:y,targetRef:c})]})},Ql=({onOpenSettings:e})=>{const{isMobile:o}=U(),{isDarkTheme:s}=se(),{queryHasTimeFilter:i}=ht(),r=D(null),a=gt(),c=E(()=>a.width>1120,[a]),[n,l]=N(),[m,d]=N(),{period:{end:u,start:h},relativeTime:p,timezone:g,duration:f}=Oe(),v=tt(),_=ze(),b=We(g),{value:y,toggle:w,setFalse:k}=Z(),S=E(()=>({region:g,utc:lt(g)}),[g]);T(()=>{l(yt(Ce(u)))},[g,u]),T(()=>{d(yt(Ce(h)))},[g,h]);const q=({duration:Q,until:J,id:G})=>{v({type:"SET_RELATIVE_TIME",payload:{duration:Q,until:J,id:G}}),k()},x=E(()=>{const Q=F.tz(Ce(h)).format(Le),J=F.tz(Ce(u)).format(Le);return{start:Q,end:J}},[h,u,g]),C=E(()=>p&&p!=="none"?p.replace(/_/g," "):`${x.start} - ${x.end}`,[p,x]),A=D(null),L=D(null),I=D(null),z=()=>{m&&n&&v({type:"SET_PERIOD",payload:{from:F.tz(m).toDate(),to:F.tz(n).toDate()}}),k()},B=()=>v({type:"RUN_QUERY_TO_NOW"}),$=()=>{l(yt(Ce(u))),d(yt(Ce(h))),k()},K=()=>{e&&e(),k()};return T(()=>{const Q=yo({relativeTimeId:p,defaultDuration:f,defaultEndInput:Ce(u)});b&&g!==b&&q({id:Q.relativeTimeId,duration:Q.duration,until:Q.endInput})},[g,b]),ft(r,Q=>{if(o)return;const J=Q.target,G=A?.current&&A?.current?.contains(J),P=L?.current&&L?.current?.contains(J);G||P||k()}),t(V,{children:[t("div",{ref:I,children:o?t("div",{className:"vm-mobile-option",onClick:w,children:[t("span",{className:"vm-mobile-option__icon",children:t(xt,{})}),t("div",{className:"vm-mobile-option-text",children:[t("span",{className:"vm-mobile-option-text__label",children:"Time range"}),t("span",{className:"vm-mobile-option-text__value",children:C})]}),t("span",{className:"vm-mobile-option__arrow",children:t(de,{})})]}):t(j,{title:c?"Time range controls":C,children:t(R,{className:_?"":"vm-header-button",variant:"contained",color:"primary",startIcon:t(xt,{}),onClick:w,ariaLabel:"time range controls",children:c&&t("span",{children:C})})})}),t(Se,{open:y,buttonRef:I,placement:"bottom-right",onClose:k,clickOutside:!1,title:o?"Time range controls":"",children:t("div",{className:M({"vm-time-selector":!0,"vm-time-selector_mobile":o}),ref:r,children:[i&&t("div",{className:"vm-time-selector-warning",children:[t("p",{children:"Time range is overridden by the query `_time` filter."}),t("p",{children:"Remove `_time` from the query to use manual selection."}),t("p",{className:"vm-time-selector-warning__interactive",onClick:K,children:"To disable query time override in settings, click here."})]}),t("div",{className:"vm-time-selector-left",children:[t("div",{className:M({"vm-time-selector-left-inputs":!0,"vm-time-selector-left-inputs_dark":s}),children:[t(Ns,{value:m,label:"From:",pickerLabel:"Date From",pickerRef:A,onChange:d,onEnter:z}),t(Ns,{value:n,label:"To:",pickerLabel:"Date To",pickerRef:L,onChange:l,onEnter:z})]}),t("div",{className:"vm-time-selector-left-timezone",onClick:K,children:[t("div",{className:"vm-time-selector-left-timezone__title",children:S.region}),t("div",{className:"vm-time-selector-left-timezone__utc",children:S.utc})]}),t(R,{variant:"text",startIcon:t(Ks,{}),onClick:B,children:"switch to now"}),t("div",{className:"vm-time-selector-left__controls",children:[t(R,{color:"error",variant:"outlined",onClick:$,children:"Cancel"}),t(R,{color:"primary",onClick:z,children:"Apply"})]})]}),t(Hl,{relativeTime:p||"",setDuration:q})]})})]})},Wl=e=>`${e}/select/tenant_ids`,Kl=()=>{const{serverUrl:e}=se(),[o,s]=N(!1),[i,r]=N(),[a,c]=N([]),n=E(()=>Wl(e),[e]);return T(()=>{(async()=>{s(!0);try{const u=(await(await fetch(n)).json()).map(({account_id:h,project_id:p})=>`${h}:${p}`);c(u.sort((h,p)=>h.localeCompare(p)))}catch(m){m instanceof Error&&r(`${m.name}: ${m.message}`)}s(!1)})().catch(console.error)},[n]),{accountIds:a,isLoading:o,error:i}},Zl=({accountIds:e,tenantId:o,onChange:s})=>{const{isMobile:i}=U(),[r,a]=N(""),c=E(()=>{if(!r)return e;try{const l=new RegExp(r,"i");return e.filter(d=>l.test(d)).sort((d,u)=>(d.match(l)?.index||0)-(u.match(l)?.index||0))}catch{return[]}},[r,e]),n=l=>()=>{const[m,d]=l.split(":");s({accountId:m,projectId:d})};return t("div",{className:M({"vm-list vm-tenant-input-list":!0,"vm-list vm-tenant-input-list_mobile":i}),children:[t("div",{className:"vm-tenant-input-list__search",children:t(ke,{autofocus:!0,label:"Search",value:r,onChange:a,type:"search"})}),c.map(l=>t("div",{className:M({"vm-list-item":!0,"vm-list-item_mobile":i,"vm-list-item_active":l===o}),onClick:n(l),children:l},l)),t("div",{className:"vm-tenant-input-list__buttons",children:t("a",{href:"https://docs.victoriametrics.com/victorialogs/#multitenancy",target:"_blank",rel:"help noreferrer",children:t(R,{variant:"text",color:"primary",children:"Read more"})})})]})},Jl=({accountId:e,projectId:o,onChange:s})=>{const{isMobile:i}=U(),[r,a]=N(e),[c,n]=N(o),l=O(()=>{s({accountId:r||e,projectId:c||o})},[r,e,c,o]);return T(()=>{a(e),n(o)},[e,o]),t("div",{className:M({"vm-list vm-tenant-input-list":!0,"vm-list vm-tenant-input-list_mobile":i}),children:[t("div",{className:"vm-tenant-input-list__fields",children:[t(ke,{autofocus:!0,label:"accountID",value:r,onChange:a,type:"number"}),t(ke,{autofocus:!0,label:"projectID",value:c,onChange:n,type:"number"})]}),t("div",{className:"vm-tenant-input-list__buttons",children:[t("a",{href:"https://docs.victoriametrics.com/victorialogs/#multitenancy",target:"_blank",rel:"help noreferrer",children:t(R,{variant:"text",color:"primary",children:"Read more"})}),t(R,{variant:"contained",color:"primary",onClick:l,children:"Apply"})]})]})},Xl=()=>{const{accountIds:e}=Kl(),{isMobile:o}=U(),s=tt(),[i,r]=X(),a=i.get("accountID")||"0",c=i.get("projectID")||"0",n=`${a}:${c}`,l=D(null),{value:m,toggle:d,setFalse:u}=Z(),p={tenantId:n,accountIds:e,accountId:a,projectId:c,onChange:({accountId:g,projectId:f})=>{g&&i.set("accountID",g),f&&i.set("projectID",f),r(i),s({type:"RUN_QUERY"}),u()}};return t("div",{className:"vm-tenant-input",children:[t(j,{title:"Define Tenant ID if you need request to another storage",children:t("div",{ref:l,children:o?t("div",{className:"vm-mobile-option",onClick:d,children:[t("span",{className:"vm-mobile-option__icon",children:t(St,{})}),t("div",{className:"vm-mobile-option-text",children:[t("span",{className:"vm-mobile-option-text__label",children:"Tenant ID"}),t("span",{className:"vm-mobile-option-text__value",children:n})]}),t("span",{className:"vm-mobile-option__arrow",children:t(de,{})})]}):t(R,{className:"vm-header-button",variant:"contained",color:"primary",fullWidth:!0,startIcon:t(St,{}),endIcon:t("div",{className:M({"vm-execution-controls-buttons__arrow":!0,"vm-execution-controls-buttons__arrow_open":m}),children:t(de,{})}),onClick:d,children:n})})}),t(Se,{open:m,placement:"bottom-right",onClose:u,buttonRef:l,title:o?"Define Tenant ID":void 0,children:e.length?t(Zl,{...p}):t(Jl,{...p})})]})},eo=[{seconds:0,title:"Off"},{seconds:1,title:"1s"},{seconds:2,title:"2s"},{seconds:5,title:"5s"},{seconds:10,title:"10s"},{seconds:30,title:"30s"},{seconds:60,title:"1m"},{seconds:300,title:"5m"},{seconds:900,title:"15m"},{seconds:1800,title:"30m"},{seconds:3600,title:"1h"},{seconds:7200,title:"2h"}],ed=()=>{const{isMobile:e}=U(),o=tt(),s=ze(),[i,r]=N(!1),[a,c]=N(eo[0]),{value:n,toggle:l,setFalse:m}=Z(),d=D(null),u=g=>{(i&&!g.seconds||!i&&g.seconds)&&r(f=>!f),c(g),m()},h=()=>{o({type:"RUN_QUERY"})};T(()=>{const g=a.seconds;let f;return i?f=setInterval(()=>{o({type:"RUN_QUERY"})},g*1e3):c(eo[0]),()=>{f&&clearInterval(f)}},[a,i]);const p=g=>()=>{u(g)};return t(V,{children:[t("div",{className:"vm-execution-controls",children:t("div",{className:M({"vm-execution-controls-buttons":!0,"vm-execution-controls-buttons_mobile":e,"vm-header-button":!s}),children:[!e&&t(j,{title:"Refresh dashboard",children:t(R,{variant:"contained",color:"primary",onClick:h,startIcon:t(Ao,{}),ariaLabel:"refresh dashboard"})}),e?t("div",{className:"vm-mobile-option",onClick:l,children:[t("span",{className:"vm-mobile-option__icon",children:t(ct,{})}),t("div",{className:"vm-mobile-option-text",children:[t("span",{className:"vm-mobile-option-text__label",children:"Auto-refresh"}),t("span",{className:"vm-mobile-option-text__value",children:a.title})]}),t("span",{className:"vm-mobile-option__arrow",children:t(de,{})})]}):t(j,{title:"Auto-refresh control",children:t("div",{ref:d,children:t(R,{variant:"contained",color:"primary",fullWidth:!0,endIcon:t("div",{className:M({"vm-execution-controls-buttons__arrow":!0,"vm-execution-controls-buttons__arrow_open":n}),children:t(de,{})}),onClick:l,children:a.title})})})]})}),t(Se,{open:n,placement:"bottom-right",onClose:m,buttonRef:d,title:e?"Auto-refresh duration":void 0,children:t("div",{className:M({"vm-execution-controls-list":!0,"vm-execution-controls-list_mobile":e}),children:eo.map(g=>t("div",{className:M({"vm-list-item":!0,"vm-list-item_mobile":e,"vm-list-item_active":g.seconds===a.seconds}),onClick:p(g),children:g.title},g.seconds))})})]})},td=({isMobile:e,headerSetup:o})=>{const s=ze(),i=D(null);return t("div",{className:M({"vm-header-controls":!0,"vm-header-controls_mobile":e}),children:[o?.tenant&&t(Xl,{}),o?.timeSelector&&t(Ql,{onOpenSettings:i?.current?.open}),o?.executionControls&&t(ed,{}),t(zl,{ref:i}),!e&&t(Ri,{children:t(R,{className:s?"":"vm-header-button",variant:"contained",color:"primary",startIcon:t(Zs,{})})})]})};var we=(e=>(e.NO_STORAGE="NO_STORAGE",e.SECURITY_ERROR="SECURITY_ERROR",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.UNKNOWN="UNKNOWN",e))(we||{});const od={[we.NO_STORAGE]:{title:"Storage unavailable",description:"Browser storage is not available for this website.",fix:["Disable Private/Incognito mode and reload the page.","Disable privacy or ad-blocking extensions for this site and reload.","Open the site in another browser."]},[we.SECURITY_ERROR]:{title:"Storage access blocked",description:"Browser settings or an extension are blocking access to browser storage.",fix:["Disable Private/Incognito mode and reload the page.","Disable privacy or ad-blocking extensions for this site and reload.","Open the site in a regular browser tab (not embedded)."]},[we.QUOTA_EXCEEDED]:{title:"Storage quota exceeded",description:"The storage limit for this website has been reached.",fix:["Clear this websites stored data and reload the page.","Close other tabs for this website and try again.","Use another browser or browser profile."]},[we.UNKNOWN]:{title:"Storage error",description:"An unexpected error occurred while accessing browser storage.",fix:["Reload the page.","Update the browser and try again.","Disable browser extensions and reload."]}},sd=e=>{if(!(e instanceof DOMException))return we.UNKNOWN;switch(e.name){case"QuotaExceededError":return we.QUOTA_EXCEEDED;case"SecurityError":return we.SECURITY_ERROR;default:return we.UNKNOWN}},id=e=>{if(!e)return we.NO_STORAGE;try{const o="__vmui_test__";return e.setItem(o,"1"),e.removeItem(o),null}catch(o){return sd(o)}},rd=()=>{const{showInfoMessage:e}=vi();return T(()=>{const o=id(window.localStorage);if(o){const{title:s,description:i,fix:r}=od[o],a=t("div",{className:"vm-storage-check",children:[t("h3",{children:s}),t("p",{children:i}),!!r?.length&&t("div",{className:"vm-storage-check__fix",children:[t("div",{children:"Try this:"}),t("ul",{children:r.map((c,n)=>t("li",{children:c},`${n}-${c}`))})]})]});e({text:a,type:"error",timeout:6e5})}},[]),null},ad=()=>{const e=ze(),{isMobile:o}=U(),{pathname:s}=je();return T(()=>{const a=Object.entries(Rt).find(([n])=>Ls(n,s))?.[1]?.title,c="UI for VictoriaLogs";document.title=a?`${a} - ${c}`:c},[s]),T(()=>{const r=pr();(r.removed.length||r.migrated.length)&&console.info(r)},[]),t("section",{className:"vm-container",children:[t(Cl,{controlsComponent:td}),t("div",{className:M({"vm-container-body":!0,"vm-container-body_mobile":o,"vm-container-body_app":e}),children:t(or,{})}),!e&&t(El,{links:Bi}),t(rd,{})]})},cd=()=>{const{_stream_id:e,_time:o}=sr(),[s]=X(),i=s.get(ee.DISPLAY_FIELDS)||Ke,r=E(()=>i.split(","),[i]);return!e||!o?t("div",{children:"Error: Missing stream ID or time."}):t("div",{className:"vm-stream-context-page",children:t(Ti,{log:{_stream_id:e,_time:o,_msg:"",_stream:""},displayFields:r})})};function nd(e){const{emojis:o}=e;if(!o)throw new Error("Must provide emojis to markedEmoji");const s=Object.keys(o).map(a=>a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|");if(s.length===0)throw new Error("Emoji list is empty; provide at least one emoji.");const i=new RegExp(`:(${s}):`),r=new RegExp(`^${i.source}`);return{extensions:[{name:"emoji",level:"inline",start(a){return a.match(i)?.index},tokenizer(a){const c=r.exec(a);if(!c)return;const n=c[1],l=o[n];if(l)return{type:"emoji",raw:c[0],name:n,emoji:l}},renderer(a){return e.renderer(a)}}]}}const ld={100:"",1234:"",grinning:"",smiley:"",smile:"",grin:"",laughing:"",satisfied:"",sweat_smile:"",rofl:"",joy:"",slightly_smiling_face:"",upside_down_face:"",melting_face:"",wink:"",blush:"",innocent:"",smiling_face_with_three_hearts:"",heart_eyes:"",star_struck:"",kissing_heart:"",kissing:"",relaxed:"",kissing_closed_eyes:"",kissing_smiling_eyes:"",smiling_face_with_tear:"",yum:"",stuck_out_tongue:"",stuck_out_tongue_winking_eye:"",zany_face:"",stuck_out_tongue_closed_eyes:"",money_mouth_face:"",hugs:"",hand_over_mouth:"",face_with_open_eyes_and_hand_over_mouth:"",face_with_peeking_eye:"",shushing_face:"",thinking:"",saluting_face:"",zipper_mouth_face:"",raised_eyebrow:"",neutral_face:"",expressionless:"",no_mouth:"",dotted_line_face:"",face_in_clouds:"",smirk:"",unamused:"",roll_eyes:"",grimacing:"",face_exhaling:"",lying_face:"",shaking_face:"",relieved:"",pensive:"",sleepy:"",drooling_face:"",sleeping:"",mask:"",face_with_thermometer:"",face_with_head_bandage:"",nauseated_face:"",vomiting_face:"",sneezing_face:"",hot_face:"",cold_face:"",woozy_face:"",dizzy_face:"",face_with_spiral_eyes:"",exploding_head:"",cowboy_hat_face:"",partying_face:"",disguised_face:"",sunglasses:"",nerd_face:"",monocle_face:"",confused:"",face_with_diagonal_mouth:"",worried:"",slightly_frowning_face:"",frowning_face:"",open_mouth:"",hushed:"",astonished:"",flushed:"",pleading_face:"",face_holding_back_tears:"",frowning:"",anguished:"",fearful:"",cold_sweat:"",disappointed_relieved:"",cry:"",sob:"",scream:"",confounded:"",persevere:"",disappointed:"",sweat:"",weary:"",tired_face:"",yawning_face:"",triumph:"",rage:"",pout:"",angry:"",cursing_face:"",smiling_imp:"",imp:"",skull:"",skull_and_crossbones:"",hankey:"",poop:"",shit:"",clown_face:"",japanese_ogre:"",japanese_goblin:"",ghost:"",alien:"",space_invader:"",robot:"",smiley_cat:"",smile_cat:"",joy_cat:"",heart_eyes_cat:"",smirk_cat:"",kissing_cat:"",scream_cat:"",crying_cat_face:"",pouting_cat:"",see_no_evil:"",hear_no_evil:"",speak_no_evil:"",love_letter:"",cupid:"",gift_heart:"",sparkling_heart:"",heartpulse:"",heartbeat:"",revolving_hearts:"",two_hearts:"",heart_decoration:"",heavy_heart_exclamation:"",broken_heart:"",heart_on_fire:"",mending_heart:"",heart:"",pink_heart:"",orange_heart:"",yellow_heart:"",green_heart:"",blue_heart:"",light_blue_heart:"",purple_heart:"",brown_heart:"",black_heart:"",grey_heart:"",white_heart:"",kiss:"",anger:"",boom:"",collision:"",dizzy:"",sweat_drops:"",dash:"",hole:"",speech_balloon:"",eye_speech_bubble:"",left_speech_bubble:"",right_anger_bubble:"",thought_balloon:"",zzz:"",wave:"",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",hand:"",raised_hand:"",vulcan_salute:"",rightwards_hand:"",leftwards_hand:"",palm_down_hand:"",palm_up_hand:"",leftwards_pushing_hand:"",rightwards_pushing_hand:"",ok_hand:"",pinched_fingers:"",pinching_hand:"",v:"",crossed_fingers:"",hand_with_index_finger_and_thumb_crossed:"",love_you_gesture:"",metal:"",call_me_hand:"",point_left:"",point_right:"",point_up_2:"",middle_finger:"",fu:"",point_down:"",point_up:"",index_pointing_at_the_viewer:"","+1":"",thumbsup:"","-1":"",thumbsdown:"",fist_raised:"",fist:"",fist_oncoming:"",facepunch:"",punch:"",fist_left:"",fist_right:"",clap:"",raised_hands:"",heart_hands:"",open_hands:"",palms_up_together:"",handshake:"",pray:"",writing_hand:"",nail_care:"",selfie:"",muscle:"",mechanical_arm:"",mechanical_leg:"",leg:"",foot:"",ear:"",ear_with_hearing_aid:"",nose:"",brain:"",anatomical_heart:"",lungs:"",tooth:"",bone:"",eyes:"",eye:"",tongue:"",lips:"",biting_lip:"",baby:"",child:"",boy:"",girl:"",adult:"",blond_haired_person:"",man:"",bearded_person:"",man_beard:"",woman_beard:"",red_haired_man:"",curly_haired_man:"",white_haired_man:"",bald_man:"",woman:"",red_haired_woman:"",person_red_hair:"",curly_haired_woman:"",person_curly_hair:"",white_haired_woman:"",person_white_hair:"",bald_woman:"",person_bald:"",blond_haired_woman:"",blonde_woman:"",blond_haired_man:"",older_adult:"",older_man:"",older_woman:"",frowning_person:"",frowning_man:"",frowning_woman:"",pouting_face:"",pouting_man:"",pouting_woman:"",no_good:"",no_good_man:"",ng_man:"",no_good_woman:"",ng_woman:"",ok_person:"",ok_man:"",ok_woman:"",tipping_hand_person:"",information_desk_person:"",tipping_hand_man:"",sassy_man:"",tipping_hand_woman:"",sassy_woman:"",raising_hand:"",raising_hand_man:"",raising_hand_woman:"",deaf_person:"",deaf_man:"",deaf_woman:"",bow:"",bowing_man:"",bowing_woman:"",facepalm:"",man_facepalming:"",woman_facepalming:"",shrug:"",man_shrugging:"",woman_shrugging:"",health_worker:"",man_health_worker:"",woman_health_worker:"",student:"",man_student:"",woman_student:"",teacher:"",man_teacher:"",woman_teacher:"",judge:"",man_judge:"",woman_judge:"",farmer:"",man_farmer:"",woman_farmer:"",cook:"",man_cook:"",woman_cook:"",mechanic:"",man_mechanic:"",woman_mechanic:"",factory_worker:"",man_factory_worker:"",woman_factory_worker:"",office_worker:"",man_office_worker:"",woman_office_worker:"",scientist:"",man_scientist:"",woman_scientist:"",technologist:"",man_technologist:"",woman_technologist:"",singer:"",man_singer:"",woman_singer:"",artist:"",man_artist:"",woman_artist:"",pilot:"",man_pilot:"",woman_pilot:"",astronaut:"",man_astronaut:"",woman_astronaut:"",firefighter:"",man_firefighter:"",woman_firefighter:"",police_officer:"",cop:"",policeman:"",policewoman:"",detective:"",male_detective:"",female_detective:"",guard:"",guardsman:"",guardswoman:"",ninja:"",construction_worker:"",construction_worker_man:"",construction_worker_woman:"",person_with_crown:"",prince:"",princess:"",person_with_turban:"",man_with_turban:"",woman_with_turban:"",man_with_gua_pi_mao:"",woman_with_headscarf:"",person_in_tuxedo:"",man_in_tuxedo:"",woman_in_tuxedo:"",person_with_veil:"",man_with_veil:"",woman_with_veil:"",bride_with_veil:"",pregnant_woman:"",pregnant_man:"",pregnant_person:"",breast_feeding:"",woman_feeding_baby:"",man_feeding_baby:"",person_feeding_baby:"",angel:"",santa:"",mrs_claus:"",mx_claus:"",superhero:"",superhero_man:"",superhero_woman:"",supervillain:"",supervillain_man:"",supervillain_woman:"",mage:"",mage_man:"",mage_woman:"",fairy:"",fairy_man:"",fairy_woman:"",vampire:"",vampire_man:"",vampire_woman:"",merperson:"",merman:"",mermaid:"",elf:"",elf_man:"",elf_woman:"",genie:"",genie_man:"",genie_woman:"",zombie:"",zombie_man:"",zombie_woman:"",troll:"",massage:"",massage_man:"",massage_woman:"",haircut:"",haircut_man:"",haircut_woman:"",walking:"",walking_man:"",walking_woman:"",standing_person:"",standing_man:"",standing_woman:"",kneeling_person:"",kneeling_man:"",kneeling_woman:"",person_with_probing_cane:"",man_with_probing_cane:"",woman_with_probing_cane:"",person_in_motorized_wheelchair:"",man_in_motorized_wheelchair:"",woman_in_motorized_wheelchair:"",person_in_manual_wheelchair:"",man_in_manual_wheelchair:"",woman_in_manual_wheelchair:"",runner:"",running:"",running_man:"",running_woman:"",woman_dancing:"",dancer:"",man_dancing:"",business_suit_levitating:"",dancers:"",dancing_men:"",dancing_women:"",sauna_person:"",sauna_man:"",sauna_woman:"",climbing:"",climbing_man:"",climbing_woman:"",person_fencing:"",horse_racing:"",skier:"",snowboarder:"",golfing:"",golfing_man:"",golfing_woman:"",surfer:"",surfing_man:"",surfing_woman:"",rowboat:"",rowing_man:"",rowing_woman:"",swimmer:"",swimming_man:"",swimming_woman:"",bouncing_ball_person:"",bouncing_ball_man:"",basketball_man:"",bouncing_ball_woman:"",basketball_woman:"",weight_lifting:"",weight_lifting_man:"",weight_lifting_woman:"",bicyclist:"",biking_man:"",biking_woman:"",mountain_bicyclist:"",mountain_biking_man:"",mountain_biking_woman:"",cartwheeling:"",man_cartwheeling:"",woman_cartwheeling:"",wrestling:"",men_wrestling:"",women_wrestling:"",water_polo:"",man_playing_water_polo:"",woman_playing_water_polo:"",handball_person:"",man_playing_handball:"",woman_playing_handball:"",juggling_person:"",man_juggling:"",woman_juggling:"",lotus_position:"",lotus_position_man:"",lotus_position_woman:"",bath:"",sleeping_bed:"",people_holding_hands:"",two_women_holding_hands:"",couple:"",two_men_holding_hands:"",couplekiss:"",couplekiss_man_woman:"",couplekiss_man_man:"",couplekiss_woman_woman:"",couple_with_heart:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"",couple_with_heart_woman_woman:"",family:"",family_man_woman_boy:"",family_man_woman_girl:"",family_man_woman_girl_boy:"",family_man_woman_boy_boy:"",family_man_woman_girl_girl:"",family_man_man_boy:"",family_man_man_girl:"",family_man_man_girl_boy:"",family_man_man_boy_boy:"",family_man_man_girl_girl:"",family_woman_woman_boy:"",family_woman_woman_girl:"",family_woman_woman_girl_boy:"",family_woman_woman_boy_boy:"",family_woman_woman_girl_girl:"",family_man_boy:"",family_man_boy_boy:"",family_man_girl:"",family_man_girl_boy:"",family_man_girl_girl:"",family_woman_boy:"",family_woman_boy_boy:"",family_woman_girl:"",family_woman_girl_boy:"",family_woman_girl_girl:"",speaking_head:"",bust_in_silhouette:"",busts_in_silhouette:"",people_hugging:"",footprints:"",monkey_face:"",monkey:"",gorilla:"",orangutan:"",dog:"",dog2:"",guide_dog:"",service_dog:"",poodle:"",wolf:"",fox_face:"",raccoon:"",cat:"",cat2:"",black_cat:"",lion:"",tiger:"",tiger2:"",leopard:"",horse:"",moose:"",donkey:"",racehorse:"",unicorn:"",zebra:"",deer:"",bison:"",cow:"",ox:"",water_buffalo:"",cow2:"",pig:"",pig2:"",boar:"",pig_nose:"",ram:"",sheep:"",goat:"",dromedary_camel:"",camel:"",llama:"",giraffe:"",elephant:"",mammoth:"",rhinoceros:"",hippopotamus:"",mouse:"",mouse2:"",rat:"",hamster:"",rabbit:"",rabbit2:"",chipmunk:"",beaver:"",hedgehog:"",bat:"",bear:"",polar_bear:"",koala:"",panda_face:"",sloth:"",otter:"",skunk:"",kangaroo:"",badger:"",feet:"",paw_prints:"",turkey:"",chicken:"",rooster:"",hatching_chick:"",baby_chick:"",hatched_chick:"",bird:"",penguin:"",dove:"",eagle:"",duck:"",swan:"",owl:"",dodo:"",feather:"",flamingo:"",peacock:"",parrot:"",wing:"",black_bird:"",goose:"",frog:"",crocodile:"",turtle:"",lizard:"",snake:"",dragon_face:"",dragon:"",sauropod:"","t-rex":"",whale:"",whale2:"",dolphin:"",flipper:"",seal:"",fish:"",tropical_fish:"",blowfish:"",shark:"",octopus:"",shell:"",coral:"",jellyfish:"",snail:"",butterfly:"",bug:"",ant:"",bee:"",honeybee:"",beetle:"",lady_beetle:"",cricket:"",cockroach:"",spider:"",spider_web:"",scorpion:"",mosquito:"",fly:"",worm:"",microbe:"",bouquet:"",cherry_blossom:"",white_flower:"",lotus:"",rosette:"",rose:"",wilted_flower:"",hibiscus:"",sunflower:"",blossom:"",tulip:"",hyacinth:"",seedling:"",potted_plant:"",evergreen_tree:"",deciduous_tree:"",palm_tree:"",cactus:"",ear_of_rice:"",herb:"",shamrock:"",four_leaf_clover:"",maple_leaf:"",fallen_leaf:"",leaves:"",empty_nest:"",nest_with_eggs:"",mushroom:"",grapes:"",melon:"",watermelon:"",tangerine:"",orange:"",mandarin:"",lemon:"",banana:"",pineapple:"",mango:"",apple:"",green_apple:"",pear:"",peach:"",cherries:"",strawberry:"",blueberries:"",kiwi_fruit:"",tomato:"",olive:"",coconut:"",avocado:"",eggplant:"",potato:"",carrot:"",corn:"",hot_pepper:"",bell_pepper:"",cucumber:"",leafy_green:"",broccoli:"",garlic:"",onion:"",peanuts:"",beans:"",chestnut:"",ginger_root:"",pea_pod:"",bread:"",croissant:"",baguette_bread:"",flatbread:"",pretzel:"",bagel:"",pancakes:"",waffle:"",cheese:"",meat_on_bone:"",poultry_leg:"",cut_of_meat:"",bacon:"",hamburger:"",fries:"",pizza:"",hotdog:"",sandwich:"",taco:"",burrito:"",tamale:"",stuffed_flatbread:"",falafel:"",egg:"",fried_egg:"",shallow_pan_of_food:"",stew:"",fondue:"",bowl_with_spoon:"",green_salad:"",popcorn:"",butter:"",salt:"",canned_food:"",bento:"",rice_cracker:"",rice_ball:"",rice:"",curry:"",ramen:"",spaghetti:"",sweet_potato:"",oden:"",sushi:"",fried_shrimp:"",fish_cake:"",moon_cake:"",dango:"",dumpling:"",fortune_cookie:"",takeout_box:"",crab:"",lobster:"",shrimp:"",squid:"",oyster:"",icecream:"",shaved_ice:"",ice_cream:"",doughnut:"",cookie:"",birthday:"",cake:"",cupcake:"",pie:"",chocolate_bar:"",candy:"",lollipop:"",custard:"",honey_pot:"",baby_bottle:"",milk_glass:"",coffee:"",teapot:"",tea:"",sake:"",champagne:"",wine_glass:"",cocktail:"",tropical_drink:"",beer:"",beers:"",clinking_glasses:"",tumbler_glass:"",pouring_liquid:"",cup_with_straw:"",bubble_tea:"",beverage_box:"",mate:"",ice_cube:"",chopsticks:"",plate_with_cutlery:"",fork_and_knife:"",spoon:"",hocho:"",knife:"",jar:"",amphora:"",earth_africa:"",earth_americas:"",earth_asia:"",globe_with_meridians:"",world_map:"",japan:"",compass:"",mountain_snow:"",mountain:"",volcano:"",mount_fuji:"",camping:"",beach_umbrella:"",desert:"",desert_island:"",national_park:"",stadium:"",classical_building:"",building_construction:"",bricks:"",rock:"",wood:"",hut:"",houses:"",derelict_house:"",house:"",house_with_garden:"",office:"",post_office:"",european_post_office:"",hospital:"",bank:"",hotel:"",love_hotel:"",convenience_store:"",school:"",department_store:"",factory:"",japanese_castle:"",european_castle:"",wedding:"",tokyo_tower:"",statue_of_liberty:"",church:"",mosque:"",hindu_temple:"",synagogue:"",shinto_shrine:"",kaaba:"",fountain:"",tent:"",foggy:"",night_with_stars:"",cityscape:"",sunrise_over_mountains:"",sunrise:"",city_sunset:"",city_sunrise:"",bridge_at_night:"",hotsprings:"",carousel_horse:"",playground_slide:"",ferris_wheel:"",roller_coaster:"",barber:"",circus_tent:"",steam_locomotive:"",railway_car:"",bullettrain_side:"",bullettrain_front:"",train2:"",metro:"",light_rail:"",station:"",tram:"",monorail:"",mountain_railway:"",train:"",bus:"",oncoming_bus:"",trolleybus:"",minibus:"",ambulance:"",fire_engine:"",police_car:"",oncoming_police_car:"",taxi:"",oncoming_taxi:"",car:"",red_car:"",oncoming_automobile:"",blue_car:"",pickup_truck:"",truck:"",articulated_lorry:"",tractor:"",racing_car:"",motorcycle:"",motor_scooter:"",manual_wheelchair:"",motorized_wheelchair:"",auto_rickshaw:"",bike:"",kick_scooter:"",skateboard:"",roller_skate:"",busstop:"",motorway:"",railway_track:"",oil_drum:"",fuelpump:"",wheel:"",rotating_light:"",traffic_light:"",vertical_traffic_light:"",stop_sign:"",construction:"",anchor:"",ring_buoy:"",boat:"",sailboat:"",canoe:"",speedboat:"",passenger_ship:"",ferry:"",motor_boat:"",ship:"",airplane:"",small_airplane:"",flight_departure:"",flight_arrival:"",parachute:"",seat:"",helicopter:"",suspension_railway:"",mountain_cableway:"",aerial_tramway:"",artificial_satellite:"",rocket:"",flying_saucer:"",bellhop_bell:"",luggage:"",hourglass:"",hourglass_flowing_sand:"",watch:"",alarm_clock:"",stopwatch:"",timer_clock:"",mantelpiece_clock:"",clock12:"",clock1230:"",clock1:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",clock10:"",clock1030:"",clock11:"",clock1130:"",new_moon:"",waxing_crescent_moon:"",first_quarter_moon:"",moon:"",waxing_gibbous_moon:"",full_moon:"",waning_gibbous_moon:"",last_quarter_moon:"",waning_crescent_moon:"",crescent_moon:"",new_moon_with_face:"",first_quarter_moon_with_face:"",last_quarter_moon_with_face:"",thermometer:"",sunny:"",full_moon_with_face:"",sun_with_face:"",ringed_planet:"",star:"",star2:"",stars:"",milky_way:"",cloud:"",partly_sunny:"",cloud_with_lightning_and_rain:"",sun_behind_small_cloud:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",cloud_with_rain:"",cloud_with_snow:"",cloud_with_lightning:"",tornado:"",fog:"",wind_face:"",cyclone:"",rainbow:"",closed_umbrella:"",open_umbrella:"",umbrella:"",parasol_on_ground:"",zap:"",snowflake:"",snowman_with_snow:"",snowman:"",comet:"",fire:"",droplet:"",ocean:"",jack_o_lantern:"",christmas_tree:"",fireworks:"",sparkler:"",firecracker:"",sparkles:"",balloon:"",tada:"",confetti_ball:"",tanabata_tree:"",bamboo:"",dolls:"",flags:"",wind_chime:"",rice_scene:"",red_envelope:"",ribbon:"",gift:"",reminder_ribbon:"",tickets:"",ticket:"",medal_military:"",trophy:"",medal_sports:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"",soccer:"",baseball:"",softball:"",basketball:"",volleyball:"",football:"",rugby_football:"",tennis:"",flying_disc:"",bowling:"",cricket_game:"",field_hockey:"",ice_hockey:"",lacrosse:"",ping_pong:"",badminton:"",boxing_glove:"",martial_arts_uniform:"",goal_net:"",golf:"",ice_skate:"",fishing_pole_and_fish:"",diving_mask:"",running_shirt_with_sash:"",ski:"",sled:"",curling_stone:"",dart:"",yo_yo:"",kite:"",gun:"","8ball":"",crystal_ball:"",magic_wand:"",video_game:"",joystick:"",slot_machine:"",game_die:"",jigsaw:"",teddy_bear:"",pinata:"",mirror_ball:"",nesting_dolls:"",spades:"",hearts:"",diamonds:"",clubs:"",chess_pawn:"",black_joker:"",mahjong:"",flower_playing_cards:"",performing_arts:"",framed_picture:"",art:"",thread:"",sewing_needle:"",yarn:"",knot:"",eyeglasses:"",dark_sunglasses:"",goggles:"",lab_coat:"",safety_vest:"",necktie:"",shirt:"",tshirt:"",jeans:"",scarf:"",gloves:"",coat:"",socks:"",dress:"",kimono:"",sari:"",one_piece_swimsuit:"",swim_brief:"",shorts:"",bikini:"",womans_clothes:"",folding_hand_fan:"",purse:"",handbag:"",pouch:"",shopping:"",school_satchel:"",thong_sandal:"",mans_shoe:"",shoe:"",athletic_shoe:"",hiking_boot:"",flat_shoe:"",high_heel:"",sandal:"",ballet_shoes:"",boot:"",hair_pick:"",crown:"",womans_hat:"",tophat:"",mortar_board:"",billed_cap:"",military_helmet:"",rescue_worker_helmet:"",prayer_beads:"",lipstick:"",ring:"",gem:"",mute:"",speaker:"",sound:"",loud_sound:"",loudspeaker:"",mega:"",postal_horn:"",bell:"",no_bell:"",musical_score:"",musical_note:"",notes:"",studio_microphone:"",level_slider:"",control_knobs:"",microphone:"",headphones:"",radio:"",saxophone:"",accordion:"",guitar:"",musical_keyboard:"",trumpet:"",violin:"",banjo:"",drum:"",long_drum:"",maracas:"",flute:"",iphone:"",calling:"",phone:"",telephone:"",telephone_receiver:"",pager:"",fax:"",battery:"",low_battery:"",electric_plug:"",computer:"",desktop_computer:"",printer:"",keyboard:"",computer_mouse:"",trackball:"",minidisc:"",floppy_disk:"",cd:"",dvd:"",abacus:"",movie_camera:"",film_strip:"",film_projector:"",clapper:"",tv:"",camera:"",camera_flash:"",video_camera:"",vhs:"",mag:"",mag_right:"",candle:"",bulb:"",flashlight:"",izakaya_lantern:"",lantern:"",diya_lamp:"",notebook_with_decorative_cover:"",closed_book:"",book:"",open_book:"",green_book:"",blue_book:"",orange_book:"",books:"",notebook:"",ledger:"",page_with_curl:"",scroll:"",page_facing_up:"",newspaper:"",newspaper_roll:"",bookmark_tabs:"",bookmark:"",label:"",moneybag:"",coin:"",yen:"",dollar:"",euro:"",pound:"",money_with_wings:"",credit_card:"",receipt:"",chart:"",envelope:"",email:"","e-mail":"",incoming_envelope:"",envelope_with_arrow:"",outbox_tray:"",inbox_tray:"",package:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",postbox:"",ballot_box:"",pencil2:"",black_nib:"",fountain_pen:"",pen:"",paintbrush:"",crayon:"",memo:"",pencil:"",briefcase:"",file_folder:"",open_file_folder:"",card_index_dividers:"",date:"",calendar:"",spiral_notepad:"",spiral_calendar:"",card_index:"",chart_with_upwards_trend:"",chart_with_downwards_trend:"",bar_chart:"",clipboard:"",pushpin:"",round_pushpin:"",paperclip:"",paperclips:"",straight_ruler:"",triangular_ruler:"",scissors:"",card_file_box:"",file_cabinet:"",wastebasket:"",lock:"",unlock:"",lock_with_ink_pen:"",closed_lock_with_key:"",key:"",old_key:"",hammer:"",axe:"",pick:"",hammer_and_pick:"",hammer_and_wrench:"",dagger:"",crossed_swords:"",bomb:"",boomerang:"",bow_and_arrow:"",shield:"",carpentry_saw:"",wrench:"",screwdriver:"",nut_and_bolt:"",gear:"",clamp:"",balance_scale:"",probing_cane:"",link:"",chains:"",hook:"",toolbox:"",magnet:"",ladder:"",alembic:"",test_tube:"",petri_dish:"",dna:"",microscope:"",telescope:"",satellite:"",syringe:"",drop_of_blood:"",pill:"",adhesive_bandage:"",crutch:"",stethoscope:"",x_ray:"",door:"",elevator:"",mirror:"",window:"",bed:"",couch_and_lamp:"",chair:"",toilet:"",plunger:"",shower:"",bathtub:"",mouse_trap:"",razor:"",lotion_bottle:"",safety_pin:"",broom:"",basket:"",roll_of_paper:"",bucket:"",soap:"",bubbles:"",toothbrush:"",sponge:"",fire_extinguisher:"",shopping_cart:"",smoking:"",coffin:"",headstone:"",funeral_urn:"",nazar_amulet:"",hamsa:"",moyai:"",placard:"",identification_card:"",atm:"",put_litter_in_its_place:"",potable_water:"",wheelchair:"",men:"",women:"",restroom:"",baby_symbol:"",wc:"",passport_control:"",customs:"",baggage_claim:"",left_luggage:"",warning:"",children_crossing:"",no_entry:"",no_entry_sign:"",no_bicycles:"",no_smoking:"",do_not_litter:"","non-potable_water":"",no_pedestrians:"",no_mobile_phones:"",underage:"",radioactive:"",biohazard:"",arrow_up:"",arrow_upper_right:"",arrow_right:"",arrow_lower_right:"",arrow_down:"",arrow_lower_left:"",arrow_left:"",arrow_upper_left:"",arrow_up_down:"",left_right_arrow:"",leftwards_arrow_with_hook:"",arrow_right_hook:"",arrow_heading_up:"",arrow_heading_down:"",arrows_clockwise:"",arrows_counterclockwise:"",back:"",end:"",on:"",soon:"",top:"",place_of_worship:"",atom_symbol:"",om:"",star_of_david:"",wheel_of_dharma:"",yin_yang:"",latin_cross:"",orthodox_cross:"",star_and_crescent:"",peace_symbol:"",menorah:"",six_pointed_star:"",khanda:"",aries:"",taurus:"",gemini:"",cancer:"",leo:"",virgo:"",libra:"",scorpius:"",sagittarius:"",capricorn:"",aquarius:"",pisces:"",ophiuchus:"",twisted_rightwards_arrows:"",repeat:"",repeat_one:"",arrow_forward:"",fast_forward:"",next_track_button:"",play_or_pause_button:"",arrow_backward:"",rewind:"",previous_track_button:"",arrow_up_small:"",arrow_double_up:"",arrow_down_small:"",arrow_double_down:"",pause_button:"",stop_button:"",record_button:"",eject_button:"",cinema:"",low_brightness:"",high_brightness:"",signal_strength:"",wireless:"",vibration_mode:"",mobile_phone_off:"",female_sign:"",male_sign:"",transgender_symbol:"",heavy_multiplication_x:"",heavy_plus_sign:"",heavy_minus_sign:"",heavy_division_sign:"",heavy_equals_sign:"",infinity:"",bangbang:"",interrobang:"",question:"",grey_question:"",grey_exclamation:"",exclamation:"",heavy_exclamation_mark:"",wavy_dash:"",currency_exchange:"",heavy_dollar_sign:"",medical_symbol:"",recycle:"",fleur_de_lis:"",trident:"",name_badge:"",beginner:"",o:"",white_check_mark:"",ballot_box_with_check:"",heavy_check_mark:"",x:"",negative_squared_cross_mark:"",curly_loop:"",loop:"",part_alternation_mark:"",eight_spoked_asterisk:"",eight_pointed_black_star:"",sparkle:"",copyright:"",registered:"",tm:"",hash:"#",asterisk:"*",zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",keycap_ten:"",capital_abcd:"",abcd:"",symbols:"",abc:"",a:"",ab:"",b:"",cl:"",cool:"",free:"",information_source:"",id:"",m:"",new:"",ng:"",o2:"",ok:"",parking:"",sos:"",up:"",vs:"",koko:"",sa:"",u6708:"",u6709:"",u6307:"",ideograph_advantage:"",u5272:"",u7121:"",u7981:"",accept:"",u7533:"",u5408:"",u7a7a:"",congratulations:"",secret:"",u55b6:"",u6e80:"",red_circle:"",orange_circle:"",yellow_circle:"",green_circle:"",large_blue_circle:"",purple_circle:"",brown_circle:"",black_circle:"",white_circle:"",red_square:"",orange_square:"",yellow_square:"",green_square:"",blue_square:"",purple_square:"",brown_square:"",black_large_square:"",white_large_square:"",black_medium_square:"",white_medium_square:"",black_medium_small_square:"",white_medium_small_square:"",black_small_square:"",white_small_square:"",large_orange_diamond:"",large_blue_diamond:"",small_orange_diamond:"",small_blue_diamond:"",small_red_triangle:"",small_red_triangle_down:"",diamond_shape_with_a_dot_inside:"",radio_button:"",white_square_button:"",black_square_button:"",checkered_flag:"",triangular_flag_on_post:"",crossed_flags:"",black_flag:"",white_flag:"",rainbow_flag:"",transgender_flag:"",pirate_flag:"",ascension_island:"",andorra:"",united_arab_emirates:"",afghanistan:"",antigua_barbuda:"",anguilla:"",albania:"",armenia:"",angola:"",antarctica:"",argentina:"",american_samoa:"",austria:"",australia:"",aruba:"",aland_islands:"",azerbaijan:"",bosnia_herzegovina:"",barbados:"",bangladesh:"",belgium:"",burkina_faso:"",bulgaria:"",bahrain:"",burundi:"",benin:"",st_barthelemy:"",bermuda:"",brunei:"",bolivia:"",caribbean_netherlands:"",brazil:"",bahamas:"",bhutan:"",bouvet_island:"",botswana:"",belarus:"",belize:"",canada:"",cocos_islands:"",congo_kinshasa:"",central_african_republic:"",congo_brazzaville:"",switzerland:"",cote_divoire:"",cook_islands:"",chile:"",cameroon:"",cn:"",colombia:"",clipperton_island:"",costa_rica:"",cuba:"",cape_verde:"",curacao:"",christmas_island:"",cyprus:"",czech_republic:"",de:"",diego_garcia:"",djibouti:"",denmark:"",dominica:"",dominican_republic:"",algeria:"",ceuta_melilla:"",ecuador:"",estonia:"",egypt:"",western_sahara:"",eritrea:"",es:"",ethiopia:"",eu:"",european_union:"",finland:"",fiji:"",falkland_islands:"",micronesia:"",faroe_islands:"",fr:"",gabon:"",gb:"",uk:"",grenada:"",georgia:"",french_guiana:"",guernsey:"",ghana:"",gibraltar:"",greenland:"",gambia:"",guinea:"",guadeloupe:"",equatorial_guinea:"",greece:"",south_georgia_south_sandwich_islands:"",guatemala:"",guam:"",guinea_bissau:"",guyana:"",hong_kong:"",heard_mcdonald_islands:"",honduras:"",croatia:"",haiti:"",hungary:"",canary_islands:"",indonesia:"",ireland:"",israel:"",isle_of_man:"",india:"",british_indian_ocean_territory:"",iraq:"",iran:"",iceland:"",it:"",jersey:"",jamaica:"",jordan:"",jp:"",kenya:"",kyrgyzstan:"",cambodia:"",kiribati:"",comoros:"",st_kitts_nevis:"",north_korea:"",kr:"",kuwait:"",cayman_islands:"",kazakhstan:"",laos:"",lebanon:"",st_lucia:"",liechtenstein:"",sri_lanka:"",liberia:"",lesotho:"",lithuania:"",luxembourg:"",latvia:"",libya:"",morocco:"",monaco:"",moldova:"",montenegro:"",st_martin:"",madagascar:"",marshall_islands:"",macedonia:"",mali:"",myanmar:"",mongolia:"",macau:"",northern_mariana_islands:"",martinique:"",mauritania:"",montserrat:"",malta:"",mauritius:"",maldives:"",malawi:"",mexico:"",malaysia:"",mozambique:"",namibia:"",new_caledonia:"",niger:"",norfolk_island:"",nigeria:"",nicaragua:"",netherlands:"",norway:"",nepal:"",nauru:"",niue:"",new_zealand:"",oman:"",panama:"",peru:"",french_polynesia:"",papua_new_guinea:"",philippines:"",pakistan:"",poland:"",st_pierre_miquelon:"",pitcairn_islands:"",puerto_rico:"",palestinian_territories:"",portugal:"",palau:"",paraguay:"",qatar:"",reunion:"",romania:"",serbia:"",ru:"",rwanda:"",saudi_arabia:"",solomon_islands:"",seychelles:"",sudan:"",sweden:"",singapore:"",st_helena:"",slovenia:"",svalbard_jan_mayen:"",slovakia:"",sierra_leone:"",san_marino:"",senegal:"",somalia:"",suriname:"",south_sudan:"",sao_tome_principe:"",el_salvador:"",sint_maarten:"",syria:"",swaziland:"",tristan_da_cunha:"",turks_caicos_islands:"",chad:"",french_southern_territories:"",togo:"",thailand:"",tajikistan:"",tokelau:"",timor_leste:"",turkmenistan:"",tunisia:"",tonga:"",tr:"",trinidad_tobago:"",tuvalu:"",taiwan:"",tanzania:"",ukraine:"",uganda:"",us_outlying_islands:"",united_nations:"",us:"",uruguay:"",uzbekistan:"",vatican_city:"",st_vincent_grenadines:"",venezuela:"",british_virgin_islands:"",us_virgin_islands:"",vietnam:"",vanuatu:"",wallis_futuna:"",samoa:"",kosovo:"",yemen:"",mayotte:"",south_africa:"",zambia:"",zimbabwe:"",england:"",scotland:"",wales:"",large_purple_circle:""};ho.use(nd({emojis:ld,renderer:e=>e.emoji}));ho.use({walkTokens(e){e.type==="html"&&(e.type="text",e.text=e.raw??e.text??"")}});const dd=()=>{const e=Ie(),o=s=>async()=>{await e(`<${s}/>`,`<${s}/> has been copied`)};return t("div",{className:"vm-preview-icons",children:Object.entries(ga).map(([s,i])=>t("div",{className:"vm-preview-icons-item",onClick:o(s),children:[t("div",{className:"vm-preview-icons-item__svg",children:i()}),t("div",{className:"vm-preview-icons-item__name",children:`<${s}/>`})]},s))})},md=()=>{const[e,o]=N(!1);return t(V,{children:t(ir,{children:t(ka,{children:t(V,{children:[t(Ca,{onLoaded:o}),e&&t(rr,{children:t(_t,{path:"/",element:t(ad,{}),children:[t(_t,{path:"/",element:t(yl,{})}),t(_t,{path:Pe.streamContext,element:t(cd,{})}),t(_t,{path:"/icons",element:t(dd,{})})]})})]})})})})},Cs=document.getElementById("root");Cs&&ar(t(md,{}),Cs);
